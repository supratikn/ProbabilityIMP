<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
<title>VPHL</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library VPHL</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab19"></a><h1 class="section">VPHL: A Verified Probabilistic Hoare Logic</h1>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <a class="idref" href="PrImp.html#"><span class="id" type="library">PrImp</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Program.Equality.html#"><span class="id" type="library">Coq.Program.Equality</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Logic.FunctionalExtensionality.html#"><span class="id" type="library">Coq.Logic.FunctionalExtensionality</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab20"></a><h2 class="section">Hoare Expressions</h2>

      Hexps are the fundamental assertions of our Hoare Logic.

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Inductive</span> <a name="hexp"><span class="id" type="inductive">hexp</span></a> : <span class="id" type="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a name="HEq"><span class="id" type="constructor">HEq</span></a> : <a class="idref" href="PrImp.html#bexp"><span class="id" type="inductive">bexp</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#R"><span class="id" type="axiom">R</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a><br/>
&nbsp;&nbsp;| <a name="HLt"><span class="id" type="constructor">HLt</span></a> : <a class="idref" href="PrImp.html#bexp"><span class="id" type="inductive">bexp</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#R"><span class="id" type="axiom">R</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a><br/>
&nbsp;&nbsp;| <a name="HGt"><span class="id" type="constructor">HGt</span></a> : <a class="idref" href="PrImp.html#bexp"><span class="id" type="inductive">bexp</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#R"><span class="id" type="axiom">R</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a><br/>
&nbsp;&nbsp;| <a name="HAnd"><span class="id" type="constructor">HAnd</span></a> : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a><br/>
&nbsp;&nbsp;| <a name="HOr"><span class="id" type="constructor">HOr</span></a> : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a>.<br/>

<br/>
</div>

<div class="doc">
Useful Abbreviations 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="HLe"><span class="id" type="definition">HLe</span></a> <span class="id" type="var">b</span> <span class="id" type="var">r</span>: <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> := <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a>) (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a>).<br/>
<span class="id" type="keyword">Definition</span> <a name="HGe"><span class="id" type="definition">HGe</span></a> <span class="id" type="var">b</span> <span class="id" type="var">r</span>: <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> := <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a>) (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a>).<br/>
<span class="id" type="keyword">Definition</span> <a name="HNe"><span class="id" type="definition">HNe</span></a> <span class="id" type="var">b</span> <span class="id" type="var">r</span>: <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> := <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a>) (<a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a>).<br/>

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="HNot"><span class="id" type="definition">HNot</span></a> <span class="id" type="var">hx</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="VPHL.html#hx"><span class="id" type="variable">hx</span></a> <span class="id" type="keyword">with</span> <br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="VPHL.html#HNe"><span class="id" type="definition">HNe</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="VPHL.html#HGe"><span class="id" type="definition">HGe</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="VPHL.html#HLe"><span class="id" type="definition">HLe</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <span class="id" type="var">h1</span> <span class="id" type="var">h2</span> =&gt; <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#HNot"><span class="id" type="definition">HNot</span></a> <span class="id" type="var">h1</span>) (<a class="idref" href="VPHL.html#HNot"><span class="id" type="definition">HNot</span></a> <span class="id" type="var">h2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> <span class="id" type="var">h1</span> <span class="id" type="var">h2</span> =&gt; <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#HNot"><span class="id" type="definition">HNot</span></a> <span class="id" type="var">h1</span>) (<a class="idref" href="VPHL.html#HNot"><span class="id" type="definition">HNot</span></a> <span class="id" type="var">h2</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="HIf"><span class="id" type="definition">HIf</span></a> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span> : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> := <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#HNot"><span class="id" type="definition">HNot</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a>) <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a>.<br/>
<span class="id" type="keyword">Definition</span> <a name="HTrue"><span class="id" type="definition">HTrue</span></a> <span class="id" type="var">y</span> := <a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) 1.<br/>
<span class="id" type="keyword">Definition</span> <a name="HFalse"><span class="id" type="definition">HFalse</span></a> <span class="id" type="var">y</span> := <a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) 0.<br/>

<br/>
</div>

<div class="doc">
<a name="lab21"></a><h3 class="section">Evaluation</h3>

</div>
<div class="code">
<span class="id" type="keyword">Fixpoint</span> <a name="heval"><span class="id" type="definition">heval</span></a> (<span class="id" type="var">dst</span> : <a class="idref" href="PrImp.html#dstate"><span class="id" type="definition">dstate</span></a>) (<span class="id" type="var">h</span>: <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a>) {<span class="id" type="keyword">struct</span> <span class="id" type="var">h</span>}: <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="VPHL.html#h"><span class="id" type="variable">h</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">p</span> <br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'>'_x"><span class="id" type="notation">&gt;</span></a> <span class="id" type="var">p</span> <br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <span class="id" type="var">h1</span> <span class="id" type="var">h2</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">(</span></a><a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <span class="id" type="var">h1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation"><span style="font-family: arial;">&and;</span></span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">(</span></a><a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <span class="id" type="var">h2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> <span class="id" type="var">h1</span> <span class="id" type="var">h2</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation">(</span></a><a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <span class="id" type="var">h1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation"><span style="font-family: arial;">&or;</span></span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation">(</span></a><a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <span class="id" type="var">h2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="HGe_simpl"><span class="id" type="lemma">HGe_simpl</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">mst</span> <span class="id" type="var">b</span> <span class="id" type="var">p</span>, <a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#mst"><span class="id" type="variable">mst</span></a> (<a class="idref" href="VPHL.html#HGe"><span class="id" type="definition">HGe</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#mst"><span class="id" type="variable">mst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'>='_x"><span class="id" type="notation"><span style="font-family: serif;">&ge;</span></span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="HLe_simpl"><span class="id" type="lemma">HLe_simpl</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">mst</span> <span class="id" type="var">b</span> <span class="id" type="var">p</span>, <a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#mst"><span class="id" type="variable">mst</span></a> (<a class="idref" href="VPHL.html#HLe"><span class="id" type="definition">HLe</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#mst"><span class="id" type="variable">mst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<='_x"><span class="id" type="notation"><span style="font-family: serif;">&ge;</span></span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="HNe_simpl"><span class="id" type="lemma">HNe_simpl</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">mst</span> <span class="id" type="var">b</span> <span class="id" type="var">p</span>, <a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#mst"><span class="id" type="variable">mst</span></a> (<a class="idref" href="VPHL.html#HNe"><span class="id" type="definition">HNe</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation"><span style="font-family: arial;">&harr;</span></span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#mst"><span class="id" type="variable">mst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation">)</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#not"><span class="id" type="definition">not</span></a>. <span class="id" type="tactic">split</span>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="var">lra</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="h_implies"><span class="id" type="definition">h_implies</span></a> (<span class="id" type="var">P</span> <span class="id" type="var">Q</span> : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a>)  : <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst</span>, <a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a>.<br/>

<br/>
<span class="id" type="keyword">Notation</span> <a name=":hoare_spec_scope:x_'->>'_x"><span class="id" type="notation">"</span></a>P -&gt;&gt; Q" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="VPHL.html#h_implies"><span class="id" type="definition">h_implies</span></a> <span class="id" type="var">P</span> <span class="id" type="var">Q</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 80) : <span class="id" type="var">hoare_spec_scope</span>.<br/>

<br/>
<span class="id" type="keyword">Open</span> <span class="id" type="keyword">Scope</span> <span class="id" type="var">hoare_spec_scope</span>.<br/>

<br/>
<span class="id" type="keyword">Notation</span> <a name=":hoare_spec_scope:x_'<<->>'_x"><span class="id" type="notation">"</span></a>P &lt;&lt;-&gt;&gt; Q" :=<br/>
&nbsp;&nbsp;(<span class="id" type="var">P</span> <a class="idref" href="VPHL.html#:hoare_spec_scope:x_'->>'_x"><span class="id" type="notation"><span style="font-family: arial;">&#8702;</span></span></a> <span class="id" type="var">Q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation"><span style="font-family: arial;">&and;</span></span></a> <span class="id" type="var">Q</span> <a class="idref" href="VPHL.html#:hoare_spec_scope:x_'->>'_x"><span class="id" type="notation"><span style="font-family: arial;">&#8702;</span></span></a> <span class="id" type="var">P</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 80) : <span class="id" type="var">hoare_spec_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab22"></a><h2 class="section">Hoare Triples</h2>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="hoare_triple"><span class="id" type="definition">hoare_triple</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="var">P</span>:<a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a>) (<span class="id" type="var">c</span>:<a class="idref" href="PrImp.html#com"><span class="id" type="inductive">com</span></a>) (<span class="id" type="var">Q</span>:<a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a>) : <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a>  <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a>.<br/>

<br/>
<span class="id" type="keyword">Notation</span> <a name=":hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">"</span></a>{{ P }} c {{ Q }}" :=<br/>
&nbsp;&nbsp;(<a class="idref" href="VPHL.html#hoare_triple"><span class="id" type="definition">hoare_triple</span></a> <span class="id" type="var">P</span> <span class="id" type="var">c</span> <span class="id" type="var">Q</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 90, <span class="id" type="var">c</span> <span class="id" type="tactic">at</span> <span class="id" type="var">next</span> <span class="id" type="keyword">level</span>)<br/>
&nbsp;&nbsp;: <span class="id" type="var">hoare_spec_scope</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_post_true"><span class="id" type="lemma">hoare_post_true</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> (<span class="id" type="var">P</span> <span class="id" type="var">Q</span> : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a>) <span class="id" type="var">c</span>,<br/>
&nbsp;&nbsp;(<span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst</span>, <a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a>) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span> <span class="id" type="var">c</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#hoare_triple"><span class="id" type="definition">hoare_triple</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">mcom</span> <span class="id" type="var">HP</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_pre_false"><span class="id" type="lemma">hoare_pre_false</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> (<span class="id" type="var">P</span> <span class="id" type="var">Q</span> : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a>) <span class="id" type="var">c</span>,<br/>
&nbsp;&nbsp;(<span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst</span>, <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'~'_x"><span class="id" type="notation">~(</span></a><a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'~'_x"><span class="id" type="notation">)</span></a>) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span> <span class="id" type="var">c</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#hoare_triple"><span class="id" type="definition">hoare_triple</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">mcom</span> <span class="id" type="var">HP</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#not"><span class="id" type="definition">not</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">H</span> <span class="id" type="keyword">in</span> <span class="id" type="var">HP</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">HP</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab23"></a><h2 class="section">Hoare Consequence Rules: Largely preserved from Software Foundations</h2>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_consequence_pre"><span class="id" type="lemma">hoare_consequence_pre</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> (<span class="id" type="var">P</span> <span class="id" type="var">P'</span> <span class="id" type="var">Q</span> : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a>) <span class="id" type="var">c</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#P'"><span class="id" type="variable">P'</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:x_'->>'_x"><span class="id" type="notation"><span style="font-family: arial;">&#8702;</span></span></a> <a class="idref" href="VPHL.html#P'"><span class="id" type="variable">P'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">P'</span> <span class="id" type="var">Q</span> <span class="id" type="var">c</span> <span class="id" type="var">Hhoare</span> <span class="id" type="var">Himp</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">Hc</span> <span class="id" type="var">HP</span>. <span class="id" type="tactic">apply</span> (<span class="id" type="var">Hhoare</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">Himp</span>. <span class="id" type="tactic">assumption</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_consequence_post"><span class="id" type="lemma">hoare_consequence_post</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> (<span class="id" type="var">P</span> <span class="id" type="var">Q</span> <span class="id" type="var">Q'</span> : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a>) <span class="id" type="var">c</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#Q'"><span class="id" type="variable">Q'</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#Q'"><span class="id" type="variable">Q'</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:x_'->>'_x"><span class="id" type="notation"><span style="font-family: arial;">&#8702;</span></span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span> <span class="id" type="var">Q'</span> <span class="id" type="var">c</span> <span class="id" type="var">Hhoare</span> <span class="id" type="var">Himp</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">Hc</span> <span class="id" type="var">HP</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">Himp</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> (<span class="id" type="var">Hhoare</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>. <span class="id" type="tactic">assumption</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_consequence"><span class="id" type="lemma">hoare_consequence</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> (<span class="id" type="var">P</span> <span class="id" type="var">P'</span> <span class="id" type="var">Q</span> <span class="id" type="var">Q'</span> : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a>) <span class="id" type="var">c</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#P'"><span class="id" type="variable">P'</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#Q'"><span class="id" type="variable">Q'</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:x_'->>'_x"><span class="id" type="notation"><span style="font-family: arial;">&#8702;</span></span></a> <a class="idref" href="VPHL.html#P'"><span class="id" type="variable">P'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#Q'"><span class="id" type="variable">Q'</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:x_'->>'_x"><span class="id" type="notation"><span style="font-family: arial;">&#8702;</span></span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">P'</span> <span class="id" type="var">Q</span> <span class="id" type="var">Q'</span> <span class="id" type="var">c</span> <span class="id" type="var">Hht</span> <span class="id" type="var">HPP'</span> <span class="id" type="var">HQ'Q</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#hoare_consequence_pre"><span class="id" type="lemma">hoare_consequence_pre</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">P'</span> := <span class="id" type="var">P'</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#hoare_consequence_post"><span class="id" type="lemma">hoare_consequence_post</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">Q'</span> := <span class="id" type="var">Q'</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>. <span class="id" type="tactic">assumption</span>. <span class="id" type="tactic">assumption</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab24"></a><h2 class="section">Restricted Assertions</h2>


<div class="paragraph"> </div>

Certain Restricted Hoare Assertions enable us to reason from distributions
   to sub-distributions, and vice-versa 

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" type="keyword">Inductive</span> <a name="non_disjunctive"><span class="id" type="inductive">non_disjunctive</span></a> : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> <span style="font-family: arial;">&rarr;</span> <span class="id" type="keyword">Prop</span> := <br/>
&nbsp;&nbsp;| <a name="nd_eq"><span class="id" type="constructor">nd_eq</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span> <span class="id" type="var">p</span>, <a class="idref" href="VPHL.html#non_disjunctive"><span class="id" type="inductive">non_disjunctive</span></a> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)<br/>
&nbsp;&nbsp;| <a name="nd_lt"><span class="id" type="constructor">nd_lt</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span> <span class="id" type="var">p</span>, <a class="idref" href="VPHL.html#non_disjunctive"><span class="id" type="inductive">non_disjunctive</span></a> (<a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)<br/>
&nbsp;&nbsp;| <a name="nd_gt"><span class="id" type="constructor">nd_gt</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span> <span class="id" type="var">p</span>, <a class="idref" href="VPHL.html#non_disjunctive"><span class="id" type="inductive">non_disjunctive</span></a> (<a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)<br/>
&nbsp;&nbsp;| <a name="nd_conj"><span class="id" type="constructor">nd_conj</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">h1</span> <span class="id" type="var">h2</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#non_disjunctive"><span class="id" type="inductive">non_disjunctive</span></a> <a class="idref" href="VPHL.html#h1"><span class="id" type="variable">h1</span></a> <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#non_disjunctive"><span class="id" type="inductive">non_disjunctive</span></a> <a class="idref" href="VPHL.html#h2"><span class="id" type="variable">h2</span></a> <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#non_disjunctive"><span class="id" type="inductive">non_disjunctive</span></a> (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#h1"><span class="id" type="variable">h1</span></a> <a class="idref" href="VPHL.html#h2"><span class="id" type="variable">h2</span></a>).<br/>

<br/>
</div>

<div class="doc">
Lemma 4.1 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="non_disjunctive_combine"><span class="id" type="lemma">non_disjunctive_combine</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#non_disjunctive"><span class="id" type="inductive">non_disjunctive</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a>) <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [ | | | <span class="id" type="var">P1</span> <span class="id" type="var">P2</span> <span class="id" type="var">nd1</span> <span class="id" type="var">IH1</span> <span class="id" type="var">nd2</span> <span class="id" type="var">IH2</span>]; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>, <span class="id" type="var">H1</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#scale_lt"><span class="id" type="lemma">scale_lt</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#scale_gt"><span class="id" type="lemma">scale_gt</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">destruct</span> <span class="id" type="var">H0</span>, <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IH1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IH2</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Inductive</span> <a name="non_probabilistic"><span class="id" type="inductive">non_probabilistic</span></a> : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> <span style="font-family: arial;">&rarr;</span> <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="np_0"><span class="id" type="constructor">np_0</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span>, <a class="idref" href="VPHL.html#non_probabilistic"><span class="id" type="inductive">non_probabilistic</span></a> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> 0)<br/>
&nbsp;&nbsp;| <a name="np_1"><span class="id" type="constructor">np_1</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span>, <a class="idref" href="VPHL.html#non_probabilistic"><span class="id" type="inductive">non_probabilistic</span></a> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> 1)<br/>
&nbsp;&nbsp;| <a name="np_conj"><span class="id" type="constructor">np_conj</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">h1</span> <span class="id" type="var">h2</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#non_probabilistic"><span class="id" type="inductive">non_probabilistic</span></a> <a class="idref" href="VPHL.html#h1"><span class="id" type="variable">h1</span></a> <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#non_probabilistic"><span class="id" type="inductive">non_probabilistic</span></a> <a class="idref" href="VPHL.html#h2"><span class="id" type="variable">h2</span></a> <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#non_probabilistic"><span class="id" type="inductive">non_probabilistic</span></a> (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#h1"><span class="id" type="variable">h1</span></a> <a class="idref" href="VPHL.html#h2"><span class="id" type="variable">h2</span></a>)<br/>
&nbsp;&nbsp;| <a name="np_disj"><span class="id" type="constructor">np_disj</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">h1</span> <span class="id" type="var">h2</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#non_probabilistic"><span class="id" type="inductive">non_probabilistic</span></a> <a class="idref" href="VPHL.html#h1"><span class="id" type="variable">h1</span></a> <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#non_probabilistic"><span class="id" type="inductive">non_probabilistic</span></a> <a class="idref" href="VPHL.html#h2"><span class="id" type="variable">h2</span></a> <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#non_probabilistic"><span class="id" type="inductive">non_probabilistic</span></a> (<a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> <a class="idref" href="VPHL.html#h1"><span class="id" type="variable">h1</span></a> <a class="idref" href="VPHL.html#h2"><span class="id" type="variable">h2</span></a>).<br/>

<br/>
</div>

<div class="doc">
Lemma 4.2 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="non_probabilistic_split"><span class="id" type="lemma">non_probabilistic_split</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#non_probabilistic"><span class="id" type="inductive">non_probabilistic</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a>) <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;(<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation"><span style="font-family: arial;">&and;</span></span></a> <a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">np</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">np</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_split_0"><span class="id" type="lemma">pr_split_0</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_split_1"><span class="id" type="lemma">pr_split_1</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intuition</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intuition</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Inductive</span> <a name="deterministic"><span class="id" type="inductive">deterministic</span></a> : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> <span style="font-family: arial;">&rarr;</span> <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="det_lit"><span class="id" type="constructor">det_lit</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span>, <a class="idref" href="VPHL.html#deterministic"><span class="id" type="inductive">deterministic</span></a> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> 1)<br/>
&nbsp;&nbsp;| <a name="det_conj"><span class="id" type="constructor">det_conj</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">h1</span> <span class="id" type="var">h2</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#deterministic"><span class="id" type="inductive">deterministic</span></a> <a class="idref" href="VPHL.html#h1"><span class="id" type="variable">h1</span></a> <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#deterministic"><span class="id" type="inductive">deterministic</span></a> <a class="idref" href="VPHL.html#h2"><span class="id" type="variable">h2</span></a> <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#deterministic"><span class="id" type="inductive">deterministic</span></a> (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#h1"><span class="id" type="variable">h1</span></a> <a class="idref" href="VPHL.html#h2"><span class="id" type="variable">h2</span></a>).<br/>

<br/>
</div>

<div class="doc">
Lemma 4.3 (1) 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="deterministic_combine"><span class="id" type="lemma">deterministic_combine</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#deterministic"><span class="id" type="inductive">deterministic</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a>) <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">np</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">np</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_combine"><span class="id" type="lemma">pr_combine</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intuition</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Lemma 4.3 (2) 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="deterministic_split"><span class="id" type="lemma">deterministic_split</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#deterministic"><span class="id" type="inductive">deterministic</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a>) <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation"><span style="font-family: arial;">&and;</span></span></a> <a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">np</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">np</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_split_1"><span class="id" type="lemma">pr_split_1</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intuition</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab25"></a><h1 class="section">DST Equivalence:</h1>


<div class="paragraph"> </div>

   Since every distribution over states functions as a probability measure
   over assertions, we should have a notion of distribution equivalence.

<div class="paragraph"> </div>

   Note that since dsts are represented in tree form, and represent multisets of
   states and weights, the actual representations of equivalent dsts can vary widely
   (eg. any distribution can be expressed via an arbitrarily large tree).

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="dst_equiv"><span class="id" type="definition">dst_equiv</span></a> (<span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> : <a class="idref" href="PrImp.html#dstate"><span class="id" type="definition">dstate</span></a>) : <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span>, <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a>.<br/>

<br/>
<span class="id" type="keyword">Notation</span> <a name="::x_'=='_x"><span class="id" type="notation">"</span></a>a '==' b" := (<a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <span class="id" type="var">a</span> <span class="id" type="var">b</span>) (<span class="id" type="tactic">at</span> <span class="id" type="keyword">level</span> 50).<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="dst_equiv_eq"><span class="id" type="lemma">dst_equiv_eq</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">st1</span> <span class="id" type="var">st2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Distributions.html#Unit"><span class="id" type="constructor">Unit</span></a> <a class="idref" href="VPHL.html#st1"><span class="id" type="variable">st1</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="Distributions.html#Unit"><span class="id" type="constructor">Unit</span></a> <a class="idref" href="VPHL.html#st2"><span class="id" type="variable">st2</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#st1"><span class="id" type="variable">st1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#st2"><span class="id" type="variable">st2</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#injective_projections"><span class="id" type="lemma">injective_projections</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" type="lemma">functional_extensionality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">H</span> (<a class="idref" href="PrImp.html#BEq"><span class="id" type="constructor">BEq</span></a> (<a class="idref" href="PrImp.html#AId"><span class="id" type="constructor">AId</span></a> <span class="id" type="var">x</span>) (<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" type="definition">fst</span></a> <span class="id" type="var">st1</span> <span class="id" type="var">x</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.EqNat.html#beq_nat_refl"><span class="id" type="lemma">beq_nat_refl</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" type="definition">beq_nat</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" type="definition">fst</span></a> <span class="id" type="var">st2</span> <span class="id" type="var">x</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" type="definition">fst</span></a> <span class="id" type="var">st1</span> <span class="id" type="var">x</span>)) <span class="id" type="var">eqn</span>:<span class="id" type="var">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.EqNat.html#beq_nat_true"><span class="id" type="lemma">beq_nat_true</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" type="lemma">functional_extensionality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">H</span> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" type="definition">snd</span></a> <span class="id" type="var">st1</span> <span class="id" type="var">x</span>), (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" type="definition">snd</span></a> <span class="id" type="var">st2</span> <span class="id" type="var">x</span>); <span class="id" type="tactic">trivial</span>; <span class="id" type="var">lra</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="dst_equiv_refl"><span class="id" type="lemma">dst_equiv_refl</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst</span>, <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="dst_equiv_symm"><span class="id" type="lemma">dst_equiv_symm</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span>, <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>. <span class="id" type="tactic">auto</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="dst_equiv_trans"><span class="id" type="lemma">dst_equiv_trans</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">dst3</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="VPHL.html#dst3"><span class="id" type="variable">dst3</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="VPHL.html#dst3"><span class="id" type="variable">dst3</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>. <span class="id" type="tactic">intros</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">H0</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="dst_equiv_split"><span class="id" type="lemma">dst_equiv_split</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst11</span> <span class="id" type="var">dst10</span> <span class="id" type="var">dst21</span> <span class="id" type="var">dst20</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">(</span></a><a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst11"><span class="id" type="variable">dst11</span></a> <a class="idref" href="VPHL.html#dst10"><span class="id" type="variable">dst10</span></a><a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">)</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">(</span></a><a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst21"><span class="id" type="variable">dst21</span></a> <a class="idref" href="VPHL.html#dst20"><span class="id" type="variable">dst20</span></a><a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">)</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst11"><span class="id" type="variable">dst11</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst10"><span class="id" type="variable">dst10</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst21"><span class="id" type="variable">dst21</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst20"><span class="id" type="variable">dst20</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#dst11"><span class="id" type="variable">dst11</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="VPHL.html#dst21"><span class="id" type="variable">dst21</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation"><span style="font-family: arial;">&and;</span></span></a> <a class="idref" href="VPHL.html#dst10"><span class="id" type="variable">dst10</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="VPHL.html#dst20"><span class="id" type="variable">dst20</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">H</span> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b0</span> <span class="id" type="var">b</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_1_r"><span class="id" type="lemma">pr_conj_1_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_1_r"><span class="id" type="lemma">pr_conj_1_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_0_r"><span class="id" type="lemma">Rmult_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" type="lemma">Rplus_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_eq_reg_l"><span class="id" type="lemma">Rmult_eq_reg_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=<span class="id" type="var">p</span>); <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">H</span> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b0</span> (<a class="idref" href="PrImp.html#BNot"><span class="id" type="constructor">BNot</span></a> <span class="id" type="var">b</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_complement_1"><span class="id" type="lemma">prb_complement_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_complement_0"><span class="id" type="lemma">prb_complement_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_complement_1"><span class="id" type="lemma">prb_complement_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_complement_0"><span class="id" type="lemma">prb_complement_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_1_r"><span class="id" type="lemma">pr_conj_1_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_1_r"><span class="id" type="lemma">pr_conj_1_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_0_r"><span class="id" type="lemma">Rmult_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_0_l"><span class="id" type="axiom">Rplus_0_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_eq_reg_l"><span class="id" type="lemma">Rmult_eq_reg_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span>)); <span class="id" type="var">lra</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="dst_equiv_combine"><span class="id" type="lemma">dst_equiv_combine</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst11</span> <span class="id" type="var">dst12</span> <span class="id" type="var">dst21</span> <span class="id" type="var">dst22</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#dst11"><span class="id" type="variable">dst11</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="VPHL.html#dst21"><span class="id" type="variable">dst21</span></a> <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#dst12"><span class="id" type="variable">dst12</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="VPHL.html#dst22"><span class="id" type="variable">dst22</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">(</span></a><a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst11"><span class="id" type="variable">dst11</span></a> <a class="idref" href="VPHL.html#dst12"><span class="id" type="variable">dst12</span></a><a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">)</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">(</span></a><a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst21"><span class="id" type="variable">dst21</span></a> <a class="idref" href="VPHL.html#dst22"><span class="id" type="variable">dst22</span></a><a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">)</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>. <span class="id" type="tactic">intros</span>. <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>, <span class="id" type="var">H0</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="dst_equiv_unit_split"><span class="id" type="lemma">dst_equiv_unit_split</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">st</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">(</span></a><a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a><a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">)</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">(</span></a><a class="idref" href="Distributions.html#Unit"><span class="id" type="constructor">Unit</span></a> <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a><a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation"><span style="font-family: arial;">&harr;</span></span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">(</span></a><a class="idref" href="Distributions.html#Unit"><span class="id" type="constructor">Unit</span></a> <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a><a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation"><span style="font-family: arial;">&and;</span></span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">(</span></a><a class="idref" href="Distributions.html#Unit"><span class="id" type="constructor">Unit</span></a> <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a><a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">)</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">H</span> <span class="id" type="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <span class="id" type="var">b</span> <span class="id" type="var">st</span>) <span class="id" type="var">eqn</span>:<span class="id" type="var">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#sum_to_1"><span class="id" type="lemma">sum_to_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_normality"><span class="id" type="lemma">pr_normality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#sum_to_0"><span class="id" type="lemma">sum_to_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_normality"><span class="id" type="lemma">pr_normality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">H</span> <span class="id" type="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <span class="id" type="var">b</span> <span class="id" type="var">st</span>) <span class="id" type="var">eqn</span>:<span class="id" type="var">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#sum_to_1"><span class="id" type="lemma">sum_to_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_normality"><span class="id" type="lemma">pr_normality</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#sum_to_0"><span class="id" type="lemma">sum_to_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_normality"><span class="id" type="lemma">pr_normality</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">H1</span> <span class="id" type="var">H2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H1</span>, <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">lra</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
   The following lemmas assume we have the proof terms v'. 
   We could give the proof terms explicitly i.e. one_minus_p p v 

<div class="paragraph"> </div>

 Lemma 2.1 Distribution Commutativity 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="dst_comm"><span class="id" type="lemma">dst_comm</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">v'</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">(</span></a><a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a><a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">)</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">(</span></a><a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="VPHL.html#v'"><span class="id" type="variable">v'</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a><a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">)</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>. <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">intros</span>. <span class="id" type="var">lra</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Lemma 2.2 Distribution Associativity 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="dst_assoc"><span class="id" type="lemma">dst_assoc</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">p</span> <span class="id" type="var">q</span> <span class="id" type="var">v</span> <span class="id" type="var">v'</span> <span class="id" type="var">w</span> <span class="id" type="var">w'</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">dst3</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="VPHL.html#w"><span class="id" type="variable">w</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a>) <a class="idref" href="VPHL.html#dst3"><span class="id" type="variable">dst3</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><a class="idref" href="VPHL.html#q"><span class="id" type="variable">q</span></a>) <a class="idref" href="VPHL.html#w'"><span class="id" type="variable">w'</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<a class="idref" href="VPHL.html#q"><span class="id" type="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><a class="idref" href="VPHL.html#q"><span class="id" type="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>) <a class="idref" href="VPHL.html#v'"><span class="id" type="variable">v'</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <a class="idref" href="VPHL.html#dst3"><span class="id" type="variable">dst3</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">replace</span> (<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">))</span></a>) <span class="id" type="keyword">with</span> (<span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 3 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>. 2:<span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">H</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;2: <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>. 2:<span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="var">lra</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Lemma 2.3 Distribution Merge 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="dst_merge"><span class="id" type="lemma">dst_merge</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">p</span> <span class="id" type="var">q</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">w</span> <span class="id" type="var">u'</span> <span class="id" type="var">v'</span> <span class="id" type="var">w'</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">dst3</span> <span class="id" type="var">dst4</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#u"><span class="id" type="variable">u</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a>) (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a> <a class="idref" href="VPHL.html#w"><span class="id" type="variable">w</span></a> <a class="idref" href="VPHL.html#dst3"><span class="id" type="variable">dst3</span></a> <a class="idref" href="VPHL.html#dst4"><span class="id" type="variable">dst4</span></a>) <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><a class="idref" href="VPHL.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)*</span></a><a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a>) <a class="idref" href="VPHL.html#u'"><span class="id" type="variable">u'</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><a class="idref" href="VPHL.html#q"><span class="id" type="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)/(</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><a class="idref" href="VPHL.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)*</span></a><a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>) <a class="idref" href="VPHL.html#v'"><span class="id" type="variable">v'</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst3"><span class="id" type="variable">dst3</span></a>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#q"><span class="id" type="variable">q</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">(</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><a class="idref" href="VPHL.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)*</span></a><a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>) <a class="idref" href="VPHL.html#w'"><span class="id" type="variable">w'</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <a class="idref" href="VPHL.html#dst4"><span class="id" type="variable">dst4</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">r</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">r</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_l_sym"><span class="id" type="lemma">Rinv_l_sym</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">r</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">r</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_l_sym"><span class="id" type="lemma">Rinv_l_sym</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">r</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">r</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r2</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">r</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_l_sym"><span class="id" type="lemma">Rinv_l_sym</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span>(<span class="id" type="var">H</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">r</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">r</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)*(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">r</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> ! <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">lra</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Updating at the root or leaves is equivalent 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="prob_update_equiv"><span class="id" type="lemma">prob_update_equiv</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst</span> <span class="id" type="var">x</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#prob_update"><span class="id" type="definition">prob_update</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> (<a class="idref" href="PrImp.html#dist_update"><span class="id" type="definition">dist_update</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> 1)) (<a class="idref" href="PrImp.html#dist_update"><span class="id" type="definition">dist_update</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> 0)).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHdst1</span>, <span class="id" type="var">IHdst2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">lra</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="prob_update_b_equiv"><span class="id" type="lemma">prob_update_b_equiv</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst</span> <span class="id" type="var">y</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#prob_update_b"><span class="id" type="definition">prob_update_b</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#::x_'=='_x"><span class="id" type="notation">==</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> (<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#BTrue"><span class="id" type="constructor">BTrue</span></a>) (<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#BFalse"><span class="id" type="constructor">BFalse</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHdst1</span>, <span class="id" type="var">IHdst2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">lra</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We can equivalently define dst_equiv over assertions, rather than probabilities. 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="dst_equiv_hexp"><span class="id" type="definition">dst_equiv_hexp</span></a> (<span class="id" type="var">dst</span> <span class="id" type="var">dst'</span>: <a class="idref" href="PrImp.html#dstate"><span class="id" type="definition">dstate</span></a>) : <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span>, <a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation"><span style="font-family: arial;">&harr;</span></span></a> <a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="dst_equiv_iff"><span class="id" type="lemma">dst_equiv_iff</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span>,<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation"><span style="font-family: arial;">&harr;</span></span></a> <a class="idref" href="VPHL.html#dst_equiv_hexp"><span class="id" type="definition">dst_equiv_hexp</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">induction</span> <span class="id" type="var">P</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">try</span> <span class="id" type="tactic">solve</span> [<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHP1</span>, <span class="id" type="var">IHP2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHP1</span>, <span class="id" type="var">IHP2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">P</span>:=(<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <span class="id" type="var">b</span> (<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst'</span>))) <span class="id" type="keyword">as</span> [<span class="id" type="var">ignore</span> <span class="id" type="var">solution</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">solution</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="dst_comm_hexp"><span class="id" type="lemma">dst_comm_hexp</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">v'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#dst_equiv_hexp"><span class="id" type="definition">dst_equiv_hexp</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a>) (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="VPHL.html#v'"><span class="id" type="variable">v'</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#dst_equiv_iff"><span class="id" type="lemma">dst_equiv_iff</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#dst_comm"><span class="id" type="lemma">dst_comm</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab26"></a><h2 class="section">The Hoare Skip Rule</h2>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_skip"><span class="id" type="lemma">hoare_skip</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="PrImp.html#Skip"><span class="id" type="constructor">Skip</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#skip_equiv"><span class="id" type="lemma">skip_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab27"></a><h2 class="section">The Hoare Sequence Rule</h2>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_seq"><span class="id" type="lemma">hoare_seq</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span> <span class="id" type="var">R</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#R"><span class="id" type="variable">R</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="PrImp.html#::x_';'_x"><span class="id" type="notation">;</span></a>  <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#R"><span class="id" type="variable">R</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span> <span class="id" type="var">R</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">hoare1</span> <span class="id" type="var">hoare2</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#seq_equiv"><span class="id" type="lemma">seq_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">step</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">dst0</span> &amp; <span class="id" type="var">step1</span> &amp; <span class="id" type="var">step2</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> (<span class="id" type="var">hoare2</span> <span class="id" type="var">dst0</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step2</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> (<span class="id" type="var">hoare1</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst0</span> <span class="id" type="var">step1</span> <span class="id" type="var">pre</span>).<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab28"></a><h1 class="section">Hoare Assignment</h1>

<div class="paragraph"> </div>

 First, we substitute a for X thoughout an arithmetic expression. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="aexp_sub"><span class="id" type="definition">aexp_sub</span></a> <span class="id" type="var">x</span> <span class="id" type="var">a</span> <span class="id" type="var">ax</span> {<span class="id" type="keyword">struct</span> <span class="id" type="var">ax</span>} : <a class="idref" href="PrImp.html#aexp"><span class="id" type="inductive">aexp</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="VPHL.html#ax"><span class="id" type="variable">ax</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> <span class="id" type="var">n</span> =&gt; <a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> <span class="id" type="var">n</span><br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#AId"><span class="id" type="constructor">AId</span></a> <span class="id" type="var">x'</span> =&gt; <span class="id" type="keyword">if</span> <a class="idref" href="SfLib.html#beq_aid"><span class="id" type="definition">beq_aid</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span class="id" type="var">x'</span> <span class="id" type="keyword">then</span> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="keyword">else</span> <a class="idref" href="PrImp.html#AId"><span class="id" type="constructor">AId</span></a> <span class="id" type="var">x'</span><br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#APlus"><span class="id" type="constructor">APlus</span></a> <span class="id" type="var">a1</span> <span class="id" type="var">a2</span> =&gt; <a class="idref" href="PrImp.html#APlus"><span class="id" type="constructor">APlus</span></a> (<a class="idref" href="VPHL.html#aexp_sub"><span class="id" type="definition">aexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">a1</span>) (<a class="idref" href="VPHL.html#aexp_sub"><span class="id" type="definition">aexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">a2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#AMinus"><span class="id" type="constructor">AMinus</span></a> <span class="id" type="var">a1</span> <span class="id" type="var">a2</span>  =&gt; <a class="idref" href="PrImp.html#AMinus"><span class="id" type="constructor">AMinus</span></a> (<a class="idref" href="VPHL.html#aexp_sub"><span class="id" type="definition">aexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">a1</span>) (<a class="idref" href="VPHL.html#aexp_sub"><span class="id" type="definition">aexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">a2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#AMult"><span class="id" type="constructor">AMult</span></a> <span class="id" type="var">a1</span> <span class="id" type="var">a2</span> =&gt; <a class="idref" href="PrImp.html#AMult"><span class="id" type="constructor">AMult</span></a> (<a class="idref" href="VPHL.html#aexp_sub"><span class="id" type="definition">aexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">a1</span>) (<a class="idref" href="VPHL.html#aexp_sub"><span class="id" type="definition">aexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">a2</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="bexp_sub"><span class="id" type="definition">bexp_sub</span></a> <span class="id" type="var">x</span> <span class="id" type="var">a</span> <span class="id" type="var">bx</span> {<span class="id" type="keyword">struct</span> <span class="id" type="var">bx</span>} : <a class="idref" href="PrImp.html#bexp"><span class="id" type="inductive">bexp</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="VPHL.html#bx"><span class="id" type="variable">bx</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#BTrue"><span class="id" type="constructor">BTrue</span></a>       =&gt; <a class="idref" href="PrImp.html#BTrue"><span class="id" type="constructor">BTrue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#BFalse"><span class="id" type="constructor">BFalse</span></a>      =&gt; <a class="idref" href="PrImp.html#BFalse"><span class="id" type="constructor">BFalse</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span>       =&gt; <a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span><br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#BEq"><span class="id" type="constructor">BEq</span></a> <span class="id" type="var">a1</span> <span class="id" type="var">a2</span>   =&gt; <a class="idref" href="PrImp.html#BEq"><span class="id" type="constructor">BEq</span></a> (<a class="idref" href="VPHL.html#aexp_sub"><span class="id" type="definition">aexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">a1</span>) (<a class="idref" href="VPHL.html#aexp_sub"><span class="id" type="definition">aexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">a2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#BLe"><span class="id" type="constructor">BLe</span></a> <span class="id" type="var">a1</span> <span class="id" type="var">a2</span>   =&gt; <a class="idref" href="PrImp.html#BLe"><span class="id" type="constructor">BLe</span></a> (<a class="idref" href="VPHL.html#aexp_sub"><span class="id" type="definition">aexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">a1</span>) (<a class="idref" href="VPHL.html#aexp_sub"><span class="id" type="definition">aexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">a2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#BNot"><span class="id" type="constructor">BNot</span></a> <span class="id" type="var">b1</span>     =&gt; <a class="idref" href="PrImp.html#BNot"><span class="id" type="constructor">BNot</span></a> (<a class="idref" href="VPHL.html#bexp_sub"><span class="id" type="definition">bexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">b1</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b1</span> <span class="id" type="var">b2</span>  =&gt; <a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> (<a class="idref" href="VPHL.html#bexp_sub"><span class="id" type="definition">bexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">b1</span>) (<a class="idref" href="VPHL.html#bexp_sub"><span class="id" type="definition">bexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">b2</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="hexp_sub"><span class="id" type="definition">hexp_sub</span></a> <span class="id" type="var">x</span> <span class="id" type="var">a</span> <span class="id" type="var">hx</span> {<span class="id" type="keyword">struct</span> <span class="id" type="var">hx</span>} : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> := <br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="VPHL.html#hx"><span class="id" type="variable">hx</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="VPHL.html#bexp_sub"><span class="id" type="definition">bexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">b</span>) <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> (<a class="idref" href="VPHL.html#bexp_sub"><span class="id" type="definition">bexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">b</span>) <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> (<a class="idref" href="VPHL.html#bexp_sub"><span class="id" type="definition">bexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">b</span>) <span class="id" type="var">p</span> <br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <span class="id" type="var">h1</span> <span class="id" type="var">h2</span> =&gt; <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#hexp_sub"><span class="id" type="definition">hexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">h1</span>) (<a class="idref" href="VPHL.html#hexp_sub"><span class="id" type="definition">hexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">h2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> <span class="id" type="var">h1</span> <span class="id" type="var">h2</span> =&gt; <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#hexp_sub"><span class="id" type="definition">hexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">h1</span>) (<a class="idref" href="VPHL.html#hexp_sub"><span class="id" type="definition">hexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <span class="id" type="var">h2</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="a_sub_eq"><span class="id" type="lemma">a_sub_eq</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">x</span> <span class="id" type="var">a</span> <span class="id" type="var">ax</span> <span class="id" type="var">st</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#aeval"><span class="id" type="definition">aeval</span></a> (<a class="idref" href="VPHL.html#aexp_sub"><span class="id" type="definition">aexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <a class="idref" href="VPHL.html#ax"><span class="id" type="variable">ax</span></a>) <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="PrImp.html#aeval"><span class="id" type="definition">aeval</span></a> <a class="idref" href="VPHL.html#ax"><span class="id" type="variable">ax</span></a> (<a class="idref" href="SfLib.html#update"><span class="id" type="definition">update</span></a> <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="PrImp.html#aeval"><span class="id" type="definition">aeval</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a>)).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">ax</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">a</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">ax</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="SfLib.html#update"><span class="id" type="definition">update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="SfLib.html#beq_aid"><span class="id" type="definition">beq_aid</span></a> <span class="id" type="var">x</span> <span class="id" type="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHax1</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHax2</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHax1</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHax2</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHax1</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHax2</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">induction</span> <span class="id" type="var">ax</span>; <span class="id" type="tactic">try</span> (<span class="id" type="tactic">solve</span> [<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHax1</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHax2</span>; <span class="id" type="tactic">reflexivity</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="SfLib.html#update"><span class="id" type="definition">update</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="SfLib.html#beq_aid"><span class="id" type="definition">beq_aid</span></a> <span class="id" type="var">x</span> <span class="id" type="var">a0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">induction</span> <span class="id" type="var">ax</span>; <span class="id" type="tactic">try</span> (<span class="id" type="tactic">solve</span> [<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHax1</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHax2</span>; <span class="id" type="tactic">reflexivity</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="SfLib.html#beq_aid"><span class="id" type="definition">beq_aid</span></a> <span class="id" type="var">x</span> <span class="id" type="var">a</span>) <span class="id" type="var">eqn</span>:<span class="id" type="var">eq</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">induction</span> <span class="id" type="var">ax</span>; <span class="id" type="tactic">try</span> (<span class="id" type="tactic">solve</span> [<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHax1</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHax2</span>; <span class="id" type="tactic">reflexivity</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="SfLib.html#beq_aid"><span class="id" type="definition">beq_aid</span></a> <span class="id" type="var">x</span> <span class="id" type="var">a</span>) <span class="id" type="var">eqn</span>:<span class="id" type="var">eq</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">induction</span> <span class="id" type="var">ax</span>; <span class="id" type="tactic">try</span> (<span class="id" type="tactic">solve</span> [<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHax1</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHax2</span>; <span class="id" type="tactic">reflexivity</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="SfLib.html#beq_aid"><span class="id" type="definition">beq_aid</span></a> <span class="id" type="var">x</span> <span class="id" type="var">a</span>) <span class="id" type="var">eqn</span>:<span class="id" type="var">eq</span>; <span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="b_sub_eq"><span class="id" type="lemma">b_sub_eq</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">x</span> <span class="id" type="var">a</span> <span class="id" type="var">bx</span> <span class="id" type="var">st</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> (<a class="idref" href="VPHL.html#bexp_sub"><span class="id" type="definition">bexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <a class="idref" href="VPHL.html#bx"><span class="id" type="variable">bx</span></a>) <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <a class="idref" href="VPHL.html#bx"><span class="id" type="variable">bx</span></a> (<a class="idref" href="SfLib.html#update"><span class="id" type="definition">update</span></a> <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> (<a class="idref" href="PrImp.html#aeval"><span class="id" type="definition">aeval</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a>)).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">bx</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="VPHL.html#a_sub_eq"><span class="id" type="lemma">a_sub_eq</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="VPHL.html#a_sub_eq"><span class="id" type="lemma">a_sub_eq</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHbx</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHbx1</span>, <span class="id" type="var">IHbx2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="pr_sub"><span class="id" type="lemma">pr_sub</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">x</span> <span class="id" type="var">a</span> <span class="id" type="var">b</span> <span class="id" type="var">dst</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#bexp_sub"><span class="id" type="definition">bexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="PrImp.html#dist_update"><span class="id" type="definition">dist_update</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#b_sub_eq"><span class="id" type="lemma">b_sub_eq</span></a>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHdst1</span>, <span class="id" type="var">IHdst2</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="h_sub_eq"><span class="id" type="lemma">h_sub_eq</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">x</span> <span class="id" type="var">a</span> <span class="id" type="var">hx</span> <span class="id" type="var">dst</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> (<a class="idref" href="VPHL.html#hexp_sub"><span class="id" type="definition">hexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <a class="idref" href="VPHL.html#hx"><span class="id" type="variable">hx</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> (<a class="idref" href="PrImp.html#dist_update"><span class="id" type="definition">dist_update</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a>) <a class="idref" href="VPHL.html#hx"><span class="id" type="variable">hx</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">hx</span>.<br/>
&nbsp;&nbsp;+  <span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#b_sub_eq"><span class="id" type="lemma">b_sub_eq</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="VPHL.html#pr_sub"><span class="id" type="lemma">pr_sub</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+  <span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#b_sub_eq"><span class="id" type="lemma">b_sub_eq</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="VPHL.html#pr_sub"><span class="id" type="lemma">pr_sub</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+  <span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#b_sub_eq"><span class="id" type="lemma">b_sub_eq</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="VPHL.html#pr_sub"><span class="id" type="lemma">pr_sub</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHhx1</span>, <span class="id" type="var">IHhx2</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHhx1</span>, <span class="id" type="var">IHhx2</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab29"></a><h2 class="section">The Hoare Assignment Rule</h2>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_asgn"><span class="id" type="lemma">hoare_asgn</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">Q</span> <span class="id" type="var">x</span> <span class="id" type="var">a</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#hexp_sub"><span class="id" type="definition">hexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">(</span></a><a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="PrImp.html#::x_'::='_x"><span class="id" type="notation">::=</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">)</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">Q</span> <span class="id" type="var">x</span> <span class="id" type="var">a</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#assign_equiv"><span class="id" type="lemma">assign_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#h_sub_eq"><span class="id" type="lemma">h_sub_eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The Related Equivalence Rule 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="update_equiv"><span class="id" type="lemma">update_equiv</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">x</span> <span class="id" type="var">n</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> (<a class="idref" href="PrImp.html#dist_update"><span class="id" type="definition">dist_update</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#n"><span class="id" type="variable">n</span></a>) (<a class="idref" href="PrImp.html#dist_update"><span class="id" type="definition">dist_update</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#n"><span class="id" type="variable">n</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#dst_equiv_iff"><span class="id" type="lemma">dst_equiv_iff</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv_hexp"><span class="id" type="definition">dst_equiv_hexp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="VPHL.html#h_sub_eq"><span class="id" type="lemma">h_sub_eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab30"></a><h1 class="section">Boolean Assignment</h1>

      This follows the same structure as above 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="bexp_sub_b"><span class="id" type="definition">bexp_sub_b</span></a> <span class="id" type="var">y</span> <span class="id" type="var">b</span> <span class="id" type="var">bx</span> {<span class="id" type="keyword">struct</span> <span class="id" type="var">bx</span>} : <a class="idref" href="PrImp.html#bexp"><span class="id" type="inductive">bexp</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="VPHL.html#bx"><span class="id" type="variable">bx</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#BTrue"><span class="id" type="constructor">BTrue</span></a>       =&gt; <a class="idref" href="PrImp.html#BTrue"><span class="id" type="constructor">BTrue</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#BFalse"><span class="id" type="constructor">BFalse</span></a>      =&gt; <a class="idref" href="PrImp.html#BFalse"><span class="id" type="constructor">BFalse</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y'</span>      =&gt; <span class="id" type="keyword">if</span> <a class="idref" href="SfLib.html#beq_bid"><span class="id" type="definition">beq_bid</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span class="id" type="var">y'</span> <span class="id" type="keyword">then</span> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">else</span> <a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y'</span><br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#BEq"><span class="id" type="constructor">BEq</span></a> <span class="id" type="var">a1</span> <span class="id" type="var">a2</span>   =&gt; <a class="idref" href="PrImp.html#BEq"><span class="id" type="constructor">BEq</span></a> <span class="id" type="var">a1</span> <span class="id" type="var">a2</span><br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#BLe"><span class="id" type="constructor">BLe</span></a> <span class="id" type="var">a1</span> <span class="id" type="var">a2</span>   =&gt; <a class="idref" href="PrImp.html#BLe"><span class="id" type="constructor">BLe</span></a> <span class="id" type="var">a1</span> <span class="id" type="var">a2</span><br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#BNot"><span class="id" type="constructor">BNot</span></a> <span class="id" type="var">b1</span>     =&gt; <a class="idref" href="PrImp.html#BNot"><span class="id" type="constructor">BNot</span></a> (<a class="idref" href="VPHL.html#bexp_sub_b"><span class="id" type="definition">bexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="var">b1</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b1</span> <span class="id" type="var">b2</span>  =&gt; <a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> (<a class="idref" href="VPHL.html#bexp_sub_b"><span class="id" type="definition">bexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="var">b1</span>) (<a class="idref" href="VPHL.html#bexp_sub_b"><span class="id" type="definition">bexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="var">b2</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="hexp_sub_b"><span class="id" type="definition">hexp_sub_b</span></a> <span class="id" type="var">y</span> <span class="id" type="var">b</span> <span class="id" type="var">hx</span> {<span class="id" type="keyword">struct</span> <span class="id" type="var">hx</span>} : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> := <br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="VPHL.html#hx"><span class="id" type="variable">hx</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <span class="id" type="var">b'</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="VPHL.html#bexp_sub_b"><span class="id" type="definition">bexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="var">b'</span>) <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> <span class="id" type="var">b'</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> (<a class="idref" href="VPHL.html#bexp_sub_b"><span class="id" type="definition">bexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="var">b'</span>) <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> <span class="id" type="var">b'</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> (<a class="idref" href="VPHL.html#bexp_sub_b"><span class="id" type="definition">bexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="var">b'</span>) <span class="id" type="var">p</span> <br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <span class="id" type="var">h1</span> <span class="id" type="var">h2</span> =&gt; <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#hexp_sub_b"><span class="id" type="definition">hexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="var">h1</span>) (<a class="idref" href="VPHL.html#hexp_sub_b"><span class="id" type="definition">hexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="var">h2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> <span class="id" type="var">h1</span> <span class="id" type="var">h2</span> =&gt; <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#hexp_sub_b"><span class="id" type="definition">hexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="var">h1</span>) (<a class="idref" href="VPHL.html#hexp_sub_b"><span class="id" type="definition">hexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="var">h2</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="b_sub_eq_b"><span class="id" type="lemma">b_sub_eq_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span> <span class="id" type="var">b</span> <span class="id" type="var">bx</span> <span class="id" type="var">st</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> (<a class="idref" href="VPHL.html#bexp_sub_b"><span class="id" type="definition">bexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#bx"><span class="id" type="variable">bx</span></a>) <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <a class="idref" href="VPHL.html#bx"><span class="id" type="variable">bx</span></a> (<a class="idref" href="SfLib.html#update_b"><span class="id" type="definition">update_b</span></a> <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> (<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a>)).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">bx</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">destruct</span> (<a class="idref" href="SfLib.html#beq_bid"><span class="id" type="definition">beq_bid</span></a> <span class="id" type="var">y</span> <span class="id" type="var">b0</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="PrImp.html#update_non_interference"><span class="id" type="lemma">update_non_interference</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="PrImp.html#update_non_interference"><span class="id" type="lemma">update_non_interference</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHbx</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHbx1</span>, <span class="id" type="var">IHbx2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="pr_sub_b"><span class="id" type="lemma">pr_sub_b</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span> <span class="id" type="var">b</span> <span class="id" type="var">bx</span> <span class="id" type="var">dst</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#bexp_sub_b"><span class="id" type="definition">bexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#bx"><span class="id" type="variable">bx</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#bx"><span class="id" type="variable">bx</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#b_sub_eq_b"><span class="id" type="lemma">b_sub_eq_b</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHdst1</span>, <span class="id" type="var">IHdst2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="h_sub_eq_b"><span class="id" type="lemma">h_sub_eq_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span> <span class="id" type="var">b</span> <span class="id" type="var">hx</span> <span class="id" type="var">dst</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> (<a class="idref" href="VPHL.html#hexp_sub_b"><span class="id" type="definition">hexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#hx"><span class="id" type="variable">hx</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> (<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>) <a class="idref" href="VPHL.html#hx"><span class="id" type="variable">hx</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">hx</span>.<br/>
&nbsp;&nbsp;+  <span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#b_sub_eq_b"><span class="id" type="lemma">b_sub_eq_b</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="VPHL.html#pr_sub_b"><span class="id" type="lemma">pr_sub_b</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+  <span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#b_sub_eq_b"><span class="id" type="lemma">b_sub_eq_b</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="VPHL.html#pr_sub_b"><span class="id" type="lemma">pr_sub_b</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+  <span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#b_sub_eq_b"><span class="id" type="lemma">b_sub_eq_b</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="VPHL.html#pr_sub_b"><span class="id" type="lemma">pr_sub_b</span></a>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHhx1</span>, <span class="id" type="var">IHhx2</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHhx1</span>, <span class="id" type="var">IHhx2</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab31"></a><h2 class="section">The Hoare Boolean Assignment Rule</h2>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_asgn_b"><span class="id" type="lemma">hoare_asgn_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">Q</span> <span class="id" type="var">y</span> <span class="id" type="var">b</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#hexp_sub_b"><span class="id" type="definition">hexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">(</span></a><a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::x_':=='_x"><span class="id" type="notation">:==</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">)</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">Q</span> <span class="id" type="var">y</span> <span class="id" type="var">b</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#bassign_equiv"><span class="id" type="lemma">bassign_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#h_sub_eq_b"><span class="id" type="lemma">h_sub_eq_b</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The Related Equivalence Rule 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="update_equiv_b"><span class="id" type="lemma">update_equiv_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">y</span> <span class="id" type="var">b</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> (<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>) (<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#dst_equiv_iff"><span class="id" type="lemma">dst_equiv_iff</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv_hexp"><span class="id" type="definition">dst_equiv_hexp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="VPHL.html#h_sub_eq_b"><span class="id" type="lemma">h_sub_eq_b</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
<a name="lab32"></a><h1 class="section">Hoare Toss</h1>

<div class="paragraph"> </div>

<a name="lab33"></a><h2 class="section">Hoare Toss Preliminaries: X-freeness</h2>


<div class="paragraph"> </div>

    Let's introduce the idea of X-freeness - a given variable appears nowhere 
    in our Hoare Assertions  
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Inductive</span> <a name="ax_id_free"><span class="id" type="inductive">ax_id_free</span></a>: <a class="idref" href="PrImp.html#aexp"><span class="id" type="inductive">aexp</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="SfLib.html#aid"><span class="id" type="inductive">aid</span></a> <span style="font-family: arial;">&rarr;</span> <span class="id" type="keyword">Prop</span> := <br/>
&nbsp;&nbsp;| <a name="Af_num"><span class="id" type="constructor">Af_num</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">n</span> <span class="id" type="var">x</span>, <a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> (<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> <a class="idref" href="VPHL.html#n"><span class="id" type="variable">n</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Af_id"><span class="id" type="constructor">Af_id</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">x'</span> <span class="id" type="var">x</span>, <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a><a class="idref" href="VPHL.html#x'"><span class="id" type="variable">x'</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> (<a class="idref" href="PrImp.html#AId"><span class="id" type="constructor">AId</span></a> <a class="idref" href="VPHL.html#x'"><span class="id" type="variable">x'</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Af_plus"><span class="id" type="constructor">Af_plus</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">a1</span> <span class="id" type="var">a2</span> <span class="id" type="var">x</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> <a class="idref" href="VPHL.html#a1"><span class="id" type="variable">a1</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> <a class="idref" href="VPHL.html#a2"><span class="id" type="variable">a2</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> (<a class="idref" href="PrImp.html#APlus"><span class="id" type="constructor">APlus</span></a> <a class="idref" href="VPHL.html#a1"><span class="id" type="variable">a1</span></a> <a class="idref" href="VPHL.html#a2"><span class="id" type="variable">a2</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Af_minus"><span class="id" type="constructor">Af_minus</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">a1</span> <span class="id" type="var">a2</span> <span class="id" type="var">x</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> <a class="idref" href="VPHL.html#a1"><span class="id" type="variable">a1</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> <a class="idref" href="VPHL.html#a2"><span class="id" type="variable">a2</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> (<a class="idref" href="PrImp.html#AMinus"><span class="id" type="constructor">AMinus</span></a> <a class="idref" href="VPHL.html#a1"><span class="id" type="variable">a1</span></a> <a class="idref" href="VPHL.html#a2"><span class="id" type="variable">a2</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Af_mult"><span class="id" type="constructor">Af_mult</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">a1</span> <span class="id" type="var">a2</span> <span class="id" type="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> <a class="idref" href="VPHL.html#a1"><span class="id" type="variable">a1</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> <a class="idref" href="VPHL.html#a2"><span class="id" type="variable">a2</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> (<a class="idref" href="PrImp.html#AMult"><span class="id" type="constructor">AMult</span></a> <a class="idref" href="VPHL.html#a1"><span class="id" type="variable">a1</span></a> <a class="idref" href="VPHL.html#a2"><span class="id" type="variable">a2</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a>.<br/>

<br/>
<span class="id" type="keyword">Inductive</span> <a name="bx_id_free"><span class="id" type="inductive">bx_id_free</span></a>: <a class="idref" href="PrImp.html#bexp"><span class="id" type="inductive">bexp</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="SfLib.html#aid"><span class="id" type="inductive">aid</span></a> <span style="font-family: arial;">&rarr;</span> <span class="id" type="keyword">Prop</span> := <br/>
&nbsp;&nbsp;| <a name="Bf_true"><span class="id" type="constructor">Bf_true</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">x</span>, <a class="idref" href="VPHL.html#bx_id_free"><span class="id" type="inductive">bx_id_free</span></a> <a class="idref" href="PrImp.html#BTrue"><span class="id" type="constructor">BTrue</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Bf_false"><span class="id" type="constructor">Bf_false</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">x</span>, <a class="idref" href="VPHL.html#bx_id_free"><span class="id" type="inductive">bx_id_free</span></a> <a class="idref" href="PrImp.html#BFalse"><span class="id" type="constructor">BFalse</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Bf_id"><span class="id" type="constructor">Bf_id</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span> <span class="id" type="var">x</span>, <a class="idref" href="VPHL.html#bx_id_free"><span class="id" type="inductive">bx_id_free</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Bf_eq"><span class="id" type="constructor">Bf_eq</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">a1</span> <span class="id" type="var">a2</span> <span class="id" type="var">x</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> <a class="idref" href="VPHL.html#a1"><span class="id" type="variable">a1</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> <a class="idref" href="VPHL.html#a2"><span class="id" type="variable">a2</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#bx_id_free"><span class="id" type="inductive">bx_id_free</span></a> (<a class="idref" href="PrImp.html#BEq"><span class="id" type="constructor">BEq</span></a> <a class="idref" href="VPHL.html#a1"><span class="id" type="variable">a1</span></a> <a class="idref" href="VPHL.html#a2"><span class="id" type="variable">a2</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Bf_le"><span class="id" type="constructor">Bf_le</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">a1</span> <span class="id" type="var">a2</span> <span class="id" type="var">x</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> <a class="idref" href="VPHL.html#a1"><span class="id" type="variable">a1</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> <a class="idref" href="VPHL.html#a2"><span class="id" type="variable">a2</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#bx_id_free"><span class="id" type="inductive">bx_id_free</span></a> (<a class="idref" href="PrImp.html#BLe"><span class="id" type="constructor">BLe</span></a> <a class="idref" href="VPHL.html#a1"><span class="id" type="variable">a1</span></a> <a class="idref" href="VPHL.html#a2"><span class="id" type="variable">a2</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Bf_not"><span class="id" type="constructor">Bf_not</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span> <span class="id" type="var">x</span>, <a class="idref" href="VPHL.html#bx_id_free"><span class="id" type="inductive">bx_id_free</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#bx_id_free"><span class="id" type="inductive">bx_id_free</span></a> (<a class="idref" href="PrImp.html#BNot"><span class="id" type="constructor">BNot</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Bf_and"><span class="id" type="constructor">Bf_and</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b1</span> <span class="id" type="var">b2</span> <span class="id" type="var">x</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#bx_id_free"><span class="id" type="inductive">bx_id_free</span></a> <a class="idref" href="VPHL.html#b1"><span class="id" type="variable">b1</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#bx_id_free"><span class="id" type="inductive">bx_id_free</span></a> <a class="idref" href="VPHL.html#b2"><span class="id" type="variable">b2</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#bx_id_free"><span class="id" type="inductive">bx_id_free</span></a> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <a class="idref" href="VPHL.html#b1"><span class="id" type="variable">b1</span></a> <a class="idref" href="VPHL.html#b2"><span class="id" type="variable">b2</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a>.<br/>

<br/>
<span class="id" type="keyword">Inductive</span> <a name="hx_id_free"><span class="id" type="inductive">hx_id_free</span></a>: <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="SfLib.html#aid"><span class="id" type="inductive">aid</span></a> <span style="font-family: arial;">&rarr;</span> <span class="id" type="keyword">Prop</span> := <br/>
&nbsp;&nbsp;| <a name="Hf_eq"><span class="id" type="constructor">Hf_eq</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">x</span>, <a class="idref" href="VPHL.html#bx_id_free"><span class="id" type="inductive">bx_id_free</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hx_id_free"><span class="id" type="inductive">hx_id_free</span></a> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Hf_lt"><span class="id" type="constructor">Hf_lt</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">x</span>, <a class="idref" href="VPHL.html#bx_id_free"><span class="id" type="inductive">bx_id_free</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hx_id_free"><span class="id" type="inductive">hx_id_free</span></a> (<a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Hf_gt"><span class="id" type="constructor">Hf_gt</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">x</span>, <a class="idref" href="VPHL.html#bx_id_free"><span class="id" type="inductive">bx_id_free</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hx_id_free"><span class="id" type="inductive">hx_id_free</span></a> (<a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Hf_and"><span class="id" type="constructor">Hf_and</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">h1</span> <span class="id" type="var">h2</span> <span class="id" type="var">x</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#hx_id_free"><span class="id" type="inductive">hx_id_free</span></a> <a class="idref" href="VPHL.html#h1"><span class="id" type="variable">h1</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hx_id_free"><span class="id" type="inductive">hx_id_free</span></a> <a class="idref" href="VPHL.html#h2"><span class="id" type="variable">h2</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hx_id_free"><span class="id" type="inductive">hx_id_free</span></a> (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#h1"><span class="id" type="variable">h1</span></a> <a class="idref" href="VPHL.html#h2"><span class="id" type="variable">h2</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Hf_or"><span class="id" type="constructor">Hf_or</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">h1</span> <span class="id" type="var">h2</span> <span class="id" type="var">x</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#hx_id_free"><span class="id" type="inductive">hx_id_free</span></a> <a class="idref" href="VPHL.html#h1"><span class="id" type="variable">h1</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hx_id_free"><span class="id" type="inductive">hx_id_free</span></a> <a class="idref" href="VPHL.html#h2"><span class="id" type="variable">h2</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hx_id_free"><span class="id" type="inductive">hx_id_free</span></a> (<a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> <a class="idref" href="VPHL.html#h1"><span class="id" type="variable">h1</span></a> <a class="idref" href="VPHL.html#h2"><span class="id" type="variable">h2</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a>.<br/>

<br/>
</div>

<div class="doc">
This wind up being a useful weaker notion of freeness that allows us to use
   earlier results relating to variable substitution. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="free"><span class="id" type="definition">free</span></a> (<span class="id" type="var">Q</span> : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a>) (<span class="id" type="var">x</span> : <a class="idref" href="SfLib.html#aid"><span class="id" type="inductive">aid</span></a>) : <span class="id" type="keyword">Prop</span> := <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">a</span>, <a class="idref" href="VPHL.html#hexp_sub"><span class="id" type="definition">hexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a>.<br/>

<br/>
</div>

<div class="doc">
We need to show that the weaker form follows from the stronger one. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="a_free_eq"><span class="id" type="lemma">a_free_eq</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">a</span> <span class="id" type="var">x</span> <span class="id" type="var">ax</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> <a class="idref" href="VPHL.html#ax"><span class="id" type="variable">ax</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#aexp_sub"><span class="id" type="definition">aexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <a class="idref" href="VPHL.html#ax"><span class="id" type="variable">ax</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#ax"><span class="id" type="variable">ax</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_aid_false_iff"><span class="id" type="lemma">beq_aid_false_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHax_id_free1</span>, <span class="id" type="var">IHax_id_free2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHax_id_free1</span>, <span class="id" type="var">IHax_id_free2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHax_id_free1</span>, <span class="id" type="var">IHax_id_free2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="b_free_eq"><span class="id" type="lemma">b_free_eq</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">a</span> <span class="id" type="var">x</span> <span class="id" type="var">bx</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#bx_id_free"><span class="id" type="inductive">bx_id_free</span></a> <a class="idref" href="VPHL.html#bx"><span class="id" type="variable">bx</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#bexp_sub"><span class="id" type="definition">bexp_sub</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <a class="idref" href="VPHL.html#bx"><span class="id" type="variable">bx</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#bx"><span class="id" type="variable">bx</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#a_free_eq"><span class="id" type="lemma">a_free_eq</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#a_free_eq"><span class="id" type="lemma">a_free_eq</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>, <span class="id" type="var">H0</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#a_free_eq"><span class="id" type="lemma">a_free_eq</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#a_free_eq"><span class="id" type="lemma">a_free_eq</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>, <span class="id" type="var">H0</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHbx_id_free</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHbx_id_free1</span>, <span class="id" type="var">IHbx_id_free2</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
These two implication of the above will prove useful shortly. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="a_free_imp"><span class="id" type="lemma">a_free_imp</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">a</span> <span class="id" type="var">x</span> <span class="id" type="var">st</span> <span class="id" type="var">n</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#aeval"><span class="id" type="definition">aeval</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> (<a class="idref" href="SfLib.html#update"><span class="id" type="definition">update</span></a> <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#n"><span class="id" type="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="PrImp.html#aeval"><span class="id" type="definition">aeval</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#a_free_eq"><span class="id" type="lemma">a_free_eq</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">a</span>:=<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> <span class="id" type="var">n</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">replace</span> <span class="id" type="var">n</span> <span class="id" type="keyword">with</span> (<a class="idref" href="PrImp.html#aeval"><span class="id" type="definition">aeval</span></a> (<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> <span class="id" type="var">n</span>) <span class="id" type="var">st</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#a_sub_eq"><span class="id" type="lemma">a_sub_eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="b_free_imp"><span class="id" type="lemma">b_free_imp</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span> <span class="id" type="var">x</span> <span class="id" type="var">st</span> <span class="id" type="var">n</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#bx_id_free"><span class="id" type="inductive">bx_id_free</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> (<a class="idref" href="SfLib.html#update"><span class="id" type="definition">update</span></a> <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#n"><span class="id" type="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#b_free_eq"><span class="id" type="lemma">b_free_eq</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">a</span>:=<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> <span class="id" type="var">n</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">replace</span> <span class="id" type="var">n</span> <span class="id" type="keyword">with</span> (<a class="idref" href="PrImp.html#aeval"><span class="id" type="definition">aeval</span></a> (<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> <span class="id" type="var">n</span>) <span class="id" type="var">st</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#b_sub_eq"><span class="id" type="lemma">b_sub_eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="free_eq"><span class="id" type="lemma">free_eq</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">Q</span> <span class="id" type="var">x</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#hx_id_free"><span class="id" type="inductive">hx_id_free</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#free"><span class="id" type="definition">free</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#free"><span class="id" type="definition">free</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#b_free_eq"><span class="id" type="lemma">b_free_eq</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#b_free_eq"><span class="id" type="lemma">b_free_eq</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#b_free_eq"><span class="id" type="lemma">b_free_eq</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHhx_id_free1</span>, <span class="id" type="var">IHhx_id_free2</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHhx_id_free1</span>, <span class="id" type="var">IHhx_id_free2</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A simple consequence of freeness and the hoare_assignment rule : 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="hoare_asgn_free"><span class="id" type="lemma">hoare_asgn_free</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">Q</span> <span class="id" type="var">x</span> <span class="id" type="var">a</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#free"><span class="id" type="definition">free</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">(</span></a><a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="PrImp.html#::x_'::='_x"><span class="id" type="notation">::=</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">)</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">Q</span> <span class="id" type="var">x</span> <span class="id" type="var">a</span> <span class="id" type="var">freeQ</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#assign_equiv"><span class="id" type="lemma">assign_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#h_sub_eq"><span class="id" type="lemma">h_sub_eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#free"><span class="id" type="definition">free</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">freeQ</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">freeQ</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Conditionals allow us to insert boolean expressions throughout our assertions 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="bicondition01"><span class="id" type="definition">bicondition01</span></a> (<span class="id" type="var">hx</span>:<a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a>) (<span class="id" type="var">x</span>:<a class="idref" href="SfLib.html#aid"><span class="id" type="inductive">aid</span></a>) (<span class="id" type="var">p</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#R"><span class="id" type="axiom">R</span></a>) : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="VPHL.html#hx"><span class="id" type="variable">hx</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p'</span>   =&gt;  <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b</span> (<a class="idref" href="PrImp.html#BEq"><span class="id" type="constructor">BEq</span></a> (<a class="idref" href="PrImp.html#AId"><span class="id" type="constructor">AId</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a>) (<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> 1%<span class="id" type="var">nat</span>))) (<a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">p'</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b</span> (<a class="idref" href="PrImp.html#BEq"><span class="id" type="constructor">BEq</span></a> (<a class="idref" href="PrImp.html#AId"><span class="id" type="constructor">AId</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a>) (<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> 0%<span class="id" type="var">nat</span>))) (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)*</span></a><span class="id" type="var">p'</span>))<br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p'</span>   =&gt;  <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b</span> (<a class="idref" href="PrImp.html#BEq"><span class="id" type="constructor">BEq</span></a> (<a class="idref" href="PrImp.html#AId"><span class="id" type="constructor">AId</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a>) (<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> 1%<span class="id" type="var">nat</span>))) (<a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">p'</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b</span> (<a class="idref" href="PrImp.html#BEq"><span class="id" type="constructor">BEq</span></a> (<a class="idref" href="PrImp.html#AId"><span class="id" type="constructor">AId</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a>) (<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> 0%<span class="id" type="var">nat</span>))) (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)*</span></a><span class="id" type="var">p'</span>))<br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p'</span>   =&gt;  <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b</span> (<a class="idref" href="PrImp.html#BEq"><span class="id" type="constructor">BEq</span></a> (<a class="idref" href="PrImp.html#AId"><span class="id" type="constructor">AId</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a>) (<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> 1%<span class="id" type="var">nat</span>))) (<a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">p'</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b</span> (<a class="idref" href="PrImp.html#BEq"><span class="id" type="constructor">BEq</span></a> (<a class="idref" href="PrImp.html#AId"><span class="id" type="constructor">AId</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a>) (<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> 0%<span class="id" type="var">nat</span>))) (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)*</span></a><span class="id" type="var">p'</span>))<br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span> =&gt; <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#bicondition01"><span class="id" type="definition">bicondition01</span></a> <span class="id" type="var">P1</span> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) (<a class="idref" href="VPHL.html#bicondition01"><span class="id" type="definition">bicondition01</span></a> <span class="id" type="var">P2</span> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span>  =&gt; <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#bicondition01"><span class="id" type="definition">bicondition01</span></a> <span class="id" type="var">P1</span> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) (<a class="idref" href="VPHL.html#bicondition01"><span class="id" type="definition">bicondition01</span></a> <span class="id" type="var">P2</span> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)<br/>
<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Independence rules for tossing a free variable 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="prob_update_1"><span class="id" type="lemma">prob_update_1</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst</span> <span class="id" type="var">x</span> <span class="id" type="var">b</span> <span class="id" type="var">r</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#bx_id_free"><span class="id" type="inductive">bx_id_free</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> (<a class="idref" href="PrImp.html#BEq"><span class="id" type="constructor">BEq</span></a> (<a class="idref" href="PrImp.html#AId"><span class="id" type="constructor">AId</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a>) (<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> 1)) <span class="id" type="keyword">in</span> <a class="idref" href="PrImp.html#prob_update"><span class="id" type="definition">prob_update</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#b_free_eq"><span class="id" type="lemma">b_free_eq</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">a</span> := <a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> 1) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">replace</span> 1%<span class="id" type="var">nat</span> <span class="id" type="keyword">with</span> (<a class="idref" href="PrImp.html#aeval"><span class="id" type="definition">aeval</span></a> (<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> 1%<span class="id" type="var">nat</span>) <span class="id" type="var">t</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#b_sub_eq"><span class="id" type="lemma">b_sub_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="SfLib.html#beq_aid_refl"><span class="id" type="lemma">beq_aid_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.EqNat.html#beq_nat_refl"><span class="id" type="lemma">beq_nat_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Bool.Bool.html#andb_true_r"><span class="id" type="lemma">andb_true_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Bool.Bool.html#andb_false_r"><span class="id" type="lemma">andb_false_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">erewrite</span> <span class="id" type="var">IHdst1</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">erewrite</span> <span class="id" type="var">IHdst2</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:=<span class="id" type="var">p0</span>) (<span class="id" type="var">r2</span>:=<span class="id" type="var">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:=(1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p0</span>)) (<span class="id" type="var">r2</span>:=<span class="id" type="var">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="prob_update_0"><span class="id" type="lemma">prob_update_0</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst</span> <span class="id" type="var">x</span> <span class="id" type="var">b</span> <span class="id" type="var">r</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#bx_id_free"><span class="id" type="inductive">bx_id_free</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> (<a class="idref" href="PrImp.html#BEq"><span class="id" type="constructor">BEq</span></a> (<a class="idref" href="PrImp.html#AId"><span class="id" type="constructor">AId</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a>) (<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> 0)) <span class="id" type="keyword">in</span> <a class="idref" href="PrImp.html#prob_update"><span class="id" type="definition">prob_update</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#b_free_eq"><span class="id" type="lemma">b_free_eq</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">a</span> := <a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> 0) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">replace</span> 0%<span class="id" type="var">nat</span> <span class="id" type="keyword">with</span> (<a class="idref" href="PrImp.html#aeval"><span class="id" type="definition">aeval</span></a> (<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> 0%<span class="id" type="var">nat</span>) <span class="id" type="var">t</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#b_sub_eq"><span class="id" type="lemma">b_sub_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="SfLib.html#beq_aid_refl"><span class="id" type="lemma">beq_aid_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Arith.EqNat.html#beq_nat_refl"><span class="id" type="lemma">beq_nat_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Bool.Bool.html#andb_true_r"><span class="id" type="lemma">andb_true_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Bool.Bool.html#andb_false_r"><span class="id" type="lemma">andb_false_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">erewrite</span> <span class="id" type="var">IHdst1</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">erewrite</span> <span class="id" type="var">IHdst2</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:=<span class="id" type="var">p0</span>) (<span class="id" type="var">r2</span>:=(1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:=(1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p0</span>)) (<span class="id" type="var">r2</span>:=(1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab34"></a><h2 class="section">The Hoare Toss Rule</h2>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_toss"><span class="id" type="lemma">hoare_toss</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">Q</span> <span class="id" type="var">x</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>, <a class="idref" href="VPHL.html#hx_id_free"><span class="id" type="inductive">hx_id_free</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="PrImp.html#::x_'$=('_x_','_x_')'"><span class="id" type="notation">$=(</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="PrImp.html#::x_'$=('_x_','_x_')'"><span class="id" type="notation">,</span></a><a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a><a class="idref" href="PrImp.html#::x_'$=('_x_','_x_')'"><span class="id" type="notation">)</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#bicondition01"><span class="id" type="definition">bicondition01</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">Q</span> <span class="id" type="var">x</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">hfQ</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#toss_equiv"><span class="id" type="lemma">toss_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#prob_update_0"><span class="id" type="lemma">prob_update_0</span></a> <span class="id" type="var">dst</span> <span class="id" type="var">x</span>). <span class="id" type="tactic">intros</span> <span class="id" type="var">pu0</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#prob_update_1"><span class="id" type="lemma">prob_update_1</span></a> <span class="id" type="var">dst</span> <span class="id" type="var">x</span>). <span class="id" type="tactic">intros</span> <span class="id" type="var">pu1</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">Q</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">hfQ</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">pu0</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span>)); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">pu1</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span>)); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">hfQ</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">pu0</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span>)); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">pu1</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span>)); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_lt_compat_l"><span class="id" type="axiom">Rmult_lt_compat_l</span></a>; <span class="id" type="tactic">trivial</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">hfQ</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">pu0</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span>)); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">pu1</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span>)); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_gt_compat_l"><span class="id" type="lemma">Rmult_gt_compat_l</span></a>; <span class="id" type="tactic">trivial</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">hfQ</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHQ1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHQ2</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">hfQ</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">left</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">IHQ1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">right</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">IHQ2</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab35"></a><h1 class="section">BToss</h1>

<div class="paragraph"> </div>

 This follows the same structure as above - though the boolean coin toss 
    operation is the important one in this case. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Inductive</span> <a name="bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a>: <a class="idref" href="PrImp.html#bexp"><span class="id" type="inductive">bexp</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="SfLib.html#bid"><span class="id" type="inductive">bid</span></a> <span style="font-family: arial;">&rarr;</span> <span class="id" type="keyword">Prop</span> := <br/>
&nbsp;&nbsp;| <a name="Bf_true_b"><span class="id" type="constructor">Bf_true_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> <a class="idref" href="PrImp.html#BTrue"><span class="id" type="constructor">BTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Bf_false_b"><span class="id" type="constructor">Bf_false_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> <a class="idref" href="PrImp.html#BFalse"><span class="id" type="constructor">BFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Bf_id_b"><span class="id" type="constructor">Bf_id_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y'</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a><a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>  <br/>
&nbsp;&nbsp;| <a name="Bf_eq_b"><span class="id" type="constructor">Bf_eq_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">a1</span> <span class="id" type="var">a2</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> (<a class="idref" href="PrImp.html#BEq"><span class="id" type="constructor">BEq</span></a> <a class="idref" href="VPHL.html#a1"><span class="id" type="variable">a1</span></a> <a class="idref" href="VPHL.html#a2"><span class="id" type="variable">a2</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Bf_le_b"><span class="id" type="constructor">Bf_le_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">a1</span> <span class="id" type="var">a2</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> (<a class="idref" href="PrImp.html#BLe"><span class="id" type="constructor">BLe</span></a> <a class="idref" href="VPHL.html#a1"><span class="id" type="variable">a1</span></a> <a class="idref" href="VPHL.html#a2"><span class="id" type="variable">a2</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Bf_not_b"><span class="id" type="constructor">Bf_not_b</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> (<a class="idref" href="PrImp.html#BNot"><span class="id" type="constructor">BNot</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Bf_and_b"><span class="id" type="constructor">Bf_and_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b1</span> <span class="id" type="var">b2</span> <span class="id" type="var">y</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> <a class="idref" href="VPHL.html#b1"><span class="id" type="variable">b1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> <a class="idref" href="VPHL.html#b2"><span class="id" type="variable">b2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <a class="idref" href="VPHL.html#b1"><span class="id" type="variable">b1</span></a> <a class="idref" href="VPHL.html#b2"><span class="id" type="variable">b2</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>.<br/>

<br/>
<span class="id" type="keyword">Inductive</span> <a name="hx_bid_free"><span class="id" type="inductive">hx_bid_free</span></a>: <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="SfLib.html#bid"><span class="id" type="inductive">bid</span></a> <span style="font-family: arial;">&rarr;</span> <span class="id" type="keyword">Prop</span> := <br/>
&nbsp;&nbsp;| <a name="Hf_eq_b"><span class="id" type="constructor">Hf_eq_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hx_bid_free"><span class="id" type="inductive">hx_bid_free</span></a> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Hf_lt_b"><span class="id" type="constructor">Hf_lt_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hx_bid_free"><span class="id" type="inductive">hx_bid_free</span></a> (<a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Hf_gt_b"><span class="id" type="constructor">Hf_gt_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hx_bid_free"><span class="id" type="inductive">hx_bid_free</span></a> (<a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Hf_and_b"><span class="id" type="constructor">Hf_and_b</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">h1</span> <span class="id" type="var">h2</span> <span class="id" type="var">y</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#hx_bid_free"><span class="id" type="inductive">hx_bid_free</span></a> <a class="idref" href="VPHL.html#h1"><span class="id" type="variable">h1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hx_bid_free"><span class="id" type="inductive">hx_bid_free</span></a> <a class="idref" href="VPHL.html#h2"><span class="id" type="variable">h2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hx_bid_free"><span class="id" type="inductive">hx_bid_free</span></a> (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#h1"><span class="id" type="variable">h1</span></a> <a class="idref" href="VPHL.html#h2"><span class="id" type="variable">h2</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Hf_or_b"><span class="id" type="constructor">Hf_or_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">h1</span> <span class="id" type="var">h2</span> <span class="id" type="var">y</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#hx_bid_free"><span class="id" type="inductive">hx_bid_free</span></a> <a class="idref" href="VPHL.html#h1"><span class="id" type="variable">h1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hx_bid_free"><span class="id" type="inductive">hx_bid_free</span></a> <a class="idref" href="VPHL.html#h2"><span class="id" type="variable">h2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#hx_bid_free"><span class="id" type="inductive">hx_bid_free</span></a> (<a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> <a class="idref" href="VPHL.html#h1"><span class="id" type="variable">h1</span></a> <a class="idref" href="VPHL.html#h2"><span class="id" type="variable">h2</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="free_b"><span class="id" type="definition">free_b</span></a> (<span class="id" type="var">Q</span> : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a>) (<span class="id" type="var">y</span> : <a class="idref" href="SfLib.html#bid"><span class="id" type="inductive">bid</span></a>) : <span class="id" type="keyword">Prop</span> := <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span>, <a class="idref" href="VPHL.html#hexp_sub_b"><span class="id" type="definition">hexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="b_free_eq_b"><span class="id" type="lemma">b_free_eq_b</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span> <span class="id" type="var">b</span> <span class="id" type="var">bx</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> <a class="idref" href="VPHL.html#bx"><span class="id" type="variable">bx</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#bexp_sub_b"><span class="id" type="definition">bexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#bx"><span class="id" type="variable">bx</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#bx"><span class="id" type="variable">bx</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_bid_false_iff"><span class="id" type="lemma">beq_bid_false_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHbx_bid_free</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHbx_bid_free1</span>, <span class="id" type="var">IHbx_bid_free2</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="b_free_imp_b"><span class="id" type="lemma">b_free_imp_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">bx</span> <span class="id" type="var">y</span> <span class="id" type="var">st</span> <span class="id" type="var">b</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> <a class="idref" href="VPHL.html#bx"><span class="id" type="variable">bx</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <a class="idref" href="VPHL.html#bx"><span class="id" type="variable">bx</span></a> (<a class="idref" href="SfLib.html#update_b"><span class="id" type="definition">update_b</span></a> <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <a class="idref" href="VPHL.html#bx"><span class="id" type="variable">bx</span></a> <a class="idref" href="VPHL.html#st"><span class="id" type="variable">st</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_bid_false_iff"><span class="id" type="lemma">beq_bid_false_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="PrImp.html#update_non_interference"><span class="id" type="lemma">update_non_interference</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="PrImp.html#update_non_interference"><span class="id" type="lemma">update_non_interference</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHbx_bid_free</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHbx_bid_free1</span>, <span class="id" type="var">IHbx_bid_free2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="free_eq_b"><span class="id" type="lemma">free_eq_b</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">Q</span> <span class="id" type="var">x</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#hx_bid_free"><span class="id" type="inductive">hx_bid_free</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#free_b"><span class="id" type="definition">free_b</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#free_b"><span class="id" type="definition">free_b</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#b_free_eq_b"><span class="id" type="lemma">b_free_eq_b</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#b_free_eq_b"><span class="id" type="lemma">b_free_eq_b</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#b_free_eq_b"><span class="id" type="lemma">b_free_eq_b</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHhx_bid_free1</span>, <span class="id" type="var">IHhx_bid_free2</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHhx_bid_free1</span>, <span class="id" type="var">IHhx_bid_free2</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="hoare_asgn_free_b"><span class="id" type="lemma">hoare_asgn_free_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">Q</span> <span class="id" type="var">y</span> <span class="id" type="var">b</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#free_b"><span class="id" type="definition">free_b</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">(</span></a><a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::x_':=='_x"><span class="id" type="notation">:==</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">)</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">Q</span> <span class="id" type="var">y</span> <span class="id" type="var">b</span> <span class="id" type="var">frQ</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#bassign_equiv"><span class="id" type="lemma">bassign_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#h_sub_eq_b"><span class="id" type="lemma">h_sub_eq_b</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#free_b"><span class="id" type="definition">free_b</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">frQ</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">frQ</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="bicondition_b"><span class="id" type="definition">bicondition_b</span></a> (<span class="id" type="var">hx</span>:<a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a>) (<span class="id" type="var">y</span>:<a class="idref" href="SfLib.html#bid"><span class="id" type="inductive">bid</span></a>) (<span class="id" type="var">p</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#R"><span class="id" type="axiom">R</span></a>) : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="VPHL.html#hx"><span class="id" type="variable">hx</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p'</span>   =&gt;  <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b</span> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)) (<a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">p'</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b</span> (<a class="idref" href="PrImp.html#BNot"><span class="id" type="constructor">BNot</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>))) (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)*</span></a><span class="id" type="var">p'</span>))<br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p'</span>   =&gt;  <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b</span> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)) (<a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">p'</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b</span> (<a class="idref" href="PrImp.html#BNot"><span class="id" type="constructor">BNot</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>))) (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)*</span></a><span class="id" type="var">p'</span>))<br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p'</span>   =&gt;  <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b</span> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)) (<a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">p'</span>)) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b</span> (<a class="idref" href="PrImp.html#BNot"><span class="id" type="constructor">BNot</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>))) (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)*</span></a><span class="id" type="var">p'</span>))<br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span> =&gt; <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#bicondition_b"><span class="id" type="definition">bicondition_b</span></a> <span class="id" type="var">P1</span> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) (<a class="idref" href="VPHL.html#bicondition_b"><span class="id" type="definition">bicondition_b</span></a> <span class="id" type="var">P2</span> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span>  =&gt; <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#bicondition_b"><span class="id" type="definition">bicondition_b</span></a> <span class="id" type="var">P1</span> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) (<a class="idref" href="VPHL.html#bicondition_b"><span class="id" type="definition">bicondition_b</span></a> <span class="id" type="var">P2</span> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)<br/>
<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="prob_update_T"><span class="id" type="lemma">prob_update_T</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst</span> <span class="id" type="var">y</span> <span class="id" type="var">b</span> <span class="id" type="var">r</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <span class="id" type="keyword">in</span> <a class="idref" href="PrImp.html#prob_update_b"><span class="id" type="definition">prob_update_b</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#b_free_eq_b"><span class="id" type="lemma">b_free_eq_b</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">b</span> := <a class="idref" href="PrImp.html#BTrue"><span class="id" type="constructor">BTrue</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">replace</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#true"><span class="id" type="constructor">true</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <a class="idref" href="PrImp.html#BTrue"><span class="id" type="constructor">BTrue</span></a> <span class="id" type="var">t</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#b_sub_eq_b"><span class="id" type="lemma">b_sub_eq_b</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="SfLib.html#beq_bid_refl"><span class="id" type="lemma">beq_bid_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Bool.Bool.html#andb_true_r"><span class="id" type="lemma">andb_true_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Bool.Bool.html#andb_false_r"><span class="id" type="lemma">andb_false_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">erewrite</span> <span class="id" type="var">IHdst1</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">erewrite</span> <span class="id" type="var">IHdst2</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:=<span class="id" type="var">p0</span>) (<span class="id" type="var">r2</span>:=<span class="id" type="var">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:=(1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p0</span>)) (<span class="id" type="var">r2</span>:=<span class="id" type="var">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="prob_update_F"><span class="id" type="lemma">prob_update_F</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst</span> <span class="id" type="var">y</span> <span class="id" type="var">b</span> <span class="id" type="var">r</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> (<a class="idref" href="PrImp.html#BNot"><span class="id" type="constructor">BNot</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)) <span class="id" type="keyword">in</span> <a class="idref" href="PrImp.html#prob_update_b"><span class="id" type="definition">prob_update_b</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="VPHL.html#r"><span class="id" type="variable">r</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#b_free_eq_b"><span class="id" type="lemma">b_free_eq_b</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">b</span> := <a class="idref" href="PrImp.html#BFalse"><span class="id" type="constructor">BFalse</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">replace</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#false"><span class="id" type="constructor">false</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <a class="idref" href="PrImp.html#BFalse"><span class="id" type="constructor">BFalse</span></a> <span class="id" type="var">t</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#b_sub_eq_b"><span class="id" type="lemma">b_sub_eq_b</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="SfLib.html#beq_bid_refl"><span class="id" type="lemma">beq_bid_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Bool.Bool.html#andb_true_r"><span class="id" type="lemma">andb_true_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Bool.Bool.html#andb_false_r"><span class="id" type="lemma">andb_false_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">erewrite</span> <span class="id" type="var">IHdst1</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">erewrite</span> <span class="id" type="var">IHdst2</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:=<span class="id" type="var">p0</span>) (<span class="id" type="var">r2</span>:=(1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:=(1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p0</span>)) (<span class="id" type="var">r2</span>:=(1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab36"></a><h2 class="section">The Boolean Toss Hoare Rule</h2>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_toss_b"><span class="id" type="lemma">hoare_toss_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">Q</span> <span class="id" type="var">y</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>, <a class="idref" href="VPHL.html#hx_bid_free"><span class="id" type="inductive">hx_bid_free</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::x_'$=['_x_','_x_']'"><span class="id" type="notation">$=[</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="PrImp.html#::x_'$=['_x_','_x_']'"><span class="id" type="notation">,</span></a><a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a><a class="idref" href="PrImp.html#::x_'$=['_x_','_x_']'"><span class="id" type="notation">]</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#bicondition_b"><span class="id" type="definition">bicondition_b</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">Q</span> <span class="id" type="var">y</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">hfQ</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#btoss_equiv"><span class="id" type="lemma">btoss_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#prob_update_F"><span class="id" type="lemma">prob_update_F</span></a> <span class="id" type="var">dst</span> <span class="id" type="var">y</span>). <span class="id" type="tactic">intros</span> <span class="id" type="var">pu0</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#prob_update_T"><span class="id" type="lemma">prob_update_T</span></a> <span class="id" type="var">dst</span> <span class="id" type="var">y</span>). <span class="id" type="tactic">intros</span> <span class="id" type="var">pu1</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">Q</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">hfQ</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">pu0</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span>)); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">pu1</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span>)); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">hfQ</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">pu0</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span>)); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">pu1</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span>)); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_lt_compat_l"><span class="id" type="axiom">Rmult_lt_compat_l</span></a>; <span class="id" type="tactic">trivial</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">hfQ</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">pu0</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span>)); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">pu1</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span>)); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_gt_compat_l"><span class="id" type="lemma">Rmult_gt_compat_l</span></a>; <span class="id" type="tactic">trivial</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">hfQ</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHQ1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHQ2</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">hfQ</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">left</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">IHQ1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">right</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">IHQ2</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab37"></a><h1 class="section">If Statements</h1>

<div class="paragraph"> </div>

 The traditional Hoare If rule:

<div class="paragraph"> </div>

                  <a href="P /\  b">P /\  b</a> c1 <a href="Q">Q</a>
                  <a href="P /\ ~b">P /\ ~b</a> c2 <a href="Q">Q</a>
<hr/>
  (traditional hoare if)
          <a href="P">P</a> IF b THEN c1 ELSE c2 FI <a href="Q">Q</a> 

<div class="paragraph"> </div>

Our Deterministic If Rule

<div class="paragraph"> </div>

                  <a href="P /\  y">P /\  y</a> c1 <a href="Q">Q</a>
                  <a href="P /\ ~y">P /\ ~y</a> c2 <a href="Q">Q</a>
<hr/>
 (hoare_if_det)
     <a href="P /\ (y \/ ~y) ">P /\ (y \/ ~y) </a> IF y THEN c1 ELSE c2 FI <a href="Q">Q</a> 

<div class="paragraph"> </div>

Our Probabilistic If Rule

<div class="paragraph"> </div>

                            0  &lt; p &lt; 1
                         unassigned y c1 c2
                    <a href="1/p * P1">1/p * P1</a> c1 <a href="1/p * Q">1/p * Q</a>
                <a href="1/(1-p) * P2">1/(1-p) * P2</a> c2 <a href="1/(1-p) * Q">1/(1-p) * Q</a>
<hr/>
  (hoare_if_prob)
    <a href="Pr(y) = p /\ P /\ P2">Pr(y) = p /\ P /\ P2</a> IF y THEN c1 ELSE c2 FI <a href="Q1 /\ Q2">Q1 /\ Q2</a> 

<div class="paragraph"> </div>


<div class="paragraph"> </div>

 Conditioning on a given boolean expression.
    In practice, we care about that boolean being an identifier. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="condition"><span class="id" type="definition">condition</span></a> (<span class="id" type="var">hx</span>:<a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a>) (<span class="id" type="var">b'</span>:<a class="idref" href="PrImp.html#bexp"><span class="id" type="inductive">bexp</span></a>) : <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> :=   <br/>
<span class="id" type="keyword">match</span> <a class="idref" href="VPHL.html#hx"><span class="id" type="variable">hx</span></a> <span class="id" type="keyword">with</span> <br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span>     =&gt;  <a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b</span> <a class="idref" href="VPHL.html#b'"><span class="id" type="variable">b'</span></a>) <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span>     =&gt;  <a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b</span> <a class="idref" href="VPHL.html#b'"><span class="id" type="variable">b'</span></a>) <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span>     =&gt;  <a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> (<a class="idref" href="PrImp.html#BAnd"><span class="id" type="constructor">BAnd</span></a> <span class="id" type="var">b</span> <a class="idref" href="VPHL.html#b'"><span class="id" type="variable">b'</span></a>) <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span>  =&gt; <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <span class="id" type="var">P1</span> <a class="idref" href="VPHL.html#b'"><span class="id" type="variable">b'</span></a>) (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <span class="id" type="var">P2</span> <a class="idref" href="VPHL.html#b'"><span class="id" type="variable">b'</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span>   =&gt; <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a>  (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <span class="id" type="var">P1</span> <a class="idref" href="VPHL.html#b'"><span class="id" type="variable">b'</span></a>) (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <span class="id" type="var">P2</span> <a class="idref" href="VPHL.html#b'"><span class="id" type="variable">b'</span></a>)<br/>
<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="conditionT"><span class="id" type="definition">conditionT</span></a> <span class="id" type="var">hx</span> <span class="id" type="var">y</span> := <a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <a class="idref" href="VPHL.html#hx"><span class="id" type="variable">hx</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>).<br/>
<span class="id" type="keyword">Definition</span> <a name="conditionF"><span class="id" type="definition">conditionF</span></a> <span class="id" type="var">hx</span> <span class="id" type="var">y</span> := <a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <a class="idref" href="VPHL.html#hx"><span class="id" type="variable">hx</span></a> (<a class="idref" href="PrImp.html#BNot"><span class="id" type="constructor">BNot</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)).<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="condition_on_1"><span class="id" type="lemma">condition_on_1</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">b</span> <span class="id" type="var">dst</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;(<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation"><span style="font-family: arial;">&harr;</span></span></a> <a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>)).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">P</span>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_1_r"><span class="id" type="lemma">pr_conj_1_r</span></a>; <span class="id" type="tactic">trivial</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_1_r"><span class="id" type="lemma">pr_conj_1_r</span></a>; <span class="id" type="tactic">trivial</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_1_r"><span class="id" type="lemma">pr_conj_1_r</span></a>; <span class="id" type="tactic">trivial</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHP1</span>, <span class="id" type="var">IHP2</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHP1</span>, <span class="id" type="var">IHP2</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Inductive</span> <a name="unassigned"><span class="id" type="inductive">unassigned</span></a>: <a class="idref" href="PrImp.html#com"><span class="id" type="inductive">com</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="SfLib.html#bid"><span class="id" type="inductive">bid</span></a> <span style="font-family: arial;">&rarr;</span> <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="Cf_skip_b'"><span class="id" type="constructor">Cf_skip_b'</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> <a class="idref" href="PrImp.html#Skip"><span class="id" type="constructor">Skip</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_ass_b'"><span class="id" type="constructor">Cf_ass_b'</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">x</span> <span class="id" type="var">a</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> (<a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><a class="idref" href="PrImp.html#::x_'::='_x"><span class="id" type="notation">::=</span></a><a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_bass_b'"><span class="id" type="constructor">Cf_bass_b'</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y'</span> <span class="id" type="var">b</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a><a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> (<a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a><a class="idref" href="PrImp.html#::x_':=='_x"><span class="id" type="notation">:==</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_seq_b'"><span class="id" type="constructor">Cf_seq_b'</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">y</span>,  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span>  <a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> (<a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="PrImp.html#::x_';'_x"><span class="id" type="notation">;</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_if_b'"><span class="id" type="constructor">Cf_if_b'</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y'</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> (<a class="idref" href="PrImp.html#If"><span class="id" type="constructor">If</span></a> <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_while_b'"><span class="id" type="constructor">Cf_while_b'</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y'</span> <span class="id" type="var">c</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> (<a class="idref" href="PrImp.html#While"><span class="id" type="constructor">While</span></a> <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_toss_b'"><span class="id" type="constructor">Cf_toss_b'</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">x</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> (<a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="PrImp.html#::x_'$=('_x_','_x_')'"><span class="id" type="notation">$=(</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="PrImp.html#::x_'$=('_x_','_x_')'"><span class="id" type="notation">,</span></a><a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a><a class="idref" href="PrImp.html#::x_'$=('_x_','_x_')'"><span class="id" type="notation">)</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_btoss_b'"><span class="id" type="constructor">Cf_btoss_b'</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y'</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a><a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> (<a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a> <a class="idref" href="PrImp.html#::x_'$=['_x_','_x_']'"><span class="id" type="notation">$=[</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="PrImp.html#::x_'$=['_x_','_x_']'"><span class="id" type="notation">,</span></a><a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a><a class="idref" href="PrImp.html#::x_'$=['_x_','_x_']'"><span class="id" type="notation">]</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="probability_preserved"><span class="id" type="lemma">probability_preserved</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">c</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">y</span>,  <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">c</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">y</span> <span class="id" type="var">na</span> <span class="id" type="var">step</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">step</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">na</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_bid_false_iff"><span class="id" type="lemma">beq_bid_false_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">na</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHstep1</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHstep2</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">na</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHstep</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">na</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHstep</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">na</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHstep1</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHstep2</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">na</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_bid_false_iff"><span class="id" type="lemma">beq_bid_false_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHstep2</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHstep1</span>; <span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Scaling Distributions 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="scale"><span class="id" type="definition">scale</span></a> <span class="id" type="var">P</span> <span class="id" type="var">a</span>: <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <span class="id" type="var">b</span> (<a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">p</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> <span class="id" type="var">b</span> (<a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">p</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> <span class="id" type="var">b</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> <span class="id" type="var">b</span> (<a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">p</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span> =&gt; <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <span class="id" type="var">P1</span> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a>) (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <span class="id" type="var">P2</span> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span> =&gt; <a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <span class="id" type="var">P1</span> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a>) (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <span class="id" type="var">P2</span> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Lemma 7.2 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="scale_equiv_1"><span class="id" type="lemma">scale_equiv_1</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst0</span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst0"><span class="id" type="variable">dst0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;(<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst0"><span class="id" type="variable">dst0</span></a>) (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation"><span style="font-family: arial;">&harr;</span></span></a> <a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>))).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst0</span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">Pr1</span> <span class="id" type="var">Pr0</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">induction</span> <span class="id" type="var">P</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_1_r"><span class="id" type="lemma">pr_conj_1_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_eq_compat_l"><span class="id" type="lemma">Rmult_eq_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><span class="id" type="var">p</span>)) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_0_r"><span class="id" type="lemma">Rmult_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" type="lemma">Rplus_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_1_l"><span class="id" type="axiom">Rmult_1_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a><span class="id" type="var">p</span>) (<span class="id" type="var">r2</span>:=<span class="id" type="var">p</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_r"><span class="id" type="lemma">Rinv_r_simpl_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_1_r"><span class="id" type="lemma">pr_conj_1_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_lt_compat_l"><span class="id" type="axiom">Rmult_lt_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><span class="id" type="var">p</span>)) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_0_r"><span class="id" type="lemma">Rmult_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" type="lemma">Rplus_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_1_l"><span class="id" type="axiom">Rmult_1_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a><span class="id" type="var">p</span>) (<span class="id" type="var">r2</span>:=<span class="id" type="var">p</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_r"><span class="id" type="lemma">Rinv_r_simpl_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">gt0</span> <span class="id" type="var">lt1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_0_lt_compat"><span class="id" type="lemma">Rinv_0_lt_compat</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">gt0</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_1_r"><span class="id" type="lemma">pr_conj_1_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_gt_compat_l"><span class="id" type="lemma">Rmult_gt_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><span class="id" type="var">p</span>)) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_0_r"><span class="id" type="lemma">Rmult_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" type="lemma">Rplus_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_1_l"><span class="id" type="axiom">Rmult_1_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a><span class="id" type="var">p</span>) (<span class="id" type="var">r2</span>:=<span class="id" type="var">p</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_r"><span class="id" type="lemma">Rinv_r_simpl_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">v</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">gt0</span> <span class="id" type="var">lt1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_0_lt_compat"><span class="id" type="lemma">Rinv_0_lt_compat</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">gt0</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">H1</span> <span class="id" type="var">H2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">IHP1</span> <span class="id" type="var">H1</span>); <span class="id" type="tactic">specialize</span> (<span class="id" type="var">IHP2</span> <span class="id" type="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">H1</span> | <span class="id" type="var">H2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">IHP1</span> <span class="id" type="var">H1</span>); <span class="id" type="tactic">left</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">IHP2</span> <span class="id" type="var">H2</span>); <span class="id" type="tactic">right</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">induction</span> <span class="id" type="var">P</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_1_r"><span class="id" type="lemma">pr_conj_1_r</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_0_r"><span class="id" type="lemma">Rmult_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" type="lemma">Rplus_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_eq_compat_l"><span class="id" type="lemma">Rmult_eq_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=<span class="id" type="var">p</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_1_l"><span class="id" type="axiom">Rmult_1_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_r"><span class="id" type="lemma">Rinv_r_simpl_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_1_r"><span class="id" type="lemma">pr_conj_1_r</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_0_r"><span class="id" type="lemma">Rmult_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" type="lemma">Rplus_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_lt_compat_l"><span class="id" type="axiom">Rmult_lt_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=<span class="id" type="var">p</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_1_l"><span class="id" type="axiom">Rmult_1_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_r"><span class="id" type="lemma">Rinv_r_simpl_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_1_r"><span class="id" type="lemma">pr_conj_1_r</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_0_r"><span class="id" type="lemma">Rmult_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_0_r"><span class="id" type="lemma">Rplus_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_gt_compat_l"><span class="id" type="lemma">Rmult_gt_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=<span class="id" type="var">p</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_1_l"><span class="id" type="axiom">Rmult_1_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_r"><span class="id" type="lemma">Rinv_r_simpl_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">H1</span> <span class="id" type="var">H2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">IHP1</span> <span class="id" type="var">H1</span>); <span class="id" type="tactic">specialize</span> (<span class="id" type="var">IHP2</span> <span class="id" type="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">H1</span> | <span class="id" type="var">H2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">IHP1</span> <span class="id" type="var">H1</span>); <span class="id" type="tactic">left</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">IHP2</span> <span class="id" type="var">H2</span>); <span class="id" type="tactic">right</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Lemma 7.3 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="scale_equiv_0"><span class="id" type="lemma">scale_equiv_0</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst0</span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst0"><span class="id" type="variable">dst0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;(<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst0"><span class="id" type="variable">dst0</span></a>) (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> (<a class="idref" href="PrImp.html#BNot"><span class="id" type="constructor">BNot</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation"><span style="font-family: arial;">&harr;</span></span></a> <br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst0"><span class="id" type="variable">dst0</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>))).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst0</span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">Pr1</span> <span class="id" type="var">Pr0</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="Intervals.html#one_minus_p"><span class="id" type="lemma">one_minus_p</span></a> <span class="id" type="var">p</span> <span class="id" type="var">v</span>). <span class="id" type="tactic">intros</span> <span class="id" type="var">v'</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#dst_comm_hexp"><span class="id" type="lemma">dst_comm_hexp</span></a> <span class="id" type="var">dst1</span> <span class="id" type="var">dst0</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">v'</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">equiv</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_complement_0"><span class="id" type="lemma">prb_complement_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Pr0</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_complement_1"><span class="id" type="lemma">prb_complement_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Pr1</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <span class="id" type="var">equiv</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_1"><span class="id" type="lemma">scale_equiv_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <span class="id" type="var">equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_1"><span class="id" type="lemma">scale_equiv_1</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="scale_1"><span class="id" type="lemma">scale_1</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span>, <a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">P</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">try</span> (<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_1_l"><span class="id" type="axiom">Rmult_1_l</span></a>; <span class="id" type="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHP1</span>, <span class="id" type="var">IHP2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHP1</span>, <span class="id" type="var">IHP2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab38"></a><h2 class="section">Lemma 7.1: Splitting Distributions</h2>


<div class="paragraph"> </div>

   For any distribution dst and proposition b,
   we can split dst into distributions dst1 and dst0 
   where b is true in dst1 and false in dst0. 

<div class="paragraph"> </div>

   This is crucial for the hoare logic rule for if statements.

<div class="paragraph"> </div>

   (The second version includes extra information about the equivalence,
    which should become unnecessary if we prove the general dst_equiv rule.)

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="fork_on_b"><span class="id" type="lemma">fork_on_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst</span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation"><span style="font-family: arial;">&exist;</span></span></a> <span class="id" type="var">dst1</span> <span class="id" type="var">dst0</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation"><span style="font-family: arial;">&and;</span></span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst0"><span class="id" type="variable">dst0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation"><span style="font-family: arial;">&and;</span></span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst0"><span class="id" type="variable">dst0</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">st</span>| <span class="id" type="var">q</span> <span class="id" type="var">v0</span> <span class="id" type="var">dst1</span> <span class="id" type="var">IH1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">IH2</span>].<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <span class="id" type="var">b</span> <span class="id" type="var">st</span>); <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (@<a class="idref" href="Distributions.html#pr_normality"><span class="id" type="lemma">pr_normality</span></a> <a class="idref" href="SfLib.html#state"><span class="id" type="definition">state</span></a> <span class="id" type="var">dst1</span> (<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <span class="id" type="var">b</span>)). <span class="id" type="tactic">intros</span> <span class="id" type="var">temp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (@<a class="idref" href="Distributions.html#pr_normality"><span class="id" type="lemma">pr_normality</span></a> <a class="idref" href="SfLib.html#state"><span class="id" type="definition">state</span></a> <span class="id" type="var">dst2</span> (<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <span class="id" type="var">b</span>)). <span class="id" type="tactic">intros</span> <span class="id" type="var">temp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">i1</span>:<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation"><span style="font-family: arial;">&or;</span></span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation"><span style="font-family: arial;">&or;</span></span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1). <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">i2</span>:<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation"><span style="font-family: arial;">&or;</span></span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation"><span style="font-family: arial;">&or;</span></span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1). <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">temp1</span> <span class="id" type="var">temp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">i1</span>, <span class="id" type="var">i2</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">destruct</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">destruct</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>, <span class="id" type="var">H1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>, <span class="id" type="var">H1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span>) <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> <span class="id" type="var">dst2</span>, <span class="id" type="var">dst1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#dst_comm"><span class="id" type="lemma">dst_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">destruct</span> <span class="id" type="var">IH2</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">b</span>:=<span class="id" type="var">b</span>) (<span class="id" type="var">v</span>:=<span class="id" type="var">H1</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">dst21</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">dst20</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> <span class="id" type="var">dst21</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#mult_by_lt_1"><span class="id" type="lemma">mult_by_lt_1</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">c</span>:=(<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span>)); <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#negation_flip"><span class="id" type="lemma">negation_flip</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1) <span class="id" type="keyword">as</span> <span class="id" type="var">v_new</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#divide_by_lt"><span class="id" type="lemma">divide_by_lt</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">IH1</span> <span class="id" type="var">IH2</span> <span class="id" type="var">H</span> <span class="id" type="var">H4</span> <span class="id" type="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="var">v_new</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst20</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_eq_compat_r"><span class="id" type="lemma">Rmult_eq_compat_r</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:= <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r"><span class="id" type="lemma">Rinv_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>, <span class="id" type="var">H3</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 6 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_comm"><span class="id" type="axiom">Rplus_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:=<span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst21</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">((</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">((</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">))</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>, <span class="id" type="var">H1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><span class="id" type="var">q</span>) <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> <span class="id" type="var">dst1</span>, <span class="id" type="var">dst2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">replace</span> <span class="id" type="var">v</span> <span class="id" type="keyword">with</span> <span class="id" type="var">v0</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" type="axiom">proof_irrelevance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">destruct</span> <span class="id" type="var">IH1</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">b</span>:=<span class="id" type="var">b</span>) (<span class="id" type="var">v</span>:=<span class="id" type="var">H0</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">dst11</span>]. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">dst10</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> <span class="id" type="var">dst11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#mult_by_lt_1"><span class="id" type="lemma">mult_by_lt_1</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">c</span>:=(<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span>)); <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span>  <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#negation_flip"><span class="id" type="lemma">negation_flip</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1) <span class="id" type="keyword">as</span> <span class="id" type="var">v_new</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#divide_by_lt"><span class="id" type="lemma">divide_by_lt</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">IH1</span> <span class="id" type="var">IH2</span> <span class="id" type="var">H</span> <span class="id" type="var">H4</span> <span class="id" type="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="var">v_new</span> <span class="id" type="var">dst2</span> <span class="id" type="var">dst10</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><span class="id" type="var">q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_eq_compat_r"><span class="id" type="lemma">Rmult_eq_compat_r</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:= <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a><span class="id" type="var">q</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r"><span class="id" type="lemma">Rinv_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H1</span>, <span class="id" type="var">H3</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 6 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_comm"><span class="id" type="axiom">Rplus_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:= <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>, <span class="id" type="var">H1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">destruct</span> <span class="id" type="var">IH2</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">b</span>:=<span class="id" type="var">b</span>) (<span class="id" type="var">v</span>:=<span class="id" type="var">H1</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">dst21</span>]. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">dst20</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">p</span>). <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#plus_by_gt_0"><span class="id" type="lemma">plus_by_gt_0</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">c</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#mult_stable"><span class="id" type="lemma">mult_stable</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1) <span class="id" type="keyword">as</span> <span class="id" type="var">v_new</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#divide_by_lt"><span class="id" type="lemma">divide_by_lt</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">IH1</span> <span class="id" type="var">IH2</span> <span class="id" type="var">H</span> <span class="id" type="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">p</span>) <span class="id" type="var">v_new</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst21</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> <span class="id" type="var">dst20</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)/(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_eq_compat_l"><span class="id" type="lemma">Rplus_eq_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_opp_l"><span class="id" type="lemma">Rplus_opp_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_0_l"><span class="id" type="axiom">Rplus_0_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_eq_compat_l"><span class="id" type="lemma">Rmult_eq_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:= <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rinv_l"><span class="id" type="axiom">Rinv_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>, <span class="id" type="var">H2</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 6 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">destruct</span> <span class="id" type="var">IH1</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">b</span>:=<span class="id" type="var">b</span>) (<span class="id" type="var">v</span>:=<span class="id" type="var">H0</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">dst11</span>]. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">dst10</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">p</span>). <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#plus_by_gt_0"><span class="id" type="lemma">plus_by_gt_0</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">c</span>:= <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>); <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#mult_stable"><span class="id" type="lemma">mult_stable</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)/</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1) <span class="id" type="keyword">as</span> <span class="id" type="var">v_new</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#divide_by_lt"><span class="id" type="lemma">divide_by_lt</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">IH1</span> <span class="id" type="var">IH2</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">p</span>) <span class="id" type="var">v_new</span> <span class="id" type="var">dst2</span> <span class="id" type="var">dst11</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> <span class="id" type="var">dst10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)/</span></a><span class="id" type="var">q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_comm"><span class="id" type="axiom">Rplus_comm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_eq_compat_l"><span class="id" type="lemma">Rplus_eq_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_opp_l"><span class="id" type="lemma">Rplus_opp_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_0_l"><span class="id" type="axiom">Rplus_0_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_eq_compat_r"><span class="id" type="lemma">Rmult_eq_compat_r</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:= <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a><span class="id" type="var">q</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>, <span class="id" type="var">H1</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 6 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_comm"><span class="id" type="axiom">Rplus_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="var">remember</span> (<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span>) <span class="id" type="keyword">as</span> <span class="id" type="var">p1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Heqp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span>) <span class="id" type="keyword">as</span> <span class="id" type="var">p2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Heqp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IH1</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">b</span>:=<span class="id" type="var">b</span>) (<span class="id" type="var">p</span>:=<span class="id" type="var">p1</span>) (<span class="id" type="var">v</span>:=<span class="id" type="var">H0</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">dst11</span>]. <span class="id" type="tactic">apply</span> <span class="id" type="var">Heqp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IH2</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">b</span>:=<span class="id" type="var">b</span>) (<span class="id" type="var">p</span>:=<span class="id" type="var">p2</span>) (<span class="id" type="var">v</span>:=<span class="id" type="var">H1</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">dst21</span>]. <span class="id" type="tactic">apply</span> <span class="id" type="var">Heqp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">dst10</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H3</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">dst20</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">IH1</span> <span class="id" type="var">IH2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">remember</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> <span class="id" type="var">v_p</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">Heqv_p</span>. <span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">v_p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">remember</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> <span class="id" type="var">v_np</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">Heqv_np</span>. <span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#plus_by_gt_0"><span class="id" type="lemma">plus_by_gt_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_p</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#mult_stable"><span class="id" type="lemma">mult_stable</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">remember</span> <span class="id" type="var">v_p</span> <span class="id" type="keyword">as</span> <span class="id" type="var">temp</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">Heqtemp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#divide_by_lt"><span class="id" type="lemma">divide_by_lt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_p</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#mult_stable"><span class="id" type="lemma">mult_stable</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_eq_compat_l"><span class="id" type="lemma">Rplus_eq_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-(</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_opp_l"><span class="id" type="lemma">Rplus_opp_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_0_l"><span class="id" type="axiom">Rplus_0_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">temp3</span>:  <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_0_l"><span class="id" type="axiom">Rplus_0_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_lt_compat"><span class="id" type="lemma">Rplus_lt_compat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_lt_gt_0_contravar"><span class="id" type="lemma">Ropp_lt_gt_0_contravar</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_lt_0_compat"><span class="id" type="lemma">Rmult_lt_0_compat</span></a>; <span class="id" type="var">lra</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#mult_by_lt_1"><span class="id" type="lemma">mult_by_lt_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">temp</span> <span class="id" type="var">temp3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_lt_compat_l"><span class="id" type="axiom">Rplus_lt_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(<span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">p1</span>)) <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_opp_r"><span class="id" type="axiom">Rplus_opp_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_0_l"><span class="id" type="axiom">Rplus_0_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_lt_contravar"><span class="id" type="lemma">Ropp_lt_contravar</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_lt_compat_l"><span class="id" type="axiom">Rplus_lt_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=1) <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)*</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span>). <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">v_np</span>. <span class="id" type="tactic">rename</span> <span class="id" type="var">H4</span> <span class="id" type="var">into</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#divide_by_lt"><span class="id" type="lemma">divide_by_lt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#mult_stable"><span class="id" type="lemma">mult_stable</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">p</span>) <span class="id" type="var">v_p</span> <span class="id" type="var">dst11</span> <span class="id" type="var">dst21</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)*</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="var">v_np</span> <span class="id" type="var">dst10</span> <span class="id" type="var">dst20</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span>, <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H4</span>, <span class="id" type="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H2</span>, <span class="id" type="var">H3</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H4</span>, <span class="id" type="var">H5</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 4 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 12 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rinv_l"><span class="id" type="axiom">Rinv_l</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H8</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span>(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:=(<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rinv_l"><span class="id" type="axiom">Rinv_l</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H8</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span>( <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a>  <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rinv_l"><span class="id" type="axiom">Rinv_l</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H8</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span>( <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r2</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rinv_l"><span class="id" type="axiom">Rinv_l</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H8</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">lra</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="fork_on_b_plus"><span class="id" type="lemma">fork_on_b_plus</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">c</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation"><span style="font-family: arial;">&exist;</span></span></a> <span class="id" type="var">dst1</span> <span class="id" type="var">dst0</span> <span class="id" type="var">dst''</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation"><span style="font-family: arial;">&and;</span></span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst0"><span class="id" type="variable">dst0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation"><span style="font-family: arial;">&and;</span></span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst0"><span class="id" type="variable">dst0</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation"><span style="font-family: arial;">&and;</span></span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst0"><span class="id" type="variable">dst0</span></a><a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="VPHL.html#dst''"><span class="id" type="variable">dst''</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation"><span style="font-family: arial;">&and;</span></span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> <a class="idref" href="VPHL.html#dst''"><span class="id" type="variable">dst''</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">st</span>| <span class="id" type="var">q</span> <span class="id" type="var">v0</span> <span class="id" type="var">dst1</span> <span class="id" type="var">IH1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">IH2</span>].<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#False"><span class="id" type="inductive">False</span></a>) <span class="id" type="keyword">as</span> <span class="id" type="var">contra</span>. <span class="id" type="tactic">destruct</span> (<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <span class="id" type="var">b</span> <span class="id" type="var">st</span>); <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">intros</span> <span class="id" type="var">dst'</span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">com</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (@<a class="idref" href="Distributions.html#pr_normality"><span class="id" type="lemma">pr_normality</span></a> <a class="idref" href="SfLib.html#state"><span class="id" type="definition">state</span></a> <span class="id" type="var">dst1</span> (<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <span class="id" type="var">b</span>)). <span class="id" type="tactic">intros</span> <span class="id" type="var">temp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (@<a class="idref" href="Distributions.html#pr_normality"><span class="id" type="lemma">pr_normality</span></a> <a class="idref" href="SfLib.html#state"><span class="id" type="definition">state</span></a> <span class="id" type="var">dst2</span> (<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <span class="id" type="var">b</span>)). <span class="id" type="tactic">intros</span> <span class="id" type="var">temp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">i1</span>:<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation"><span style="font-family: arial;">&or;</span></span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation"><span style="font-family: arial;">&or;</span></span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1). <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">i2</span>:<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation"><span style="font-family: arial;">&or;</span></span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation"><span style="font-family: arial;">&or;</span></span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1). <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">temp1</span> <span class="id" type="var">temp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">i1</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Pr1</span> | <span class="id" type="var">d1</span>], <span class="id" type="var">i2</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Pr2</span> | <span class="id" type="var">d2</span>]; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">try</span> <span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Ranalysis1.html#d1"><span class="id" type="projection">d1</span></a> <span class="id" type="keyword">as</span> [<span class="id" type="var">Pr1</span> | <span class="id" type="var">v1</span>]; <span class="id" type="tactic">try</span> <span class="id" type="tactic">destruct</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Ranalysis1.html#d2"><span class="id" type="projection">d2</span></a> <span class="id" type="keyword">as</span> [<span class="id" type="var">Pr2</span> | <span class="id" type="var">v2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">assert</span>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#False"><span class="id" type="inductive">False</span></a>) <span class="id" type="keyword">as</span> <span class="id" type="var">contra</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">Pr1</span>, <span class="id" type="var">Pr2</span> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#step_split"><span class="id" type="lemma">step_split</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">dst1'</span> &amp; <span class="id" type="var">dst2'</span> &amp; <span class="id" type="var">Eq</span> &amp; <span class="id" type="var">step1</span> &amp; <span class="id" type="var">step2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Pr1</span>, <span class="id" type="var">Pr2</span> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">replace</span> (<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> 1) <span class="id" type="keyword">with</span> (1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span> <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> <span class="id" type="var">dst2</span>, <span class="id" type="var">dst1</span>, (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst2'</span> <span class="id" type="var">dst1'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#dst_comm"><span class="id" type="lemma">dst_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" type="tactic">constructor</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#dst_comm"><span class="id" type="lemma">dst_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#step_split"><span class="id" type="lemma">step_split</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">dst1'</span> &amp; <span class="id" type="var">dst2'</span> &amp; <span class="id" type="var">Eq</span> &amp; <span class="id" type="var">step1</span> &amp; <span class="id" type="var">step2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">IH2</span> <span class="id" type="var">dst2'</span> <span class="id" type="var">b</span> (<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span>) <span class="id" type="var">v2</span> <span class="id" type="var">step2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IH2</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">dst21</span> &amp; <span class="id" type="var">dst20</span> &amp; <span class="id" type="var">dst''</span> &amp; <span class="id" type="var">Pr21</span> &amp; <span class="id" type="var">Pr20</span> &amp; <span class="id" type="var">Eq2</span> &amp; <span class="id" type="var">step'</span> &amp; <span class="id" type="var">Eq3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Pr1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_0_r"><span class="id" type="lemma">Rmult_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_0_l"><span class="id" type="axiom">Rplus_0_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>. <span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">t1</span>:<span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span>). <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#mult_by_lt_1"><span class="id" type="lemma">mult_by_lt_1</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">c</span>:=(<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span>)); <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">t2</span>:1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span>). <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#negation_flip"><span class="id" type="lemma">negation_flip</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1) <span class="id" type="keyword">as</span> <span class="id" type="var">v_new</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#divide_by_lt"><span class="id" type="lemma">divide_by_lt</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> <span class="id" type="var">dst21</span>, (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="var">v_new</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst20</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">prob2</span>: <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_eq_compat_r"><span class="id" type="lemma">Rmult_eq_compat_r</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:= <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r"><span class="id" type="lemma">Rinv_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">prob</span>. <span class="id" type="tactic">rename</span> <span class="id" type="var">prob2</span> <span class="id" type="var">into</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#step_split"><span class="id" type="lemma">step_split</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step'</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">dst21'</span> &amp; <span class="id" type="var">dst20'</span> &amp; <span class="id" type="var">Eq1</span> &amp; <span class="id" type="var">step21</span> &amp; <span class="id" type="var">step22</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst21'</span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="var">v_new</span> <span class="id" type="var">dst1'</span> <span class="id" type="var">dst20'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Pr1</span>, <span class="id" type="var">Pr20</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 6 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_comm"><span class="id" type="axiom">Rplus_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:=<span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst21</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">H</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">((</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">((</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">))</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" type="tactic">constructor</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">constructor</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*  <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Eq3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 6 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_comm"><span class="id" type="axiom">Rplus_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:=<span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst21'</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">H</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">((</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">))</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)*((</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">))</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <span class="id" type="var">Pr1</span>, <span class="id" type="var">Pr2</span> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">t</span>:<span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><span class="id" type="var">q</span>) <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">prob</span>. <span class="id" type="tactic">rename</span> <span class="id" type="var">t</span> <span class="id" type="var">into</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> <span class="id" type="var">dst1</span>, <span class="id" type="var">dst2</span>, <span class="id" type="var">dst'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">replace</span> <span class="id" type="var">v</span> <span class="id" type="keyword">with</span> <span class="id" type="var">v0</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" type="axiom">proof_irrelevance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">replace</span> <span class="id" type="var">v</span> <span class="id" type="keyword">with</span> <span class="id" type="var">v0</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" type="axiom">proof_irrelevance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#dst_equiv_refl"><span class="id" type="lemma">dst_equiv_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#step_split"><span class="id" type="lemma">step_split</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">com</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x1</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x2</span> <span class="id" type="var">com</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Eq</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">com1</span> <span class="id" type="var">com2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IH1</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">b</span>:=<span class="id" type="var">b</span>) (<span class="id" type="var">v</span>:=<span class="id" type="var">v1</span>) (<span class="id" type="var">dst'</span>:=<span class="id" type="var">x1</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">dst11</span>]; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">dst10</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Pr2</span> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> <span class="id" type="var">dst11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">q</span>). <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#mult_by_lt_1"><span class="id" type="lemma">mult_by_lt_1</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">c</span>:=(<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span>)); <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span>  <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span>). <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#negation_flip"><span class="id" type="lemma">negation_flip</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1) <span class="id" type="keyword">as</span> <span class="id" type="var">v_new</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#divide_by_lt"><span class="id" type="lemma">divide_by_lt</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">IH1</span> <span class="id" type="var">IH2</span> <span class="id" type="var">prob</span> <span class="id" type="var">H1</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="var">v_new</span> <span class="id" type="var">dst2</span> <span class="id" type="var">dst10</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><span class="id" type="var">q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_eq_compat_r"><span class="id" type="lemma">Rmult_eq_compat_r</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:= <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a><span class="id" type="var">q</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r"><span class="id" type="lemma">Rinv_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">dst''</span> &amp; <span class="id" type="var">Pr11</span> &amp; <span class="id" type="var">Pr10</span> &amp; <span class="id" type="var">Eq1</span> &amp; <span class="id" type="var">com</span> &amp; <span class="id" type="var">equiv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#step_split"><span class="id" type="lemma">step_split</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">com</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x11</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x10</span> <span class="id" type="var">com</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Eq2</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">com21</span> <span class="id" type="var">com20</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">x11</span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="var">v_new</span> <span class="id" type="var">x2</span> <span class="id" type="var">x10</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Pr2</span>, <span class="id" type="var">Pr10</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Eq1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 6 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_comm"><span class="id" type="axiom">Rplus_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:= <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" type="tactic">constructor</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">constructor</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 6 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_comm"><span class="id" type="axiom">Rplus_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:= <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">x2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">assert</span>(<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#False"><span class="id" type="inductive">False</span></a>) <span class="id" type="keyword">as</span> <span class="id" type="var">contra</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">Pr1</span>, <span class="id" type="var">Pr2</span> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rename</span> <span class="id" type="var">prob</span> <span class="id" type="var">into</span> <span class="id" type="var">H</span>, <span class="id" type="var">Pr1</span> <span class="id" type="var">into</span> <span class="id" type="var">H0</span>, <span class="id" type="var">v2</span> <span class="id" type="var">into</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#step_split"><span class="id" type="lemma">step_split</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">com</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x1</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x2</span> <span class="id" type="var">com</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Eq</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">com1</span> <span class="id" type="var">com2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IH2</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">b</span>:=<span class="id" type="var">b</span>) (<span class="id" type="var">v</span>:=<span class="id" type="var">H1</span>) (<span class="id" type="var">dst'</span>:=<span class="id" type="var">x2</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">dst21</span>]; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">dst20</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">p</span>). <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#plus_by_gt_0"><span class="id" type="lemma">plus_by_gt_0</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">c</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#mult_stable"><span class="id" type="lemma">mult_stable</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1) <span class="id" type="keyword">as</span> <span class="id" type="var">v_new</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#divide_by_lt"><span class="id" type="lemma">divide_by_lt</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">IH1</span> <span class="id" type="var">IH2</span> <span class="id" type="var">H</span> <span class="id" type="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">p</span>) <span class="id" type="var">v_new</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst21</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> <span class="id" type="var">dst20</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)/(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_eq_compat_l"><span class="id" type="lemma">Rplus_eq_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_opp_l"><span class="id" type="lemma">Rplus_opp_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_0_l"><span class="id" type="axiom">Rplus_0_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_eq_compat_l"><span class="id" type="lemma">Rmult_eq_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:= <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rinv_l"><span class="id" type="axiom">Rinv_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H4</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H5</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">com</span> <span class="id" type="var">equiv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#step_split"><span class="id" type="lemma">step_split</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">com</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x21</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x20</span> <span class="id" type="var">com</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Eq2</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">com21</span> <span class="id" type="var">com20</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <span class="id" type="var">p</span> <span class="id" type="var">v</span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">p</span>) <span class="id" type="var">v_new</span> <span class="id" type="var">x1</span> <span class="id" type="var">x21</span>) <span class="id" type="var">x20</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span>, <span class="id" type="var">H2</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 6 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" type="tactic">constructor</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">constructor</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 6 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> ).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rename</span> <span class="id" type="var">prob</span> <span class="id" type="var">into</span> <span class="id" type="var">H</span>, <span class="id" type="var">v1</span> <span class="id" type="var">into</span> <span class="id" type="var">H0</span>, <span class="id" type="var">Pr2</span> <span class="id" type="var">into</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#step_split"><span class="id" type="lemma">step_split</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">com</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x1</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x2</span> <span class="id" type="var">com</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Eq</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">com1</span> <span class="id" type="var">com2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IH1</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">b</span>:=<span class="id" type="var">b</span>) (<span class="id" type="var">v</span>:=<span class="id" type="var">H0</span>) (<span class="id" type="var">dst'</span>:=<span class="id" type="var">x1</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">dst11</span>]; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">dst10</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">p</span>). <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#plus_by_gt_0"><span class="id" type="lemma">plus_by_gt_0</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">c</span>:= <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>); <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#mult_stable"><span class="id" type="lemma">mult_stable</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)/</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1) <span class="id" type="keyword">as</span> <span class="id" type="var">v_new</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#divide_by_lt"><span class="id" type="lemma">divide_by_lt</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">IH1</span> <span class="id" type="var">IH2</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">p</span>) <span class="id" type="var">v_new</span> <span class="id" type="var">dst2</span> <span class="id" type="var">dst11</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> <span class="id" type="var">dst10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)/</span></a><span class="id" type="var">q</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_comm"><span class="id" type="axiom">Rplus_comm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_eq_compat_l"><span class="id" type="lemma">Rplus_eq_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_opp_l"><span class="id" type="lemma">Rplus_opp_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_0_l"><span class="id" type="axiom">Rplus_0_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_eq_compat_r"><span class="id" type="lemma">Rmult_eq_compat_r</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:= <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a><span class="id" type="var">q</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H4</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H5</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">com</span> <span class="id" type="var">equiv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#step_split"><span class="id" type="lemma">step_split</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">com</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x11</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x10</span> <span class="id" type="var">com</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Eq2</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">com11</span> <span class="id" type="var">com10</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <span class="id" type="var">p</span> <span class="id" type="var">v</span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">p</span>) <span class="id" type="var">v_new</span> <span class="id" type="var">x2</span> <span class="id" type="var">x11</span>) <span class="id" type="var">x10</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>, <span class="id" type="var">H1</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 6 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_comm"><span class="id" type="axiom">Rplus_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" type="tactic">constructor</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">constructor</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 6 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_comm"><span class="id" type="axiom">Rplus_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rename</span> <span class="id" type="var">prob</span> <span class="id" type="var">into</span> <span class="id" type="var">H</span>, <span class="id" type="var">v1</span> <span class="id" type="var">into</span> <span class="id" type="var">H0</span>, <span class="id" type="var">v2</span> <span class="id" type="var">into</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#step_split"><span class="id" type="lemma">step_split</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">com</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x1</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x2</span> <span class="id" type="var">com</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Eq</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">com1</span> <span class="id" type="var">com2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst1</span>) <span class="id" type="keyword">as</span> <span class="id" type="var">p1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Heqp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <span class="id" type="var">b</span> <span class="id" type="keyword">in</span> <span class="id" type="var">dst2</span>) <span class="id" type="keyword">as</span> <span class="id" type="var">p2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Heqp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IH1</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">b</span>:=<span class="id" type="var">b</span>) (<span class="id" type="var">p</span>:=<span class="id" type="var">p1</span>) (<span class="id" type="var">v</span>:=<span class="id" type="var">H0</span>) (<span class="id" type="var">dst'</span>:=<span class="id" type="var">x1</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">dst11</span>]; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IH2</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">b</span>:=<span class="id" type="var">b</span>) (<span class="id" type="var">p</span>:=<span class="id" type="var">p2</span>) (<span class="id" type="var">v</span>:=<span class="id" type="var">H1</span>) (<span class="id" type="var">dst'</span>:=<span class="id" type="var">x2</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">dst21</span>]; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">dst10</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H3</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">dst20</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">IH1</span> <span class="id" type="var">IH2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">remember</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> <span class="id" type="var">v_p</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">Heqv_p</span>. <span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">v_p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">remember</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> <span class="id" type="var">v_np</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">Heqv_np</span>. <span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#plus_by_gt_0"><span class="id" type="lemma">plus_by_gt_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_p</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#mult_stable"><span class="id" type="lemma">mult_stable</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">remember</span> <span class="id" type="var">v_p</span> <span class="id" type="keyword">as</span> <span class="id" type="var">temp</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">Heqtemp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#divide_by_lt"><span class="id" type="lemma">divide_by_lt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_p</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#mult_stable"><span class="id" type="lemma">mult_stable</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_eq_compat_l"><span class="id" type="lemma">Rplus_eq_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-(</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_opp_l"><span class="id" type="lemma">Rplus_opp_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_0_l"><span class="id" type="axiom">Rplus_0_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">temp3</span>:  <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a>  <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_0_l"><span class="id" type="axiom">Rplus_0_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rplus_lt_compat"><span class="id" type="lemma">Rplus_lt_compat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_lt_gt_0_contravar"><span class="id" type="lemma">Ropp_lt_gt_0_contravar</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_lt_0_compat"><span class="id" type="lemma">Rmult_lt_0_compat</span></a>; <span class="id" type="var">lra</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#mult_by_lt_1"><span class="id" type="lemma">mult_by_lt_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">temp</span> <span class="id" type="var">temp3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_lt_compat_l"><span class="id" type="axiom">Rplus_lt_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=(<span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">p1</span>)) <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_assoc"><span class="id" type="axiom">Rplus_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_opp_r"><span class="id" type="axiom">Rplus_opp_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_0_l"><span class="id" type="axiom">Rplus_0_l</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_lt_contravar"><span class="id" type="lemma">Ropp_lt_contravar</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rplus_lt_compat_l"><span class="id" type="axiom">Rplus_lt_compat_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r</span>:=1) <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)*</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span>). <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">v_np</span>. <span class="id" type="tactic">rename</span> <span class="id" type="var">H4</span> <span class="id" type="var">into</span> <span class="id" type="var">v_np</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#divide_by_lt"><span class="id" type="lemma">divide_by_lt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">v_np</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">apply</span> <a class="idref" href="Intervals.html#mult_stable"><span class="id" type="lemma">mult_stable</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">p</span>) <span class="id" type="var">v_p</span> <span class="id" type="var">dst11</span> <span class="id" type="var">dst21</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)*</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="var">v_np</span> <span class="id" type="var">dst10</span> <span class="id" type="var">dst20</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span>, <span class="id" type="var">H3</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H2</span>, <span class="id" type="var">H3</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H4</span>, <span class="id" type="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H6</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H8</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">com</span> <span class="id" type="var">equiv1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#step_split"><span class="id" type="lemma">step_split</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">com</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x11</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x10</span> <span class="id" type="var">com</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Eq1</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">com11</span> <span class="id" type="var">com10</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H7</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H8</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">com</span> <span class="id" type="var">equiv2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#step_split"><span class="id" type="lemma">step_split</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">com</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x21</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">x20</span> <span class="id" type="var">com</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Eq2</span> <span class="id" type="var">com</span>]. <span class="id" type="tactic">destruct</span> <span class="id" type="var">com</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">com21</span> <span class="id" type="var">com20</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <span class="id" type="var">p</span> <span class="id" type="var">v</span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">p</span>) <span class="id" type="var">v_p</span> <span class="id" type="var">x11</span> <span class="id" type="var">x21</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="var">v_np</span> <span class="id" type="var">x10</span> <span class="id" type="var">x20</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H2</span>, <span class="id" type="var">H3</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H4</span>, <span class="id" type="var">H5</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 4 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 12 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rinv_l"><span class="id" type="axiom">Rinv_l</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H8</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span>(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:=(<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rinv_l"><span class="id" type="axiom">Rinv_l</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H8</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span>( <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a>  <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rinv_l"><span class="id" type="axiom">Rinv_l</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H8</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span>( <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r2</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rinv_l"><span class="id" type="axiom">Rinv_l</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H8</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" type="tactic">constructor</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">constructor</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">constructor</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#dst_equiv"><span class="id" type="definition">dst_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">equiv1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">equiv2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Eq1</span>, <span class="id" type="var">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span><span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 4 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rminus"><span class="id" type="definition">Rminus</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 12 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rinv_l"><span class="id" type="axiom">Rinv_l</span></a>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H8</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span>(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r1</span>:=(<span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rinv_l"><span class="id" type="axiom">Rinv_l</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H8</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span>( <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a>  <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rinv_l"><span class="id" type="axiom">Rinv_l</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H8</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span>( <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_plus_distr_l"><span class="id" type="axiom">Rmult_plus_distr_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rmult_1_r"><span class="id" type="lemma">Rmult_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse"><span class="id" type="lemma">Ropp_mult_distr_l_reverse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">r2</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">/(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">(</span></a>1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">-</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">p2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'-'_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:'/'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rinv_l"><span class="id" type="axiom">Rinv_l</span></a>; <span class="id" type="tactic">try</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H8</span>. <span class="id" type="tactic">clear</span> <span class="id" type="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">lra</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="if_steps"><span class="id" type="lemma">if_steps</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation"><span style="font-family: arial;">&exist;</span></span></a> <span class="id" type="var">dst3</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a><a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="VPHL.html#dst3"><span class="id" type="variable">dst3</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">st</span>|]; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" type="definition">snd</span></a> <span class="id" type="var">st</span> <span class="id" type="var">y</span>) <span class="id" type="var">eqn</span>: <span class="id" type="var">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> <span class="id" type="var">dst1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_true_lift"><span class="id" type="lemma">if_true_lift</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Eq</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> <span class="id" type="var">dst2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_false_lift"><span class="id" type="lemma">if_false_lift</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Eq</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHdst1</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst2</span>:=<span class="id" type="var">dst1'</span>) (<span class="id" type="var">dst3</span>:=<span class="id" type="var">dst1'0</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">dst1'1</span>]; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHdst2</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst1</span>:=<span class="id" type="var">dst2'</span>) (<span class="id" type="var">dst3</span>:=<span class="id" type="var">dst2'0</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">dst2'1</span>]; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <span class="id" type="var">p</span> <span class="id" type="var">a</span> <span class="id" type="var">dst1'1</span> <span class="id" type="var">dst2'1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_Lift"><span class="id" type="constructor">E_Lift</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Note: The converse is false, even in a weak form.

<div class="paragraph"> </div>

i.e.
Conjecture if_steps_rev : forall b c1 c2 dst dst',
  (IFB b THEN c1 ELSE c2 FI) / dst || dst' -&gt;
  exists dst1 dst2, c1 / dst || dst1 \/ c2 / dst || dst2.

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_if_true"><span class="id" type="lemma">hoare_if_true</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span> <span class="id" type="var">y</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a><a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_true_equiv"><span class="id" type="lemma">if_true_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_if_false"><span class="id" type="lemma">hoare_if_false</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span> <span class="id" type="var">y</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> (<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a><a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> (<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_false_equiv"><span class="id" type="lemma">if_false_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab39"></a><h2 class="section">The Deterministic If Rule</h2>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_if_det"><span class="id" type="lemma">hoare_if_det</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span> <span class="id" type="var">y</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> (<a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">)</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span> <span class="id" type="var">y</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">hoare1</span> <span class="id" type="var">hoare2</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">HP</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">HP</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">HP</span> <span class="id" type="var">det</span>].<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">det</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">HT</span> | <span class="id" type="var">HF</span>].<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="PrImp.html#if_true_equiv"><span class="id" type="lemma">if_true_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">hoare1</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst</span>:=<span class="id" type="var">dst</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="PrImp.html#if_false_equiv"><span class="id" type="lemma">if_false_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">hoare2</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst</span>:=<span class="id" type="var">dst</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab40"></a><h2 class="section">The Probabilistic If Rule</h2>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_if_prob"><span class="id" type="lemma">hoare_if_prob</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span> <span class="id" type="var">Q1</span> <span class="id" type="var">Q2</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">y</span> <span class="id" type="var">p</span>,<br/>
&nbsp;&nbsp;0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)) (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#Q1"><span class="id" type="variable">Q1</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>)) (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#Q2"><span class="id" type="variable">Q2</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>))<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">)</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#Q1"><span class="id" type="variable">Q1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#Q2"><span class="id" type="variable">Q2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span> <span class="id" type="var">Q1</span> <span class="id" type="var">Q2</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">y</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">cf1</span> <span class="id" type="var">cf2</span> <span class="id" type="var">HP1</span> <span class="id" type="var">HP2</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">pre</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">prob</span> &amp; <span class="id" type="var">preT</span> &amp; <span class="id" type="var">preF</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#fork_on_b_plus"><span class="id" type="lemma">fork_on_b_plus</span></a> (<a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <span class="id" type="var">c1</span> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <span class="id" type="var">c2</span> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a>) <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span>) <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">step</span> <span class="id" type="var">prob</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> (<span class="id" type="var">dst1</span> &amp; <span class="id" type="var">dst0</span> &amp; <span class="id" type="var">dst''</span> &amp; <span class="id" type="var">E1</span> &amp; <span class="id" type="var">E0</span> &amp; <span class="id" type="var">Eq</span> &amp; <span class="id" type="var">step2</span> &amp; <span class="id" type="var">Eq2</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#dst_equiv_iff"><span class="id" type="lemma">dst_equiv_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Eq</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">Eq</span> <span class="id" type="keyword">in</span> <span class="id" type="var">preT</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">Eq</span> <span class="id" type="keyword">in</span> <span class="id" type="var">preF</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">step2</span>; <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">rename</span> <span class="id" type="var">H4</span> <span class="id" type="var">into</span> <span class="id" type="var">stepT</span>, <span class="id" type="var">H5</span> <span class="id" type="var">into</span> <span class="id" type="var">stepF</span>, <span class="id" type="var">dst2'</span> <span class="id" type="var">into</span> <span class="id" type="var">dst0'</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#dst_equiv_iff"><span class="id" type="lemma">dst_equiv_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Eq2</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_true_equiv"><span class="id" type="lemma">if_true_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">stepT</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_false_equiv"><span class="id" type="lemma">if_false_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">stepF</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#probability_preserved"><span class="id" type="lemma">probability_preserved</span></a> <span class="id" type="var">c1</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst1'</span> <span class="id" type="var">y</span> <span class="id" type="var">cf1</span> <span class="id" type="var">stepT</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">E1'</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#probability_preserved"><span class="id" type="lemma">probability_preserved</span></a> <span class="id" type="var">c2</span> <span class="id" type="var">dst0</span> <span class="id" type="var">dst0'</span> <span class="id" type="var">y</span> <span class="id" type="var">cf2</span> <span class="id" type="var">stepF</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">E0'</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">E1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">E1'</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">E0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">E0'</span>. <span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">E1'</span>, <span class="id" type="var">E0'</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <span class="id" type="var">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_1"><span class="id" type="lemma">scale_equiv_1</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_1"><span class="id" type="lemma">scale_equiv_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">preT</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <span class="id" type="var">HP1</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">stepT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <span class="id" type="var">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_0"><span class="id" type="lemma">scale_equiv_0</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_0"><span class="id" type="lemma">scale_equiv_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">preF</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <span class="id" type="var">HP2</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">stepF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab41"></a><h1 class="section">While Loops</h1>

<div class="paragraph"> </div>

<a name="lab42"></a><h2 class="section">While loop termination</h2>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Inductive</span> <a name="terminates_in"><span class="id" type="inductive">terminates_in</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="PrImp.html#com"><span class="id" type="inductive">com</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="PrImp.html#dstate"><span class="id" type="definition">dstate</span></a> <span style="font-family: arial;">&rarr;</span> <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="term_0"><span class="id" type="constructor">term_0</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span> <span class="id" type="var">c</span> <span class="id" type="var">dst</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#terminates_in"><span class="id" type="inductive">terminates_in</span></a> 0 (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a><br/>
&nbsp;&nbsp;| <a name="term_S"><span class="id" type="constructor">term_S</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">n</span> <span class="id" type="var">y</span> <span class="id" type="var">c</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#terminates_in"><span class="id" type="inductive">terminates_in</span></a> <a class="idref" href="VPHL.html#n"><span class="id" type="variable">n</span></a> (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#terminates_in"><span class="id" type="inductive">terminates_in</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <a class="idref" href="VPHL.html#n"><span class="id" type="variable">n</span></a>) (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="term_combine"><span class="id" type="lemma">term_combine</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span> <span class="id" type="var">c</span> <span class="id" type="var">n</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#terminates_in"><span class="id" type="inductive">terminates_in</span></a> <a class="idref" href="VPHL.html#n"><span class="id" type="variable">n</span></a> (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#terminates_in"><span class="id" type="inductive">terminates_in</span></a> <a class="idref" href="VPHL.html#n"><span class="id" type="variable">n</span></a> (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#terminates_in"><span class="id" type="inductive">terminates_in</span></a> <a class="idref" href="VPHL.html#n"><span class="id" type="variable">n</span></a> (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">T1</span> <span class="id" type="var">T2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">T1</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">T2</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#term_0"><span class="id" type="constructor">term_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H1</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H2</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">T1</span>; <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">rename</span> <span class="id" type="var">dst'</span> <span class="id" type="var">into</span> <span class="id" type="var">dst1'</span>, <span class="id" type="var">H2</span> <span class="id" type="var">into</span> <span class="id" type="var">Pr1</span>, <span class="id" type="var">H3</span> <span class="id" type="var">into</span> <span class="id" type="var">step1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">T2</span>; <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">rename</span> <span class="id" type="var">dst'</span> <span class="id" type="var">into</span> <span class="id" type="var">dst2'</span>, <span class="id" type="var">H2</span> <span class="id" type="var">into</span> <span class="id" type="var">Pr2</span>, <span class="id" type="var">H3</span> <span class="id" type="var">into</span> <span class="id" type="var">step2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#term_S"><span class="id" type="constructor">term_S</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst'</span>:=(<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1'</span> <span class="id" type="var">dst2'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">Pr1</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">Pr2</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_Lift"><span class="id" type="constructor">E_Lift</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHn</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="term_split"><span class="id" type="lemma">term_split</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span> <span class="id" type="var">c</span> <span class="id" type="var">n</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#terminates_in"><span class="id" type="inductive">terminates_in</span></a> <a class="idref" href="VPHL.html#n"><span class="id" type="variable">n</span></a> (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a>) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#terminates_in"><span class="id" type="inductive">terminates_in</span></a> <a class="idref" href="VPHL.html#n"><span class="id" type="variable">n</span></a> (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation"><span style="font-family: arial;">&and;</span></span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#terminates_in"><span class="id" type="inductive">terminates_in</span></a> <a class="idref" href="VPHL.html#n"><span class="id" type="variable">n</span></a> (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">T</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">T</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_split_0"><span class="id" type="lemma">pr_split_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H1</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">Pr1</span> &amp; <span class="id" type="var">Pr2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#term_0"><span class="id" type="constructor">term_0</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">T</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_split_1"><span class="id" type="lemma">pr_split_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">Pr1</span> &amp; <span class="id" type="var">Pr2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H3</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">replace</span> <span class="id" type="var">v1</span> <span class="id" type="keyword">with</span> <span class="id" type="var">v</span> <span class="id" type="keyword">in</span> * <span class="id" type="tactic">by</span> <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" type="axiom">proof_irrelevance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">IHn</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1'</span> <span class="id" type="var">dst2'</span> <span class="id" type="var">H5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHn</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">T1</span> <span class="id" type="var">T2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#term_S"><span class="id" type="constructor">term_S</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst'</span>:=<span class="id" type="var">dst1'</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#term_S"><span class="id" type="constructor">term_S</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst'</span>:=<span class="id" type="var">dst2'</span>); <span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="while_end"><span class="id" type="lemma">while_end</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span> <span class="id" type="var">c</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#terminates_in"><span class="id" type="inductive">terminates_in</span></a> 0 (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <span class="id" type="var">c</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) <span class="id" type="keyword">as</span> <span class="id" type="var">com</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">solve</span> [<span class="id" type="tactic">inversion</span> <span class="id" type="var">Heqcom</span>]; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#term_0"><span class="id" type="constructor">term_0</span></a>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHceval2</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#term_combine"><span class="id" type="lemma">term_combine</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHceval1</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHceval2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="equidistant"><span class="id" type="lemma">equidistant</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">y</span> <span class="id" type="var">c</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> (<a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a>) (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> (<a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>))) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#terminates_in"><span class="id" type="inductive">terminates_in</span></a> <a class="idref" href="VPHL.html#m"><span class="id" type="variable">m</span></a> (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#terminates_in"><span class="id" type="inductive">terminates_in</span></a> <a class="idref" href="VPHL.html#n"><span class="id" type="variable">n</span></a> (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#m"><span class="id" type="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#n"><span class="id" type="variable">n</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">y</span> <span class="id" type="var">c</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">m</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">dst2</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">dst1</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">m</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">n</span> <span class="id" type="var">hoare</span> <span class="id" type="var">HP</span> <span class="id" type="var">term1</span> <span class="id" type="var">term2</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">destruct</span> <span class="id" type="var">HP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">inversion</span> <span class="id" type="var">term1</span>; <span class="id" type="tactic">subst</span>. &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_split_1"><span class="id" type="lemma">pr_split_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">inversion</span> <span class="id" type="var">term2</span>; <span class="id" type="tactic">trivial</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_split_0"><span class="id" type="lemma">pr_split_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">term1</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">term2</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">HP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_split_1"><span class="id" type="lemma">pr_split_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_split_0"><span class="id" type="lemma">pr_split_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H0</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span>( <a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span>) (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <span class="id" type="var">P</span> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <span class="id" type="var">y</span>))) <span class="id" type="keyword">as</span> <span class="id" type="var">HP2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">HP</span>; <span class="id" type="tactic">assumption</span>. <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H1</span>, <span class="id" type="var">H2</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">step</span>: <span class="id" type="var">c</span> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <span class="id" type="var">p</span>  <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst'</span> <span class="id" type="var">dst'0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_Lift"><span class="id" type="constructor">E_Lift</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">hoare</span> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">step</span> <span class="id" type="keyword">in</span> <span class="id" type="var">HP2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">IHm</span> <span class="id" type="var">dst'</span> <span class="id" type="var">dst'0</span> <span class="id" type="var">n0</span> <span class="id" type="var">hoare</span> <span class="id" type="var">HP2</span> <span class="id" type="var">H5</span> <span class="id" type="var">H8</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">

<div class="paragraph"> </div>

   In principle, we could remove the "non_probabilistic P" hypothesis from the 
   following lemma based on our yet unproven conjecture that every non-deterministic
   invariant that preserves deterministic b implies some deterministic invariant. 

<div class="paragraph"> </div>

   However, we have yet to prove this (nearly certain) conjecture in Coq.

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="while_terminates"><span class="id" type="lemma">while_terminates</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">y</span> <span class="id" type="var">c</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#non_probabilistic"><span class="id" type="inductive">non_probabilistic</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> (<a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> (<a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>))) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation"><span style="font-family: arial;">&exist;</span></span></a> <span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="VPHL.html#terminates_in"><span class="id" type="inductive">terminates_in</span></a> <a class="idref" href="VPHL.html#n"><span class="id" type="variable">n</span></a> (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <span class="id" type="var">c</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) <span class="id" type="keyword">as</span> <span class="id" type="var">com</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H2</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">solve</span> [<span class="id" type="tactic">inversion</span> <span class="id" type="var">Heqcom</span>].<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> 0%<span class="id" type="var">nat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#term_0"><span class="id" type="constructor">term_0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">Heqcom</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> (<a class="idref" href="Distributions.html#Unit"><span class="id" type="constructor">Unit</span></a> <span class="id" type="var">st</span>) (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <span class="id" type="var">P</span> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <span class="id" type="var">y</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">H0</span> (<a class="idref" href="Distributions.html#Unit"><span class="id" type="constructor">Unit</span></a> <span class="id" type="var">st</span>) <span class="id" type="var">dst'</span> <span class="id" type="var">H2_</span> <span class="id" type="var">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">IHceval2</span> <span class="id" type="var">H0</span> <span class="id" type="var">Heqcom</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHceval2</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">n</span> &amp; <span class="id" type="var">term</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#term_S"><span class="id" type="constructor">term_S</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst'</span>:=<span class="id" type="var">dst'</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">Heqcom</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="VPHL.html#non_probabilistic"><span class="id" type="inductive">non_probabilistic</span></a> (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <span class="id" type="var">P</span> (<a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <span class="id" type="var">y</span>) (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <span class="id" type="var">y</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">constructor</span>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">constructor</span>; <span class="id" type="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#non_probabilistic_split"><span class="id" type="lemma">non_probabilistic_split</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>. 2: <span class="id" type="tactic">apply</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHceval1</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">m</span> &amp; <span class="id" type="var">term1</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHceval2</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">n</span> &amp; <span class="id" type="var">term2</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#equidistant"><span class="id" type="lemma">equidistant</span></a> <span class="id" type="var">P</span> <span class="id" type="var">y</span> <span class="id" type="var">c</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst2</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">H0</span> <span class="id" type="var">H1</span> <span class="id" type="var">term1</span> <span class="id" type="var">term2</span>). <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic"><span style="font-family: arial;">&exist;</span></span> <span class="id" type="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#term_combine"><span class="id" type="lemma">term_combine</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab43"></a><h3 class="section">A limited Hoare While Rule</h3>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_while_end"><span class="id" type="lemma">hoare_while_end</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span> <span class="id" type="var">c</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <a class="idref" href="PrImp.html#BTrue"><span class="id" type="constructor">BTrue</span></a> 1 <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">y</span> <span class="id" type="var">c</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">HP</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">HP</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <span class="id" type="var">c</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) <span class="id" type="keyword">as</span> <span class="id" type="var">com</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">step</span>; <span class="id" type="tactic">inversion</span> <span class="id" type="var">Heqcom</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <span class="id" type="var">IHstep2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHstep1</span>, <span class="id" type="var">IHstep2</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">lra</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab44"></a><h2 class="section">The Hoare While Rule</h2>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_while_det"><span class="id" type="lemma">hoare_while_det</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">D</span> <span class="id" type="var">y</span> <span class="id" type="var">c</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#non_probabilistic"><span class="id" type="inductive">non_probabilistic</span></a> <a class="idref" href="VPHL.html#D"><span class="id" type="variable">D</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#D"><span class="id" type="variable">D</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#D"><span class="id" type="variable">D</span></a> (<a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:x_'->>'_x"><span class="id" type="notation"><span style="font-family: arial;">&#8702;</span></span></a> <a class="idref" href="VPHL.html#D"><span class="id" type="variable">D</span></a> <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> (<a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">D</span> <span class="id" type="var">y</span> <span class="id" type="var">c</span> <span class="id" type="var">np</span> <span class="id" type="var">inv'</span> <span class="id" type="var">inv</span> <span class="id" type="var">cons</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#while_terminates"><span class="id" type="lemma">while_terminates</span></a> <span class="id" type="var">D</span> <span class="id" type="var">y</span> <span class="id" type="var">c</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">term</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">term</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">n</span> <span class="id" type="var">term</span>]; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">pre</span>. <span class="id" type="tactic">split</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">apply</span> <span class="id" type="var">cons</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <span class="id" type="var">c</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) <span class="id" type="keyword">as</span> <span class="id" type="var">com</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">term</span>; <span class="id" type="tactic">inversion</span> <span class="id" type="var">Heqcom</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">specialize</span> (<a class="idref" href="PrImp.html#while_end_equiv"><span class="id" type="lemma">while_end_equiv</span></a> <span class="id" type="var">y</span> <span class="id" type="var">c</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">H</span>). <span class="id" type="tactic">intros</span> <span class="id" type="var">temp</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">temp</span> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">temp</span>. <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; [<span class="id" type="tactic">destruct</span> <span class="id" type="var">pre</span>; <span class="id" type="tactic">assumption</span> | <span class="id" type="tactic">assumption</span>].<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">specialize</span> (<a class="idref" href="PrImp.html#while_loop_lift"><span class="id" type="lemma">while_loop_lift</span></a> <span class="id" type="var">y</span> <span class="id" type="var">c</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">H</span> <span class="id" type="var">step</span>). <span class="id" type="tactic">intros</span> (<span class="id" type="var">dst''</span> &amp; <span class="id" type="var">step1</span> &amp; <span class="id" type="var">step2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHterm</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#step_deterministic"><span class="id" type="lemma">step_deterministic</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst1</span>:=<span class="id" type="var">dst'0</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">step1</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">pre</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">HP</span> &amp; <span class="id" type="var">HDet</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">inv</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst</span>:=<span class="id" type="var">dst</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">inv'</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst</span>:=<span class="id" type="var">dst</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">cons</span> <span class="id" type="keyword">in</span> <span class="id" type="var">HP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab45"></a><h1 class="section">Alternative If Rules</h1>

<div class="paragraph"> </div>


<div class="paragraph"> </div>

Unscaled If rule

<div class="paragraph"> </div>

                             c-free c1 c2 x
                             all0 P1 -&gt; all0 Q1
                             all0 P2 -&gt; all0 Q2
                        <a href="P1 | y">P1 | y</a> c1 <a href="Q1 | y">Q1 | y</a> 
                        <a href="P2 | ~y">P2 | ~y</a> c2 <a href="Q2 | ~y">Q2 | ~y</a> 
<hr/>
 (hoare unscaled if)     
   <a href="P1 | y /\ P2 | ~y">P1 | y /\ P2 | ~y</a> IF y THEN c1 ELSE c2 FI <a href="Q1 | y /\ Q2 | ~y">Q1 | y /\ Q2 | ~y</a>

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" type="keyword">Inductive</span> <a name="com_id_free"><span class="id" type="inductive">com_id_free</span></a>: <a class="idref" href="PrImp.html#com"><span class="id" type="inductive">com</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="SfLib.html#aid"><span class="id" type="inductive">aid</span></a> <span style="font-family: arial;">&rarr;</span> <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="Cf_skip"><span class="id" type="constructor">Cf_skip</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">x</span>, <a class="idref" href="VPHL.html#com_id_free"><span class="id" type="inductive">com_id_free</span></a> <a class="idref" href="PrImp.html#Skip"><span class="id" type="constructor">Skip</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_ass"><span class="id" type="constructor">Cf_ass</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">x'</span> <span class="id" type="var">a</span> <span class="id" type="var">x</span>, <a class="idref" href="VPHL.html#x'"><span class="id" type="variable">x'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a><a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#ax_id_free"><span class="id" type="inductive">ax_id_free</span></a> <a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#com_id_free"><span class="id" type="inductive">com_id_free</span></a> (<a class="idref" href="VPHL.html#x'"><span class="id" type="variable">x'</span></a><a class="idref" href="PrImp.html#::x_'::='_x"><span class="id" type="notation">::=</span></a><a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_bass"><span class="id" type="constructor">Cf_bass</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span> <span class="id" type="var">b</span> <span class="id" type="var">x</span>, <a class="idref" href="VPHL.html#com_id_free"><span class="id" type="inductive">com_id_free</span></a> (<a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="PrImp.html#::x_':=='_x"><span class="id" type="notation">:==</span></a><a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_seq"><span class="id" type="constructor">Cf_seq</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">x</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#com_id_free"><span class="id" type="inductive">com_id_free</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span>  <a class="idref" href="VPHL.html#com_id_free"><span class="id" type="inductive">com_id_free</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#com_id_free"><span class="id" type="inductive">com_id_free</span></a> (<a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="PrImp.html#::x_';'_x"><span class="id" type="notation">;</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_if"><span class="id" type="constructor">Cf_if</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#com_id_free"><span class="id" type="inductive">com_id_free</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#com_id_free"><span class="id" type="inductive">com_id_free</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#com_id_free"><span class="id" type="inductive">com_id_free</span></a> (<a class="idref" href="PrImp.html#If"><span class="id" type="constructor">If</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_while"><span class="id" type="constructor">Cf_while</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span> <span class="id" type="var">c</span> <span class="id" type="var">x</span>, <a class="idref" href="VPHL.html#com_id_free"><span class="id" type="inductive">com_id_free</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#com_id_free"><span class="id" type="inductive">com_id_free</span></a> (<a class="idref" href="PrImp.html#While"><span class="id" type="constructor">While</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_toss"><span class="id" type="constructor">Cf_toss</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">x'</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">x</span>, <a class="idref" href="VPHL.html#x'"><span class="id" type="variable">x'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a><a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#com_id_free"><span class="id" type="inductive">com_id_free</span></a> (<a class="idref" href="VPHL.html#x'"><span class="id" type="variable">x'</span></a> <a class="idref" href="PrImp.html#::x_'$=('_x_','_x_')'"><span class="id" type="notation">$=(</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="PrImp.html#::x_'$=('_x_','_x_')'"><span class="id" type="notation">,</span></a><a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a><a class="idref" href="PrImp.html#::x_'$=('_x_','_x_')'"><span class="id" type="notation">)</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_btoss"><span class="id" type="constructor">Cf_btoss</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">x</span>, <a class="idref" href="VPHL.html#com_id_free"><span class="id" type="inductive">com_id_free</span></a> (<a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::x_'$=['_x_','_x_']'"><span class="id" type="notation">$=[</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="PrImp.html#::x_'$=['_x_','_x_']'"><span class="id" type="notation">,</span></a><a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a><a class="idref" href="PrImp.html#::x_'$=['_x_','_x_']'"><span class="id" type="notation">]</span></a>) <a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a>.<br/>

<br/>
<span class="id" type="keyword">Inductive</span> <a name="com_bid_free"><span class="id" type="inductive">com_bid_free</span></a>: <a class="idref" href="PrImp.html#com"><span class="id" type="inductive">com</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="SfLib.html#bid"><span class="id" type="inductive">bid</span></a> <span style="font-family: arial;">&rarr;</span> <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="Cf_skip_b"><span class="id" type="constructor">Cf_skip_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> <a class="idref" href="PrImp.html#Skip"><span class="id" type="constructor">Skip</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_ass_b"><span class="id" type="constructor">Cf_ass_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">x</span> <span class="id" type="var">a</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> (<a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a><a class="idref" href="PrImp.html#::x_'::='_x"><span class="id" type="notation">::=</span></a><a class="idref" href="VPHL.html#a"><span class="id" type="variable">a</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_bass_b"><span class="id" type="constructor">Cf_bass_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y'</span> <span class="id" type="var">b</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a><a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> (<a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a><a class="idref" href="PrImp.html#::x_':=='_x"><span class="id" type="notation">:==</span></a><a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_seq_b"><span class="id" type="constructor">Cf_seq_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">y</span>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span>  <a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> (<a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="PrImp.html#::x_';'_x"><span class="id" type="notation">;</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_if_b"><span class="id" type="constructor">Cf_if_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y'</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a><a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> (<a class="idref" href="PrImp.html#If"><span class="id" type="constructor">If</span></a> <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_while_b"><span class="id" type="constructor">Cf_while_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y'</span> <span class="id" type="var">c</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a><a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> (<a class="idref" href="PrImp.html#While"><span class="id" type="constructor">While</span></a> <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_toss_b"><span class="id" type="constructor">Cf_toss_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">x</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> (<a class="idref" href="VPHL.html#x"><span class="id" type="variable">x</span></a> <a class="idref" href="PrImp.html#::x_'$=('_x_','_x_')'"><span class="id" type="notation">$=(</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="PrImp.html#::x_'$=('_x_','_x_')'"><span class="id" type="notation">,</span></a><a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a><a class="idref" href="PrImp.html#::x_'$=('_x_','_x_')'"><span class="id" type="notation">)</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><br/>
&nbsp;&nbsp;| <a name="Cf_btoss_b"><span class="id" type="constructor">Cf_btoss_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y'</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">y</span>, <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a><a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> (<a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a><a class="idref" href="PrImp.html#::x_'$=['_x_','_x_']'"><span class="id" type="notation">$=[</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="PrImp.html#::x_'$=['_x_','_x_']'"><span class="id" type="notation">,</span></a><a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a><a class="idref" href="PrImp.html#::x_'$=['_x_','_x_']'"><span class="id" type="notation">]</span></a>) <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="free_then_unassigned"><span class="id" type="lemma">free_then_unassigned</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">c</span> <span class="id" type="var">y</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">c</span> <span class="id" type="var">y</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">solve</span> [<span class="id" type="tactic">repeat</span> <span class="id" type="tactic">constructor</span>; <span class="id" type="tactic">trivial</span>].<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="vacuous_P"><span class="id" type="lemma">vacuous_P</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">b</span> <span class="id" type="var">dstX</span> <span class="id" type="var">dstY</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dstX"><span class="id" type="variable">dstX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dstY"><span class="id" type="variable">dstY</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dstX"><span class="id" type="variable">dstX</span></a> (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dstY"><span class="id" type="variable">dstY</span></a> (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">P</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHP1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHP2</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHP1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>; <span class="id" type="tactic">left</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHP2</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>; <span class="id" type="tactic">right</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Lemma 7.4 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="vacuous_P_l"><span class="id" type="lemma">vacuous_P_l</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dstX</span> <span class="id" type="var">dstY</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dstX"><span class="id" type="variable">dstX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dstY"><span class="id" type="variable">dstY</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dstX"><span class="id" type="variable">dstX</span></a>) (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dstY"><span class="id" type="variable">dstY</span></a>) (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">P</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">d</span>:=<span class="id" type="var">dstY</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">d</span>:=<span class="id" type="var">dstX</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">d</span>:=<span class="id" type="var">dstY</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">d</span>:=<span class="id" type="var">dstX</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">d</span>:=<span class="id" type="var">dstY</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">d</span>:=<span class="id" type="var">dstX</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">H1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">destruct</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHP1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHP2</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">destruct</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">left</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">IHP1</span>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">right</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">IHP2</span>. <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Lemma 7.5 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="vacuous_P_r"><span class="id" type="lemma">vacuous_P_r</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">dst2</span> <span class="id" type="var">dstX</span> <span class="id" type="var">dstY</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dstX"><span class="id" type="variable">dstX</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dstY"><span class="id" type="variable">dstY</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dstX"><span class="id" type="variable">dstX</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a>) (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dstY"><span class="id" type="variable">dstY</span></a> <a class="idref" href="VPHL.html#dst2"><span class="id" type="variable">dst2</span></a>) (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">P</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHP1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHP2</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHP1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>; <span class="id" type="tactic">left</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHP2</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>; <span class="id" type="tactic">right</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Note: The third case arguably shouldn't exist, but the current format of hexp 
    and heval does prohibit a hexp to have a p \notin <span class="inlinecode">0,1</span> on the RHS 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Inductive</span> <a name="all_zero"><span class="id" type="inductive">all_zero</span></a>: <a class="idref" href="VPHL.html#hexp"><span class="id" type="inductive">hexp</span></a> <span style="font-family: arial;">&rarr;</span> <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="zero_eq"><span class="id" type="constructor">zero_eq</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">b</span>, <a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> 0)<br/>
&nbsp;&nbsp;| <a name="zero_lt"><span class="id" type="constructor">zero_lt</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">p</span> <span class="id" type="var">b</span>, <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'>'_x"><span class="id" type="notation">&gt;</span></a> 0 <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> (<a class="idref" href="VPHL.html#HLt"><span class="id" type="constructor">HLt</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)<br/>
&nbsp;&nbsp;| <a name="zero_gt"><span class="id" type="constructor">zero_gt</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">p</span> <span class="id" type="var">b</span>, <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> 0 <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> (<a class="idref" href="VPHL.html#HGt"><span class="id" type="constructor">HGt</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)<br/>
&nbsp;&nbsp;| <a name="zero_or_l"><span class="id" type="constructor">zero_or_l</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span>, <a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> (<a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a>)<br/>
&nbsp;&nbsp;| <a name="zero_or_r"><span class="id" type="constructor">zero_or_r</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span>, <a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> (<a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a>)<br/>
&nbsp;&nbsp;| <a name="zero_and"><span class="id" type="constructor">zero_and</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span>, <a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a>).<br/>

<br/>
</div>

<div class="doc">
Lemma 7.6 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="neg_b_all_zero"><span class="id" type="lemma">neg_b_all_zero</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">b</span> <span class="id" type="var">dst</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;(<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation"><span style="font-family: arial;">&harr;</span></span></a> <a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">b</span> <span class="id" type="var">dst</span> <span class="id" type="var">Pr0</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">intros</span> <span class="id" type="var">HP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">P</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">HP</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <span class="id" type="var">HP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">HP</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">HP</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">constructor</span>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">destruct</span> <span class="id" type="var">HP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">constructor</span>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">destruct</span> <span class="id" type="var">HP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#zero_or_l"><span class="id" type="constructor">zero_or_l</span></a>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#zero_or_r"><span class="id" type="constructor">zero_or_r</span></a>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">intros</span> <span class="id" type="var">Z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">Z</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">rewrite</span> <a class="idref" href="Distributions.html#pr_conj_0_r"><span class="id" type="lemma">pr_conj_0_r</span></a>; <span class="id" type="tactic">auto</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Two additional premutation rules will go here for lack of better location. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="dist_update_prob_permute_b"><span class="id" type="lemma">dist_update_prob_permute_b</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst</span> <span class="id" type="var">y1</span> <span class="id" type="var">y2</span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#y1"><span class="id" type="variable">y1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a> <a class="idref" href="VPHL.html#y2"><span class="id" type="variable">y2</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="VPHL.html#y1"><span class="id" type="variable">y1</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> (<a class="idref" href="PrImp.html#prob_update_b"><span class="id" type="definition">prob_update_b</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#y1"><span class="id" type="variable">y1</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a>) <a class="idref" href="VPHL.html#y2"><span class="id" type="variable">y2</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="PrImp.html#prob_update_b"><span class="id" type="definition">prob_update_b</span></a> (<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#y2"><span class="id" type="variable">y2</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>) <a class="idref" href="VPHL.html#y1"><span class="id" type="variable">y1</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="VPHL.html#b_free_imp_b"><span class="id" type="lemma">b_free_imp_b</span></a> <span class="id" type="keyword">in</span> * <span class="id" type="tactic">by</span> <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="SfLib.html#update_permute_b"><span class="id" type="lemma">update_permute_b</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">replace</span> (<a class="idref" href="SfLib.html#update_b"><span class="id" type="definition">update_b</span></a> (<a class="idref" href="SfLib.html#update_b"><span class="id" type="definition">update_b</span></a> <span class="id" type="var">t</span> <span class="id" type="var">y1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#false"><span class="id" type="constructor">false</span></a>) <span class="id" type="var">y2</span> (<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <span class="id" type="var">b</span> <span class="id" type="var">t</span>)) <span class="id" type="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="SfLib.html#update_b"><span class="id" type="definition">update_b</span></a> (<a class="idref" href="SfLib.html#update_b"><span class="id" type="definition">update_b</span></a> <span class="id" type="var">t</span> <span class="id" type="var">y2</span> (<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <span class="id" type="var">b</span> <span class="id" type="var">t</span>)) <span class="id" type="var">y1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#false"><span class="id" type="constructor">false</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="SfLib.html#update_permute_b"><span class="id" type="lemma">update_permute_b</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_bid_false_iff"><span class="id" type="lemma">beq_bid_false_iff</span></a>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_bid_false_iff"><span class="id" type="lemma">beq_bid_false_iff</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHdst1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHdst2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="dist_update_b_permute"><span class="id" type="lemma">dist_update_b_permute</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">dst</span> <span class="id" type="var">y1</span> <span class="id" type="var">y2</span> <span class="id" type="var">b1</span> <span class="id" type="var">b2</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#y1"><span class="id" type="variable">y1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a> <a class="idref" href="VPHL.html#y2"><span class="id" type="variable">y2</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> <a class="idref" href="VPHL.html#b2"><span class="id" type="variable">b2</span></a> <a class="idref" href="VPHL.html#y1"><span class="id" type="variable">y1</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#bx_bid_free"><span class="id" type="inductive">bx_bid_free</span></a> <a class="idref" href="VPHL.html#b1"><span class="id" type="variable">b1</span></a> <a class="idref" href="VPHL.html#y2"><span class="id" type="variable">y2</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> (<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#y1"><span class="id" type="variable">y1</span></a> <a class="idref" href="VPHL.html#b1"><span class="id" type="variable">b1</span></a>) <a class="idref" href="VPHL.html#y2"><span class="id" type="variable">y2</span></a> <a class="idref" href="VPHL.html#b2"><span class="id" type="variable">b2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> (<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#y2"><span class="id" type="variable">y2</span></a> <a class="idref" href="VPHL.html#b2"><span class="id" type="variable">b2</span></a>) <a class="idref" href="VPHL.html#y1"><span class="id" type="variable">y1</span></a> <a class="idref" href="VPHL.html#b1"><span class="id" type="variable">b1</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">dst</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="VPHL.html#b_free_imp_b"><span class="id" type="lemma">b_free_imp_b</span></a> <span class="id" type="keyword">in</span> * <span class="id" type="tactic">by</span> <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="SfLib.html#update_permute_b"><span class="id" type="lemma">update_permute_b</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_bid_false_iff"><span class="id" type="lemma">beq_bid_false_iff</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHdst1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHdst2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="bass_steps"><span class="id" type="lemma">bass_steps</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">c</span> <span class="id" type="var">y</span> <span class="id" type="var">b</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="PrImp.html#BTrue"><span class="id" type="constructor">BTrue</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation"><span style="font-family: arial;">&or;</span></span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="PrImp.html#BFalse"><span class="id" type="constructor">BFalse</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a><a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a><a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">)</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H1</span>.<br/>
&nbsp;&nbsp;+  <span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_Skip"><span class="id" type="constructor">E_Skip</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">replace</span> (<a class="idref" href="Distributions.html#Unit"><span class="id" type="constructor">Unit</span></a> (<a class="idref" href="SfLib.html#update"><span class="id" type="definition">update</span></a> <span class="id" type="var">st</span> <span class="id" type="var">x</span> <span class="id" type="var">n</span>)) <span class="id" type="keyword">with</span> (<a class="idref" href="PrImp.html#dist_update"><span class="id" type="definition">dist_update</span></a> (<a class="idref" href="Distributions.html#Unit"><span class="id" type="constructor">Unit</span></a> <span class="id" type="var">st</span>) <span class="id" type="var">x</span> (<a class="idref" href="PrImp.html#ANum"><span class="id" type="constructor">ANum</span></a> <span class="id" type="var">n</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="PrImp.html#dist_update_non_interference"><span class="id" type="lemma">dist_update_non_interference</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_Assign"><span class="id" type="constructor">E_Assign</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="PrImp.html#update_non_interference"><span class="id" type="lemma">update_non_interference</span></a>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">replace</span> (<a class="idref" href="Distributions.html#Unit"><span class="id" type="constructor">Unit</span></a> (<a class="idref" href="SfLib.html#update_b"><span class="id" type="definition">update_b</span></a> <span class="id" type="var">st</span> <span class="id" type="var">y0</span> (<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> <span class="id" type="var">b0</span> <span class="id" type="var">st</span>))) <span class="id" type="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> (<a class="idref" href="Distributions.html#Unit"><span class="id" type="constructor">Unit</span></a> <span class="id" type="var">st</span>) <span class="id" type="var">y0</span> <span class="id" type="var">b0</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#dist_update_b_permute"><span class="id" type="lemma">dist_update_b_permute</span></a>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_BAssign"><span class="id" type="constructor">E_BAssign</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">constructor</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_Seq"><span class="id" type="constructor">E_Seq</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst'</span>:=(<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <span class="id" type="var">dst'</span> <span class="id" type="var">y</span> <span class="id" type="var">b</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHceval1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHceval2</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_IfTrue"><span class="id" type="constructor">E_IfTrue</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a> <span class="id" type="var">y0</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_bid_false_iff"><span class="id" type="lemma">beq_bid_false_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H3</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHceval</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_IfFalse"><span class="id" type="constructor">E_IfFalse</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a> <span class="id" type="var">y0</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_bid_false_iff"><span class="id" type="lemma">beq_bid_false_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H3</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHceval</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_WhileEnd"><span class="id" type="constructor">E_WhileEnd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a> <span class="id" type="var">y0</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_bid_false_iff"><span class="id" type="lemma">beq_bid_false_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H2</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_WhileLoop"><span class="id" type="constructor">E_WhileLoop</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst'</span>:=<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <span class="id" type="var">dst'</span> <span class="id" type="var">y</span> <span class="id" type="var">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a> <span class="id" type="var">y0</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_bid_false_iff"><span class="id" type="lemma">beq_bid_false_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H2</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHceval1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHceval2</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">replace</span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <span class="id" type="var">p</span> <span class="id" type="var">v</span> (<a class="idref" href="Distributions.html#Unit"><span class="id" type="constructor">Unit</span></a> (<a class="idref" href="SfLib.html#update"><span class="id" type="definition">update</span></a> <span class="id" type="var">st</span> <span class="id" type="var">x</span> 1)) (<a class="idref" href="Distributions.html#Unit"><span class="id" type="constructor">Unit</span></a> (<a class="idref" href="SfLib.html#update"><span class="id" type="definition">update</span></a> <span class="id" type="var">st</span> <span class="id" type="var">x</span> 0)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">with</span> (<a class="idref" href="PrImp.html#prob_update"><span class="id" type="definition">prob_update</span></a> (<a class="idref" href="Distributions.html#Unit"><span class="id" type="constructor">Unit</span></a> <span class="id" type="var">st</span>) <span class="id" type="var">x</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="PrImp.html#prob_update_non_interference"><span class="id" type="lemma">prob_update_non_interference</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_Toss"><span class="id" type="constructor">E_Toss</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">inversion</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">replace</span> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <span class="id" type="var">p</span> <span class="id" type="var">v</span> (<a class="idref" href="Distributions.html#Unit"><span class="id" type="constructor">Unit</span></a> (<a class="idref" href="SfLib.html#update_b"><span class="id" type="definition">update_b</span></a> <span class="id" type="var">st</span> <span class="id" type="var">y0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#true"><span class="id" type="constructor">true</span></a>)) (<a class="idref" href="Distributions.html#Unit"><span class="id" type="constructor">Unit</span></a> (<a class="idref" href="SfLib.html#update_b"><span class="id" type="definition">update_b</span></a> <span class="id" type="var">st</span> <span class="id" type="var">y0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#false"><span class="id" type="constructor">false</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">with</span> (<a class="idref" href="PrImp.html#prob_update_b"><span class="id" type="definition">prob_update_b</span></a> (<a class="idref" href="Distributions.html#Unit"><span class="id" type="constructor">Unit</span></a> <span class="id" type="var">st</span>) <span class="id" type="var">y0</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>) <span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#dist_update_prob_permute_b"><span class="id" type="lemma">dist_update_prob_permute_b</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_BToss"><span class="id" type="constructor">E_BToss</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">subst</span>; <span class="id" type="tactic">constructor</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_Lift"><span class="id" type="constructor">E_Lift</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHceval1</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHceval2</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab46"></a><h3 class="section">Unscaled If</h3>

<div class="paragraph"> </div>

  The all_zero hypotheses say if P2's base elements are all Pr(b) = 0, 
     Pr(b) &lt; p (for p&gt;0) and Pr(b) &gt; p (for negative p) the same must be true of Q.
     This rules out the case where b = 1, c2 contains a loop, and Q2 contains 
     a false judgement. (Or the similar case for c1.)                            
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_if_unscaled"><span class="id" type="lemma">hoare_if_unscaled</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span> <span class="id" type="var">Q1</span> <span class="id" type="var">Q2</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">y</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;(<a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> <a class="idref" href="VPHL.html#Q1"><span class="id" type="variable">Q1</span></a>) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;(<a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> <a class="idref" href="VPHL.html#Q2"><span class="id" type="variable">Q2</span></a>) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#Q1"><span class="id" type="variable">Q1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#Q2"><span class="id" type="variable">Q2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">)</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#Q1"><span class="id" type="variable">Q1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#Q2"><span class="id" type="variable">Q2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span> <span class="id" type="var">Q1</span> <span class="id" type="var">Q2</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">y</span> <span class="id" type="var">cf1</span> <span class="id" type="var">cf2</span> <span class="id" type="var">zero1</span> <span class="id" type="var">zero2</span> <span class="id" type="var">HP1</span> <span class="id" type="var">HP2</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="Distributions.html#pr_normality"><span class="id" type="lemma">pr_normality</span></a> <span class="id" type="var">dst</span> (<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span>))); <span class="id" type="tactic">intros</span> <span class="id" type="var">temp</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation"><span style="font-family: arial;">&or;</span></span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation"><span style="font-family: arial;">&or;</span></span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1) <span class="id" type="keyword">as</span> <span class="id" type="var">H</span> <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">temp</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Pr1</span> | <span class="id" type="var">H</span>]; [ | <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Pr0</span> | <span class="id" type="var">v</span>]].<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">pre</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">preT</span> <span class="id" type="var">preF</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#hoare_if_true"><span class="id" type="lemma">hoare_if_true</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">P</span>:=<span class="id" type="var">P1</span>) (<span class="id" type="var">c1</span>:=<span class="id" type="var">c1</span>) (<span class="id" type="var">c2</span>:=<span class="id" type="var">c2</span>) (<span class="id" type="var">dst</span>:=<span class="id" type="var">dst</span>); <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="PrImp.html#if_true_equiv"><span class="id" type="lemma">if_true_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#free_then_unassigned"><span class="id" type="lemma">free_then_unassigned</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">cf1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#probability_preserved"><span class="id" type="lemma">probability_preserved</span></a> <span class="id" type="var">c1</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">y</span> <span class="id" type="var">cf1</span> <span class="id" type="var">step</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">Pr1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Pr1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Pr1'</span>. <span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Pr1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="PrImp.html#prb_complement_1"><span class="id" type="lemma">prb_complement_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Pr1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#neg_b_all_zero"><span class="id" type="lemma">neg_b_all_zero</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">P</span>:=<span class="id" type="var">P2</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">Pr1</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">Pr1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">preF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">zero2</span> <span class="id" type="var">preF</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#neg_b_all_zero"><span class="id" type="lemma">neg_b_all_zero</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_complement_1"><span class="id" type="lemma">pr_complement_1</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">pre</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">preT</span> <span class="id" type="var">preF</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="PrImp.html#if_false_equiv"><span class="id" type="lemma">if_false_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#free_then_unassigned"><span class="id" type="lemma">free_then_unassigned</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">cf2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#probability_preserved"><span class="id" type="lemma">probability_preserved</span></a> <span class="id" type="var">c2</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">y</span> <span class="id" type="var">cf2</span> <span class="id" type="var">step</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">Pr0'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Pr0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Pr0'</span>. <span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Pr0'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#neg_b_all_zero"><span class="id" type="lemma">neg_b_all_zero</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">P</span>:=<span class="id" type="var">P1</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">Pr0</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">Pr0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">preT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">zero1</span> <span class="id" type="var">preT</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#neg_b_all_zero"><span class="id" type="lemma">neg_b_all_zero</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#hoare_if_false"><span class="id" type="lemma">hoare_if_false</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">P</span>:=<span class="id" type="var">P2</span>) (<span class="id" type="var">c1</span>:=<span class="id" type="var">c1</span>) (<span class="id" type="var">c2</span>:=<span class="id" type="var">c2</span>) (<span class="id" type="var">dst</span>:=<span class="id" type="var">dst</span>); <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="var">remember</span> (<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span>) <span class="id" type="keyword">as</span> <span class="id" type="var">q</span>. <span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Heqq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#fork_on_b_plus"><span class="id" type="lemma">fork_on_b_plus</span></a> (<a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <span class="id" type="var">c1</span> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <span class="id" type="var">c2</span> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a>) <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span>) <span class="id" type="var">q</span> <span class="id" type="var">v</span> <span class="id" type="var">step</span> <span class="id" type="var">Heqq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> (<span class="id" type="var">dst1</span> &amp; <span class="id" type="var">dst0</span> &amp; <span class="id" type="var">dst''</span> &amp; <span class="id" type="var">E1</span> &amp; <span class="id" type="var">E0</span> &amp; <span class="id" type="var">Eq</span> &amp; <span class="id" type="var">step2</span> &amp; <span class="id" type="var">Eq2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#dst_equiv_iff"><span class="id" type="lemma">dst_equiv_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">Eq</span> <span class="id" type="keyword">in</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">pre</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">preT</span> <span class="id" type="var">preF</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#step_split"><span class="id" type="lemma">step_split</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">step2</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">dst1'</span> &amp; <span class="id" type="var">dst0'</span> &amp; <span class="id" type="var">Eqm</span> &amp; <span class="id" type="var">stepT</span> &amp; <span class="id" type="var">stepF</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#dst_equiv_iff"><span class="id" type="lemma">dst_equiv_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Eqm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_true_equiv"><span class="id" type="lemma">if_true_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">stepT</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_false_equiv"><span class="id" type="lemma">if_false_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">stepF</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#free_then_unassigned"><span class="id" type="lemma">free_then_unassigned</span></a> <span class="id" type="var">c1</span> <span class="id" type="var">y</span> <span class="id" type="var">cf1</span>). <span class="id" type="tactic">intros</span> <span class="id" type="var">cf1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#free_then_unassigned"><span class="id" type="lemma">free_then_unassigned</span></a> <span class="id" type="var">c2</span> <span class="id" type="var">y</span> <span class="id" type="var">cf2</span>). <span class="id" type="tactic">intros</span> <span class="id" type="var">cf2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#probability_preserved"><span class="id" type="lemma">probability_preserved</span></a> <span class="id" type="var">c1</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst1'</span> <span class="id" type="var">y</span> <span class="id" type="var">cf1'</span> <span class="id" type="var">stepT</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">E1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#probability_preserved"><span class="id" type="lemma">probability_preserved</span></a> <span class="id" type="var">c2</span> <span class="id" type="var">dst0</span> <span class="id" type="var">dst0'</span> <span class="id" type="var">y</span> <span class="id" type="var">cf2'</span> <span class="id" type="var">stepF</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">E0'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">E1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">E1'</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">E0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">E0'</span>. <span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">E1'</span>, <span class="id" type="var">E0'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" type="tactic">assert</span>(<span class="id" type="var">H</span>: <span class="id" type="var">c1</span> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <span class="id" type="var">q</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1</span> (<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <span class="id" type="var">dst1</span> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#BFalse"><span class="id" type="constructor">BFalse</span></a>)<a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">)</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <span class="id" type="var">q</span> <span class="id" type="var">v</span> <span class="id" type="var">dst1'</span> (<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <span class="id" type="var">dst1'</span> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#BFalse"><span class="id" type="constructor">BFalse</span></a>)<a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">)</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_Lift"><span class="id" type="constructor">E_Lift</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#bass_steps"><span class="id" type="lemma">bass_steps</span></a>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#hoare_triple"><span class="id" type="definition">hoare_triple</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">HP1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">HP1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#vacuous_P_l"><span class="id" type="lemma">vacuous_P_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">dstX</span>:=<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <span class="id" type="var">dst1'</span> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#BFalse"><span class="id" type="constructor">BFalse</span></a>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#dist_update_false"><span class="id" type="lemma">dist_update_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#vacuous_P_l"><span class="id" type="lemma">vacuous_P_l</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">dstX</span>:=<span class="id" type="var">dst0</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#dist_update_false"><span class="id" type="lemma">dist_update_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" type="tactic">assert</span>(<span class="id" type="var">H</span>: <span class="id" type="var">c2</span> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <span class="id" type="var">q</span> <span class="id" type="var">v</span> (<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <span class="id" type="var">dst0</span> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#BTrue"><span class="id" type="constructor">BTrue</span></a>)) <span class="id" type="var">dst0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <span class="id" type="var">q</span> <span class="id" type="var">v</span> (<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <span class="id" type="var">dst0'</span> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#BTrue"><span class="id" type="constructor">BTrue</span></a>)) <span class="id" type="var">dst0'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_Lift"><span class="id" type="constructor">E_Lift</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#bass_steps"><span class="id" type="lemma">bass_steps</span></a>; <span class="id" type="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#hoare_triple"><span class="id" type="definition">hoare_triple</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">HP2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <span class="id" type="var">HP2</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#vacuous_P_r"><span class="id" type="lemma">vacuous_P_r</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">dstX</span>:=<a class="idref" href="PrImp.html#dist_update_b"><span class="id" type="definition">dist_update_b</span></a> <span class="id" type="var">dst0'</span> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#BTrue"><span class="id" type="constructor">BTrue</span></a>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_complement_1"><span class="id" type="lemma">prb_complement_1</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#dist_update_true"><span class="id" type="lemma">dist_update_true</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_complement_1"><span class="id" type="lemma">prb_complement_1</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#vacuous_P_r"><span class="id" type="lemma">vacuous_P_r</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">dstX</span>:=<span class="id" type="var">dst1</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_complement_1"><span class="id" type="lemma">prb_complement_1</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_complement_1"><span class="id" type="lemma">prb_complement_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#dist_update_true"><span class="id" type="lemma">dist_update_true</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab47"></a><h2 class="section">The General If Rule</h2>

<div class="paragraph"> </div>

General If rule

<div class="paragraph"> </div>

                         all0 P1 -&gt; all0 Q1
                         all0 P2 -&gt; all0 Q2
                         unassigned y c1 c2
                    <a href="1/p * P1">1/p * P1</a> c1 <a href="1/p * Q">1/p * Q</a>
                <a href="1/(1-p) * P2">1/(1-p) * P2</a> c2 <a href="1/(1-p) * Q">1/(1-p) * Q</a>
<hr/>
  (hoare_if_gen)
    <a href="Pr(y) = p /\ P /\ P2">Pr(y) = p /\ P /\ P2</a> IF y THEN c1 ELSE c2 FI <a href="Q1 /\ Q2">Q1 /\ Q2</a> 

<div class="paragraph"> </div>

 We can remove the HTrue y's without changing the proof of this rule 
    (or much changing its content.) 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_if_gen"><span class="id" type="lemma">hoare_if_gen</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span> <span class="id" type="var">Q1</span> <span class="id" type="var">Q2</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">y</span> <span class="id" type="var">p</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;(<a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> <a class="idref" href="VPHL.html#Q1"><span class="id" type="variable">Q1</span></a>) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;(<a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> <a class="idref" href="VPHL.html#Q2"><span class="id" type="variable">Q2</span></a>) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)) (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#Q1"><span class="id" type="variable">Q1</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>)) (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#Q2"><span class="id" type="variable">Q2</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>))<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">)</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#Q1"><span class="id" type="variable">Q1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#Q2"><span class="id" type="variable">Q2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span> <span class="id" type="var">Q1</span> <span class="id" type="var">Q2</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">y</span> <span class="id" type="var">p</span> <span class="id" type="var">cf1</span> <span class="id" type="var">cf2</span> <span class="id" type="var">zero1</span> <span class="id" type="var">zero2</span> <span class="id" type="var">HP1</span> <span class="id" type="var">HP2</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">pre</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">prob</span> &amp; <span class="id" type="var">preT</span> &amp; <span class="id" type="var">preF</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="Distributions.html#pr_normality"><span class="id" type="lemma">pr_normality</span></a> <span class="id" type="var">dst</span> (<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span>))); <span class="id" type="tactic">rewrite</span> <span class="id" type="var">prob</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">temp</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation"><span style="font-family: arial;">&or;</span></span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation"><span style="font-family: arial;">&or;</span></span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1) <span class="id" type="keyword">as</span> <span class="id" type="var">H</span> <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">temp</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">replace</span> (<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <span class="id" type="var">dst</span> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span>) <span class="id" type="var">p</span>)) <span class="id" type="keyword">with</span> (<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">p</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Pr1</span> | <span class="id" type="var">H</span>]; [ | <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Pr0</span> | <span class="id" type="var">v</span>]].<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">Pr1</span> <span class="id" type="keyword">in</span> *. <span class="id" type="tactic">clear</span> <span class="id" type="var">Pr1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_true_equiv"><span class="id" type="lemma">if_true_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#probability_preserved"><span class="id" type="lemma">probability_preserved</span></a> <span class="id" type="var">c1</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">y</span> <span class="id" type="var">cf1</span> <span class="id" type="var">step</span>). <span class="id" type="tactic">intros</span> <span class="id" type="var">Pr1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">prob</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Pr1'</span>. <span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Pr1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#condition_on_1"><span class="id" type="lemma">condition_on_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">preT</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#condition_on_1"><span class="id" type="lemma">condition_on_1</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">replace</span> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a>1) <span class="id" type="keyword">with</span> (1) <span class="id" type="keyword">in</span> <span class="id" type="var">HP1</span> <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="VPHL.html#scale_1"><span class="id" type="lemma">scale_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">HP1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">HP1</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst</span>:=<span class="id" type="var">dst</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_complement_1"><span class="id" type="lemma">prb_complement_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#neg_b_all_zero"><span class="id" type="lemma">neg_b_all_zero</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">P</span>:=<span class="id" type="var">P2</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">prob</span> <span class="id" type="keyword">in</span> <span class="id" type="var">preF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">zero2</span> <span class="id" type="var">preF</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#neg_b_all_zero"><span class="id" type="lemma">neg_b_all_zero</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_complement_1"><span class="id" type="lemma">prb_complement_1</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">Pr0</span> <span class="id" type="keyword">in</span> *. <span class="id" type="tactic">clear</span> <span class="id" type="var">Pr0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="PrImp.html#if_false_equiv"><span class="id" type="lemma">if_false_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#probability_preserved"><span class="id" type="lemma">probability_preserved</span></a> <span class="id" type="var">c2</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">y</span> <span class="id" type="var">cf2</span> <span class="id" type="var">step</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">Pr0'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">prob</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Pr0'</span>. <span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Pr0'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#neg_b_all_zero"><span class="id" type="lemma">neg_b_all_zero</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">P</span>:=<span class="id" type="var">P1</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">prob</span> <span class="id" type="keyword">in</span> <span class="id" type="var">preT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">zero1</span> <span class="id" type="var">preT</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#neg_b_all_zero"><span class="id" type="lemma">neg_b_all_zero</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="PrImp.html#prb_complement_0"><span class="id" type="lemma">prb_complement_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="PrImp.html#prb_complement_0"><span class="id" type="lemma">prb_complement_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Pr0'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#condition_on_1"><span class="id" type="lemma">condition_on_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">preF</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#condition_on_1"><span class="id" type="lemma">condition_on_1</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">replace</span> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a>0<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="keyword">with</span> (1) <span class="id" type="keyword">in</span> <span class="id" type="var">HP2</span> <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="VPHL.html#scale_1"><span class="id" type="lemma">scale_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">HP2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">HP2</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst</span>:=<span class="id" type="var">dst</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_complement_0"><span class="id" type="lemma">prb_complement_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#fork_on_b_plus"><span class="id" type="lemma">fork_on_b_plus</span></a> (<a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <span class="id" type="var">c1</span> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <span class="id" type="var">c2</span> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a>) <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span>) <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">step</span> <span class="id" type="var">prob</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> (<span class="id" type="var">dst1</span> &amp; <span class="id" type="var">dst0</span> &amp; <span class="id" type="var">dst''</span> &amp; <span class="id" type="var">E1</span> &amp; <span class="id" type="var">E0</span> &amp; <span class="id" type="var">Eq</span> &amp; <span class="id" type="var">step2</span> &amp; <span class="id" type="var">Eq2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#dst_equiv_iff"><span class="id" type="lemma">dst_equiv_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">Eq</span> <span class="id" type="keyword">in</span> <span class="id" type="var">preT</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">Eq</span> <span class="id" type="keyword">in</span> <span class="id" type="var">preF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">step2</span>; <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">rename</span> <span class="id" type="var">dst2'</span> <span class="id" type="var">into</span> <span class="id" type="var">dst0'</span>, <span class="id" type="var">H4</span> <span class="id" type="var">into</span> <span class="id" type="var">stepT</span>, <span class="id" type="var">H5</span> <span class="id" type="var">into</span> <span class="id" type="var">stepF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#dst_equiv_iff"><span class="id" type="lemma">dst_equiv_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_true_equiv"><span class="id" type="lemma">if_true_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">stepT</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_false_equiv"><span class="id" type="lemma">if_false_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">stepF</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#probability_preserved"><span class="id" type="lemma">probability_preserved</span></a> <span class="id" type="var">c1</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst1'</span> <span class="id" type="var">y</span> <span class="id" type="var">cf1</span> <span class="id" type="var">stepT</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">E1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#probability_preserved"><span class="id" type="lemma">probability_preserved</span></a> <span class="id" type="var">c2</span> <span class="id" type="var">dst0</span> <span class="id" type="var">dst0'</span> <span class="id" type="var">y</span> <span class="id" type="var">cf2</span> <span class="id" type="var">stepF</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">E0'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">E1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">E1'</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">E0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">E0'</span>. <span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">E1'</span>, <span class="id" type="var">E0'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">apply</span> <span class="id" type="var">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_1"><span class="id" type="lemma">scale_equiv_1</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_1"><span class="id" type="lemma">scale_equiv_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">preT</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <span class="id" type="var">HP1</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">stepT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">apply</span> <span class="id" type="var">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_0"><span class="id" type="lemma">scale_equiv_0</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_0"><span class="id" type="lemma">scale_equiv_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">preF</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <span class="id" type="var">HP2</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">stepF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab48"></a><h2 class="section">Inverse If Rules:</h2>

       We can also move the scaling to the main condition to avoid worrying about
       dividing by zero.

<div class="paragraph"> </div>

                         unassigned y c1 c2
                       all0 p*P1 -&gt; all0 p*Q1
                   all0 (1-p)*P2 -&gt; all0 (1-p)*Q2
                          <a href="P1">P1</a> c1 <a href="Q">Q</a>
                          <a href="P2">P2</a> c2 <a href="Q">Q</a>
<hr/>
  (hoare_if_gen')
    <a href="Pr(y) = p /\ p*P /\ P2">Pr(y) = p /\ p*P /\ P2</a> IF y THEN c1 ELSE c2 FI <a href="p*Q1 /\ (1-p)*Q2">p*Q1 /\ (1-p)*Q2</a> 

<div class="paragraph"> </div>


</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="scale_twice"><span class="id" type="lemma">scale_twice</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">p</span> <span class="id" type="var">q</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="VPHL.html#q"><span class="id" type="variable">q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> (<a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><a class="idref" href="VPHL.html#q"><span class="id" type="variable">q</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">P</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">solve</span> [<span class="id" type="tactic">replace</span> (<span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*(</span></a><span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">r</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="keyword">with</span> (<span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'*'_x"><span class="id" type="notation">*</span></a><span class="id" type="var">r</span>) <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>; <span class="id" type="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHP1</span>, <span class="id" type="var">IHP2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHP1</span>, <span class="id" type="var">IHP2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="scale_inversion"><span class="id" type="lemma">scale_inversion</span></a>: <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span> <span class="id" type="var">p</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a> 0 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;(<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation"><span style="font-family: arial;">&harr;</span></span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#Q"><span class="id" type="variable">Q</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">Q</span> <span class="id" type="var">p</span> <span class="id" type="var">NZ</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#scale_twice"><span class="id" type="lemma">scale_twice</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_1_l"><span class="id" type="axiom">Rmult_1_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r"><span class="id" type="lemma">Rinv_r</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">symmetry</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_1"><span class="id" type="lemma">scale_1</span></a>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">intros</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#scale_twice"><span class="id" type="lemma">scale_twice</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_1_l"><span class="id" type="axiom">Rmult_1_l</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_l_sym"><span class="id" type="lemma">Rinv_l_sym</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_1"><span class="id" type="lemma">scale_1</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="scale_cond"><span class="id" type="lemma">scale_cond</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">p</span> <span class="id" type="var">b</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>) <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">p</span> <span class="id" type="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">P</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHP1</span>, <span class="id" type="var">IHP2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHP1</span>, <span class="id" type="var">IHP2</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="scale_equiv_1'"><span class="id" type="lemma">scale_equiv_1'</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst0</span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst0"><span class="id" type="variable">dst0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;(<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst0"><span class="id" type="variable">dst0</span></a>) (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>) <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation"><span style="font-family: arial;">&harr;</span></span></a> <a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst0</span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">Pr1</span> <span class="id" type="var">Pr0</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#scale_cond"><span class="id" type="lemma">scale_cond</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <span class="id" type="var">P</span> <span class="id" type="var">p</span>) <span class="id" type="keyword">as</span> <span class="id" type="var">Q</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <a class="idref" href="VPHL.html#scale_inversion"><span class="id" type="lemma">scale_inversion</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">P</span>:=<span class="id" type="var">P</span>) (<span class="id" type="var">Q</span>:=<span class="id" type="var">Q</span>) (<span class="id" type="var">p</span>:=<span class="id" type="var">p</span>). <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">HeqQ</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">H</span> <span class="id" type="var">HeqQ</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_1"><span class="id" type="lemma">scale_equiv_1</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="scale_equiv_0'"><span class="id" type="lemma">scale_equiv_0'</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst0</span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a> <span class="id" type="keyword">in</span> <a class="idref" href="VPHL.html#dst0"><span class="id" type="variable">dst0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;(<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> (<a class="idref" href="Distributions.html#Combine"><span class="id" type="constructor">Combine</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="VPHL.html#v"><span class="id" type="variable">v</span></a> <a class="idref" href="VPHL.html#dst1"><span class="id" type="variable">dst1</span></a> <a class="idref" href="VPHL.html#dst0"><span class="id" type="variable">dst0</span></a>) (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> (<a class="idref" href="PrImp.html#BNot"><span class="id" type="constructor">BNot</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>)) (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)) <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation"><span style="font-family: arial;">&harr;</span></span></a> <br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <a class="idref" href="VPHL.html#dst0"><span class="id" type="variable">dst0</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst0</span> <span class="id" type="var">b</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">Pr1</span> <span class="id" type="var">Pr0</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#scale_cond"><span class="id" type="lemma">scale_cond</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <span class="id" type="var">P</span> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span>)) <span class="id" type="keyword">as</span> <span class="id" type="var">Q</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <a class="idref" href="VPHL.html#scale_inversion"><span class="id" type="lemma">scale_inversion</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">P</span>:=<span class="id" type="var">P</span>) (<span class="id" type="var">Q</span>:=<span class="id" type="var">Q</span>) (<span class="id" type="var">p</span>:=(1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><span class="id" type="var">p</span>)). <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">HeqQ</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">H</span> <span class="id" type="var">HeqQ</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_0"><span class="id" type="lemma">scale_equiv_0</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab49"></a><h3 class="section">Hoare If Prob Inverse</h3>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_if_prob'"><span class="id" type="lemma">hoare_if_prob'</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span> <span class="id" type="var">Q1</span> <span class="id" type="var">Q2</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">y</span> <span class="id" type="var">p</span>,<br/>
&nbsp;&nbsp;0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1 <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#Q1"><span class="id" type="variable">Q1</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#Q2"><span class="id" type="variable">Q2</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> (<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)))<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">)</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#Q1"><span class="id" type="variable">Q1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> (<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#Q2"><span class="id" type="variable">Q2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span> <span class="id" type="var">Q1</span> <span class="id" type="var">Q2</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">y</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">cf1</span> <span class="id" type="var">cf2</span> <span class="id" type="var">HP1</span> <span class="id" type="var">HP2</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">pre</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">prob</span> &amp; <span class="id" type="var">preT</span> &amp; <span class="id" type="var">preF</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#fork_on_b_plus"><span class="id" type="lemma">fork_on_b_plus</span></a> (<a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <span class="id" type="var">c1</span> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <span class="id" type="var">c2</span> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a>) <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span>) <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">step</span> <span class="id" type="var">prob</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> (<span class="id" type="var">dst1</span> &amp; <span class="id" type="var">dst0</span> &amp; <span class="id" type="var">dst''</span> &amp; <span class="id" type="var">E1</span> &amp; <span class="id" type="var">E0</span> &amp; <span class="id" type="var">Eq</span> &amp; <span class="id" type="var">step2</span> &amp; <span class="id" type="var">Eq2</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#dst_equiv_iff"><span class="id" type="lemma">dst_equiv_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Eq</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">Eq</span> <span class="id" type="keyword">in</span> <span class="id" type="var">preT</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">Eq</span> <span class="id" type="keyword">in</span> <span class="id" type="var">preF</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">step2</span>; <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">rename</span> <span class="id" type="var">H4</span> <span class="id" type="var">into</span> <span class="id" type="var">stepT</span>, <span class="id" type="var">H5</span> <span class="id" type="var">into</span> <span class="id" type="var">stepF</span>, <span class="id" type="var">dst2'</span> <span class="id" type="var">into</span> <span class="id" type="var">dst0'</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#dst_equiv_iff"><span class="id" type="lemma">dst_equiv_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Eq2</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_true_equiv"><span class="id" type="lemma">if_true_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">stepT</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_false_equiv"><span class="id" type="lemma">if_false_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">stepF</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#probability_preserved"><span class="id" type="lemma">probability_preserved</span></a> <span class="id" type="var">c1</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst1'</span> <span class="id" type="var">y</span> <span class="id" type="var">cf1</span> <span class="id" type="var">stepT</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">E1'</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#probability_preserved"><span class="id" type="lemma">probability_preserved</span></a> <span class="id" type="var">c2</span> <span class="id" type="var">dst0</span> <span class="id" type="var">dst0'</span> <span class="id" type="var">y</span> <span class="id" type="var">cf2</span> <span class="id" type="var">stepF</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">E0'</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">E1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">E1'</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">E0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">E0'</span>. <span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">E1'</span>, <span class="id" type="var">E0'</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <span class="id" type="var">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_1'"><span class="id" type="lemma">scale_equiv_1'</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_1'"><span class="id" type="lemma">scale_equiv_1'</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">preT</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <span class="id" type="var">HP1</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">stepT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <span class="id" type="var">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_0'"><span class="id" type="lemma">scale_equiv_0'</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_0'"><span class="id" type="lemma">scale_equiv_0'</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">preF</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <span class="id" type="var">HP2</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">stepF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab50"></a><h3 class="section">Hoare If General Inverse</h3>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_if_gen'"><span class="id" type="lemma">hoare_if_gen'</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span> <span class="id" type="var">Q1</span> <span class="id" type="var">Q2</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">y</span> <span class="id" type="var">p</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#unassigned"><span class="id" type="inductive">unassigned</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;(<a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#Q1"><span class="id" type="variable">Q1</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;(<a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)) <span style="font-family: arial;">&rarr;</span> <a class="idref" href="VPHL.html#all_zero"><span class="id" type="inductive">all_zero</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#Q2"><span class="id" type="variable">Q2</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>))) <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#Q1"><span class="id" type="variable">Q1</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#Q2"><span class="id" type="variable">Q2</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> (<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)))<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <a class="idref" href="VPHL.html#c1"><span class="id" type="variable">c1</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <a class="idref" href="VPHL.html#c2"><span class="id" type="variable">c2</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a><a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">)</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#Q1"><span class="id" type="variable">Q1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> (<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#Q2"><span class="id" type="variable">Q2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P1</span> <span class="id" type="var">P2</span> <span class="id" type="var">Q1</span> <span class="id" type="var">Q2</span> <span class="id" type="var">c1</span> <span class="id" type="var">c2</span> <span class="id" type="var">y</span> <span class="id" type="var">p</span> <span class="id" type="var">cf1</span> <span class="id" type="var">cf2</span> <span class="id" type="var">zero1</span> <span class="id" type="var">zero2</span> <span class="id" type="var">HP1</span> <span class="id" type="var">HP2</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">pre</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">pre</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">prob</span> &amp; <span class="id" type="var">preT</span> &amp; <span class="id" type="var">preF</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="Distributions.html#pr_normality"><span class="id" type="lemma">pr_normality</span></a> <span class="id" type="var">dst</span> (<a class="idref" href="PrImp.html#beval"><span class="id" type="definition">beval</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span>))); <span class="id" type="tactic">rewrite</span> <span class="id" type="var">prob</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">temp</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation"><span style="font-family: arial;">&or;</span></span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation"><span style="font-family: arial;">&or;</span></span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1) <span class="id" type="keyword">as</span> <span class="id" type="var">H</span> <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">temp</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">replace</span> (<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <span class="id" type="var">dst</span> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span>) <span class="id" type="var">p</span>)) <span class="id" type="keyword">with</span> (<a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">Prb</span></a> <a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span><a class="idref" href="PrImp.html#::'Prb'_x_'in'_x"><span class="id" type="notation">)</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">dst</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">p</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">by</span> <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Pr1</span> | <span class="id" type="var">H</span>]; [ | <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Pr0</span> | <span class="id" type="var">v</span>]].<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">Pr1</span> <span class="id" type="keyword">in</span> *. <span class="id" type="tactic">clear</span> <span class="id" type="var">Pr1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_true_equiv"><span class="id" type="lemma">if_true_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#probability_preserved"><span class="id" type="lemma">probability_preserved</span></a> <span class="id" type="var">c1</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">y</span> <span class="id" type="var">cf1</span> <span class="id" type="var">step</span>). <span class="id" type="tactic">intros</span> <span class="id" type="var">Pr1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">prob</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Pr1'</span>. <span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Pr1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#scale_1"><span class="id" type="lemma">scale_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">preT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#condition_on_1"><span class="id" type="lemma">condition_on_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">preT</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#scale_1"><span class="id" type="lemma">scale_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#condition_on_1"><span class="id" type="lemma">condition_on_1</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">HP1</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst</span>:=<span class="id" type="var">dst</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_complement_1"><span class="id" type="lemma">prb_complement_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#neg_b_all_zero"><span class="id" type="lemma">neg_b_all_zero</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">P</span>:=(<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <span class="id" type="var">P2</span> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a>1))) <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#scale_cond"><span class="id" type="lemma">scale_cond</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">prob</span> <span class="id" type="keyword">in</span> <span class="id" type="var">preF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">zero2</span> <span class="id" type="var">preF</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#scale_cond"><span class="id" type="lemma">scale_cond</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#neg_b_all_zero"><span class="id" type="lemma">neg_b_all_zero</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_complement_1"><span class="id" type="lemma">prb_complement_1</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">rewrite</span> <span class="id" type="var">Pr0</span> <span class="id" type="keyword">in</span> *. <span class="id" type="tactic">clear</span> <span class="id" type="var">Pr0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="PrImp.html#if_false_equiv"><span class="id" type="lemma">if_false_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#probability_preserved"><span class="id" type="lemma">probability_preserved</span></a> <span class="id" type="var">c2</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">y</span> <span class="id" type="var">cf2</span> <span class="id" type="var">step</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">Pr0'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">prob</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Pr0'</span>. <span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Pr0'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#neg_b_all_zero"><span class="id" type="lemma">neg_b_all_zero</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">P</span>:=(<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <span class="id" type="var">P1</span> 0)) <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#scale_cond"><span class="id" type="lemma">scale_cond</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">prob</span> <span class="id" type="keyword">in</span> <span class="id" type="var">preT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<span class="id" type="var">zero1</span> <span class="id" type="var">preT</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#scale_cond"><span class="id" type="lemma">scale_cond</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#neg_b_all_zero"><span class="id" type="lemma">neg_b_all_zero</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="PrImp.html#prb_complement_0"><span class="id" type="lemma">prb_complement_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="PrImp.html#prb_complement_0"><span class="id" type="lemma">prb_complement_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Pr0'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#scale_cond"><span class="id" type="lemma">scale_cond</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">preF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#condition_on_1"><span class="id" type="lemma">condition_on_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">preF</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#scale_cond"><span class="id" type="lemma">scale_cond</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="VPHL.html#condition_on_1"><span class="id" type="lemma">condition_on_1</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">replace</span> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/(</span></a>1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'-'_x"><span class="id" type="notation">-</span></a>0<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">)</span></a>) <span class="id" type="keyword">with</span> (1) <span class="id" type="keyword">in</span> <span class="id" type="var">HP2</span> <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rminus_0_r"><span class="id" type="lemma">Rminus_0_r</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#scale_1"><span class="id" type="lemma">scale_1</span></a> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">HP2</span> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst</span>:=<span class="id" type="var">dst</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_complement_0"><span class="id" type="lemma">prb_complement_0</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">prob</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#fork_on_b_plus"><span class="id" type="lemma">fork_on_b_plus</span></a> (<a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <span class="id" type="var">c1</span> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <span class="id" type="var">c2</span> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a>) <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span>) <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">step</span> <span class="id" type="var">prob</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> (<span class="id" type="var">dst1</span> &amp; <span class="id" type="var">dst0</span> &amp; <span class="id" type="var">dst''</span> &amp; <span class="id" type="var">E1</span> &amp; <span class="id" type="var">E0</span> &amp; <span class="id" type="var">Eq</span> &amp; <span class="id" type="var">step2</span> &amp; <span class="id" type="var">Eq2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#dst_equiv_iff"><span class="id" type="lemma">dst_equiv_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">Eq</span> <span class="id" type="keyword">in</span> <span class="id" type="var">preT</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">Eq</span> <span class="id" type="keyword">in</span> <span class="id" type="var">preF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">step2</span>; <span class="id" type="tactic">subst</span>. <span class="id" type="tactic">rename</span> <span class="id" type="var">dst2'</span> <span class="id" type="var">into</span> <span class="id" type="var">dst0'</span>, <span class="id" type="var">H4</span> <span class="id" type="var">into</span> <span class="id" type="var">stepT</span>, <span class="id" type="var">H5</span> <span class="id" type="var">into</span> <span class="id" type="var">stepF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#dst_equiv_iff"><span class="id" type="lemma">dst_equiv_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_true_equiv"><span class="id" type="lemma">if_true_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">stepT</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_false_equiv"><span class="id" type="lemma">if_false_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">stepF</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#probability_preserved"><span class="id" type="lemma">probability_preserved</span></a> <span class="id" type="var">c1</span> <span class="id" type="var">dst1</span> <span class="id" type="var">dst1'</span> <span class="id" type="var">y</span> <span class="id" type="var">cf1</span> <span class="id" type="var">stepT</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">E1'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">specialize</span> (<a class="idref" href="VPHL.html#probability_preserved"><span class="id" type="lemma">probability_preserved</span></a> <span class="id" type="var">c2</span> <span class="id" type="var">dst0</span> <span class="id" type="var">dst0'</span> <span class="id" type="var">y</span> <span class="id" type="var">cf2</span> <span class="id" type="var">stepF</span>); <span class="id" type="tactic">intros</span> <span class="id" type="var">E0'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">E1</span> <span class="id" type="keyword">in</span> <span class="id" type="var">E1'</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">E0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">E0'</span>. <span class="id" type="tactic">symmetry</span> <span class="id" type="keyword">in</span> <span class="id" type="var">E1'</span>, <span class="id" type="var">E0'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">apply</span> <span class="id" type="var">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_1'"><span class="id" type="lemma">scale_equiv_1'</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_1'"><span class="id" type="lemma">scale_equiv_1'</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">preT</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <span class="id" type="var">HP1</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">stepT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">apply</span> <span class="id" type="var">Eq2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_0'"><span class="id" type="lemma">scale_equiv_0'</span></a>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#scale_equiv_0'"><span class="id" type="lemma">scale_equiv_0'</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">preF</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <span class="id" type="var">HP2</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">stepF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab51"></a><h1 class="section">Generalizing the While rule</h1>

<div class="paragraph"> </div>

<a name="lab52"></a><h3 class="section">Two useful While Equivalences</h3>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="while_embed"><span class="id" type="lemma">while_embed</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span> <span class="id" type="var">c</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation"><span style="font-family: arial;">&harr;</span></span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <a class="idref" href="PrImp.html#Skip"><span class="id" type="constructor">Skip</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="var">remember</span> (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <span class="id" type="var">c</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) <span class="id" type="keyword">as</span> <span class="id" type="var">com</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">inversion</span> <span class="id" type="var">Heqcom</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_false_equiv"><span class="id" type="lemma">if_false_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_Skip"><span class="id" type="constructor">E_Skip</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_true_equiv"><span class="id" type="lemma">if_true_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_WhileLoop"><span class="id" type="constructor">E_WhileLoop</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst'</span>:=<span class="id" type="var">dst'</span>); <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_Lift"><span class="id" type="constructor">E_Lift</span></a>; [<span class="id" type="tactic">apply</span> <span class="id" type="var">IHceval1</span> | <span class="id" type="tactic">apply</span> <span class="id" type="var">IHceval2</span>]; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="var">remember</span> (<a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <span class="id" type="var">c</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <a class="idref" href="PrImp.html#Skip"><span class="id" type="constructor">Skip</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a>) <span class="id" type="keyword">as</span> <span class="id" type="var">com</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">inversion</span> <span class="id" type="var">Heqcom</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">inversion</span> <span class="id" type="var">H0</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_WhileEnd"><span class="id" type="constructor">E_WhileEnd</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_Lift"><span class="id" type="constructor">E_Lift</span></a>; [<span class="id" type="tactic">apply</span> <span class="id" type="var">IHceval1</span> | <span class="id" type="tactic">apply</span> <span class="id" type="var">IHceval2</span>]; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="while_embed_special"><span class="id" type="lemma">while_embed_special</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">y</span> <span class="id" type="var">y'</span> <span class="id" type="var">c</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span>,<br/>
&nbsp;&nbsp;(<a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::x_';'_x"><span class="id" type="notation">(</span></a><a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a><a class="idref" href="PrImp.html#::x_':=='_x"><span class="id" type="notation">:==</span></a><a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="PrImp.html#::x_';'_x"><span class="id" type="notation">);</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a><a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<->'_x"><span class="id" type="notation"><span style="font-family: arial;">&harr;</span></span></a><br/>
&nbsp;&nbsp;<a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">(</span></a><a class="idref" href="PrImp.html#::x_';'_x"><span class="id" type="notation">(</span></a><a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a><a class="idref" href="PrImp.html#::x_':=='_x"><span class="id" type="notation">:==</span></a><a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="PrImp.html#::x_';'_x"><span class="id" type="notation">);</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <a class="idref" href="PrImp.html#Skip"><span class="id" type="constructor">Skip</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a><a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation">/</span></a> <a class="idref" href="VPHL.html#dst"><span class="id" type="variable">dst</span></a> <a class="idref" href="PrImp.html#::x_'/'_x_'||'_x"><span class="id" type="notation"><span style="font-family: arial;">&dArr;</span></span></a> <a class="idref" href="VPHL.html#dst'"><span class="id" type="variable">dst'</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#seq_equiv"><span class="id" type="lemma">seq_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">dst'0</span> &amp; <span class="id" type="var">step</span> &amp; <span class="id" type="var">step'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#seq_lift"><span class="id" type="lemma">seq_lift</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst'</span>:=<span class="id" type="var">dst'0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <span class="id" type="var">dst'0</span> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BIff"><span class="id" type="definition">BIff</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span>) (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y'</span>)) 1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#hoare_asgn_b"><span class="id" type="lemma">hoare_asgn_b</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="SfLib.html#beq_bid_refl"><span class="id" type="lemma">beq_bid_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_tautology"><span class="id" type="lemma">pr_tautology</span></a>; <span class="id" type="tactic">intros</span> <span class="id" type="var">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="SfLib.html#beq_bid"><span class="id" type="definition">beq_bid</span></a> <span class="id" type="var">y'</span> <span class="id" type="var">y</span>); <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" type="definition">snd</span></a> <span class="id" type="var">st</span> <span class="id" type="var">y</span>); <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">step</span> <span class="id" type="var">dst</span>. <span class="id" type="tactic">rename</span> <span class="id" type="var">step'</span> <span class="id" type="var">into</span> <span class="id" type="var">step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <span class="id" type="var">c</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) <span class="id" type="keyword">as</span> <span class="id" type="var">com</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">step</span>; <span class="id" type="tactic">inversion</span> <span class="id" type="var">Heqcom</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_false_lift"><span class="id" type="lemma">if_false_lift</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" type="definition">snd</span></a> <span class="id" type="var">st</span> <span class="id" type="var">y'</span>) <span class="id" type="var">eqn</span>:<span class="id" type="var">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_Skip"><span class="id" type="constructor">E_Skip</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#if_true_lift"><span class="id" type="lemma">if_true_lift</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" type="definition">snd</span></a> <span class="id" type="var">st</span> <span class="id" type="var">y'</span>) <span class="id" type="var">eqn</span>:<span class="id" type="var">Eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_WhileLoop"><span class="id" type="constructor">E_WhileLoop</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst'</span>:=<span class="id" type="var">dst'</span>); <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_split_1"><span class="id" type="lemma">pr_split_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_Lift"><span class="id" type="constructor">E_Lift</span></a>; [<span class="id" type="tactic">apply</span> <span class="id" type="var">IHstep1</span> | <span class="id" type="tactic">apply</span> <span class="id" type="var">IHstep2</span>]; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#seq_equiv"><span class="id" type="lemma">seq_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">dst'0</span> &amp; <span class="id" type="var">step</span> &amp; <span class="id" type="var">step'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#seq_lift"><span class="id" type="lemma">seq_lift</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">dst'</span>:=<span class="id" type="var">dst'0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="VPHL.html#heval"><span class="id" type="definition">heval</span></a> <span class="id" type="var">dst'0</span> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BIff"><span class="id" type="definition">BIff</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span>) (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y'</span>)) 1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#hoare_asgn_b"><span class="id" type="lemma">hoare_asgn_b</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="SfLib.html#beq_bid_refl"><span class="id" type="lemma">beq_bid_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_tautology"><span class="id" type="lemma">pr_tautology</span></a>; <span class="id" type="tactic">intros</span> <span class="id" type="var">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="SfLib.html#beq_bid"><span class="id" type="definition">beq_bid</span></a> <span class="id" type="var">y'</span> <span class="id" type="var">y</span>); <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" type="definition">snd</span></a> <span class="id" type="var">st</span> <span class="id" type="var">y</span>); <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">clear</span> <span class="id" type="var">step</span> <span class="id" type="var">dst</span>. <span class="id" type="tactic">rename</span> <span class="id" type="var">step'</span> <span class="id" type="var">into</span> <span class="id" type="var">step</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">remember</span> (<a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">IFB</span></a> <span class="id" type="var">y'</span> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">THEN</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <span class="id" type="var">c</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">ELSE</span></a> <a class="idref" href="PrImp.html#Skip"><span class="id" type="constructor">Skip</span></a> <a class="idref" href="PrImp.html#::'IFB'_x_'THEN'_x_'ELSE'_x_'FI'"><span class="id" type="notation">FI</span></a>) <span class="id" type="keyword">as</span> <span class="id" type="var">com</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">step</span>; <span class="id" type="tactic">inversion</span> <span class="id" type="var">Heqcom</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">inversion</span> <span class="id" type="var">step</span>; <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_WhileEnd"><span class="id" type="constructor">E_WhileEnd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" type="definition">snd</span></a> <span class="id" type="var">st</span> <span class="id" type="var">y</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_split_1"><span class="id" type="lemma">pr_split_1</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#E_Lift"><span class="id" type="constructor">E_Lift</span></a>; [<span class="id" type="tactic">apply</span> <span class="id" type="var">IHstep1</span> | <span class="id" type="tactic">apply</span> <span class="id" type="var">IHstep2</span>]; <span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="sub_over_condition"><span class="id" type="lemma">sub_over_condition</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P</span> <span class="id" type="var">b</span> <span class="id" type="var">y</span> <span class="id" type="var">b'</span>,<br/>
<a class="idref" href="VPHL.html#hexp_sub_b"><span class="id" type="definition">hexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b'"><span class="id" type="variable">b'</span></a> (<a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a> (<a class="idref" href="VPHL.html#hexp_sub_b"><span class="id" type="definition">hexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b'"><span class="id" type="variable">b'</span></a> <a class="idref" href="VPHL.html#P"><span class="id" type="variable">P</span></a>) (<a class="idref" href="VPHL.html#bexp_sub_b"><span class="id" type="definition">bexp_sub_b</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="VPHL.html#b'"><span class="id" type="variable">b'</span></a> <a class="idref" href="VPHL.html#b"><span class="id" type="variable">b</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">P</span>; <span class="id" type="tactic">try</span> <span class="id" type="tactic">solve</span> [<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#condition"><span class="id" type="definition">condition</span></a>; <span class="id" type="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHP1</span>, <span class="id" type="var">IHP2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHP1</span>, <span class="id" type="var">IHP2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_while_prob"><span class="id" type="lemma">hoare_while_prob</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P1</span> <span class="id" type="var">D</span> <span class="id" type="var">P2</span> <span class="id" type="var">c</span> <span class="id" type="var">y</span> <span class="id" type="var">y'</span> <span class="id" type="var">p</span>, <br/>
&nbsp;&nbsp;0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'<'_x_'<'_x"><span class="id" type="notation">&lt;</span></a> 1 <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#hx_bid_free"><span class="id" type="inductive">hx_bid_free</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#hx_bid_free"><span class="id" type="inductive">hx_bid_free</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#non_probabilistic"><span class="id" type="inductive">non_probabilistic</span></a> <a class="idref" href="VPHL.html#D"><span class="id" type="variable">D</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)) (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#D"><span class="id" type="variable">D</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#D"><span class="id" type="variable">D</span></a> (<a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="VPHL.html#:hoare_spec_scope:x_'->>'_x"><span class="id" type="notation"><span style="font-family: arial;">&#8702;</span></span></a> <a class="idref" href="VPHL.html#D"><span class="id" type="variable">D</span></a> <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a><a class="idref" href="PrImp.html#::x_':=='_x"><span class="id" type="notation">:==(</span></a><a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="PrImp.html#::x_':=='_x"><span class="id" type="notation">)</span></a><a class="idref" href="PrImp.html#::x_';'_x"><span class="id" type="notation">;</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a>) (<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a>)) (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P1</span> <span class="id" type="var">D</span> <span class="id" type="var">P2</span> <span class="id" type="var">c</span> <span class="id" type="var">y</span> <span class="id" type="var">y'</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">neq</span> <span class="id" type="var">hf1'</span> <span class="id" type="var">hf2'</span> <span class="id" type="var">cf'</span> <span class="id" type="var">np</span> <span class="id" type="var">inv'</span> <span class="id" type="var">inv</span> <span class="id" type="var">cons</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">HP</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Focus</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#seq_equiv"><span class="id" type="lemma">seq_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">dst'0</span> &amp; <span class="id" type="var">step</span> &amp; <span class="id" type="var">step'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#hoare_while_end"><span class="id" type="lemma">hoare_while_end</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">step'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_true"><span class="id" type="lemma">prb_true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#free_eq_b"><span class="id" type="lemma">free_eq_b</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">hf1'</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#free_eq_b"><span class="id" type="lemma">free_eq_b</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">hf2'</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#while_embed_special"><span class="id" type="lemma">while_embed_special</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span> ; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">HP</span>. <span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">step</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">dst'</span>. <span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">dst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#hoare_seq"><span class="id" type="lemma">hoare_seq</span></a> <span class="id" type="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="var">Q</span>:= (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y'</span>) <span class="id" type="var">p</span>) (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <span class="id" type="var">P1</span> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span>) <span class="id" type="var">p</span>)) <span class="id" type="var">y'</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <span class="id" type="var">P2</span> <span class="id" type="var">y'</span>)))).<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#hoare_consequence_pre"><span class="id" type="lemma">hoare_consequence_pre</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#hoare_asgn_b"><span class="id" type="lemma">hoare_asgn_b</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">dst</span> (<span class="id" type="var">Prp</span> &amp; <span class="id" type="var">HPT</span> &amp; <span class="id" type="var">HPF</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a>, <a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="VPHL.html#sub_over_condition"><span class="id" type="lemma">sub_over_condition</span></a>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_bid_false_iff"><span class="id" type="lemma">beq_bid_false_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">neq</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">neq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="SfLib.html#beq_bid_refl"><span class="id" type="lemma">beq_bid_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">hf1'</span>, <span class="id" type="var">hf2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <span class="id" type="var">Prp</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_equivalence"><span class="id" type="lemma">pr_equivalence</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" type="definition">snd</span></a> <span class="id" type="var">t</span> <span class="id" type="var">y</span>); <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#hoare_if_prob"><span class="id" type="lemma">hoare_if_prob</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">c1</span>:=<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <span class="id" type="var">c</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) (<span class="id" type="var">c2</span>:=<a class="idref" href="PrImp.html#Skip"><span class="id" type="constructor">Skip</span></a>) (<span class="id" type="var">p</span>:=<span class="id" type="var">p</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">repeat</span> <span class="id" type="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#free_then_unassigned"><span class="id" type="lemma">free_then_unassigned</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#hoare_consequence"><span class="id" type="lemma">hoare_consequence</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#hoare_while_det"><span class="id" type="lemma">hoare_while_det</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">P</span>:=(<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <span class="id" type="var">P1</span> (1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">p</span>))) (<span class="id" type="var">D</span>:=<span class="id" type="var">D</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">intros</span> <span class="id" type="var">dst</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> ((<span class="id" type="var">H1</span> &amp; <span class="id" type="var">H2</span>) &amp; <span class="id" type="var">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">left</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>. <span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">H2</span>. <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">dst</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#hoare_consequence_pre"><span class="id" type="lemma">hoare_consequence_pre</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#hoare_skip"><span class="id" type="lemma">hoare_skip</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">dst</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab53"></a><h2 class="section">The "General" Hoare While Rule</h2>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Theorem</span> <a name="hoare_while_gen"><span class="id" type="lemma">hoare_while_gen</span></a> : <span class="id" type="keyword"><span style="font-family: arial;">&forall;</span></span> <span class="id" type="var">P1</span> <span class="id" type="var">D</span> <span class="id" type="var">P2</span> <span class="id" type="var">c</span> <span class="id" type="var">y</span> <span class="id" type="var">y'</span> <span class="id" type="var">p</span>, <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#hx_bid_free"><span class="id" type="inductive">hx_bid_free</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#hx_bid_free"><span class="id" type="inductive">hx_bid_free</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#com_bid_free"><span class="id" type="inductive">com_bid_free</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#non_probabilistic"><span class="id" type="inductive">non_probabilistic</span></a> <a class="idref" href="VPHL.html#D"><span class="id" type="variable">D</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>)) (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a><a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#D"><span class="id" type="variable">D</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <a class="idref" href="VPHL.html#D"><span class="id" type="variable">D</span></a> (<a class="idref" href="VPHL.html#HOr"><span class="id" type="constructor">HOr</span></a> (<a class="idref" href="VPHL.html#HTrue"><span class="id" type="definition">HTrue</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <span style="font-family: arial;">&rarr;</span><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> (1<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a><a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) <a class="idref" href="VPHL.html#:hoare_spec_scope:x_'->>'_x"><span class="id" type="notation"><span style="font-family: arial;">&#8702;</span></span></a> <a class="idref" href="VPHL.html#D"><span class="id" type="variable">D</span></a> <span style="font-family: arial;">&rarr;</span> <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#p"><span class="id" type="variable">p</span></a>) (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) (<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>)) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a><a class="idref" href="PrImp.html#::x_':=='_x"><span class="id" type="notation">:==(</span></a><a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a><a class="idref" href="PrImp.html#::x_':=='_x"><span class="id" type="notation">)</span></a><a class="idref" href="PrImp.html#::x_';'_x"><span class="id" type="notation">;</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <a class="idref" href="VPHL.html#c"><span class="id" type="variable">c</span></a> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">{{</span></a> <a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> <a class="idref" href="VPHL.html#P1"><span class="id" type="variable">P1</span></a> <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a>) (<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <a class="idref" href="VPHL.html#P2"><span class="id" type="variable">P2</span></a> <a class="idref" href="VPHL.html#y'"><span class="id" type="variable">y'</span></a>)) (<a class="idref" href="VPHL.html#HFalse"><span class="id" type="definition">HFalse</span></a> <a class="idref" href="VPHL.html#y"><span class="id" type="variable">y</span></a>) <a class="idref" href="VPHL.html#:hoare_spec_scope:'{{'_x_'}}'_x_'{{'_x_'}}'"><span class="id" type="notation">}}</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">P1</span> <span class="id" type="var">D</span> <span class="id" type="var">P2</span> <span class="id" type="var">c</span> <span class="id" type="var">y</span> <span class="id" type="var">y'</span> <span class="id" type="var">p</span> <span class="id" type="var">neq</span> <span class="id" type="var">hf1'</span> <span class="id" type="var">hf2'</span> <span class="id" type="var">cf'</span> <span class="id" type="var">np</span> <span class="id" type="var">inv'</span> <span class="id" type="var">inv</span> <span class="id" type="var">cons</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> <span class="id" type="var">HP</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">Focus</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#seq_equiv"><span class="id" type="lemma">seq_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span> <span class="id" type="keyword">as</span> (<span class="id" type="var">dst'0</span> &amp; <span class="id" type="var">step</span> &amp; <span class="id" type="var">step'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#hoare_while_end"><span class="id" type="lemma">hoare_while_end</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">step'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#prb_true"><span class="id" type="lemma">prb_true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#free_eq_b"><span class="id" type="lemma">free_eq_b</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">hf1'</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#free_eq_b"><span class="id" type="lemma">free_eq_b</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">hf2'</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="VPHL.html#while_embed_special"><span class="id" type="lemma">while_embed_special</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span> ; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">HP</span>. <span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">step</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">dst'</span>. <span class="id" type="tactic">generalize</span> <span class="id" type="tactic">dependent</span> <span class="id" type="var">dst</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#hoare_seq"><span class="id" type="lemma">hoare_seq</span></a> <span class="id" type="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="var">Q</span>:= (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y'</span>) <span class="id" type="var">p</span>) (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> (<a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a> (<a class="idref" href="VPHL.html#HAnd"><span class="id" type="constructor">HAnd</span></a> <span class="id" type="var">P1</span> (<a class="idref" href="VPHL.html#HEq"><span class="id" type="constructor">HEq</span></a> (<a class="idref" href="PrImp.html#BId"><span class="id" type="constructor">BId</span></a> <span class="id" type="var">y</span>) <span class="id" type="var">p</span>)) <span class="id" type="var">y'</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a> <span class="id" type="var">P2</span> <span class="id" type="var">y'</span>)))).<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#hoare_consequence_pre"><span class="id" type="lemma">hoare_consequence_pre</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#hoare_asgn_b"><span class="id" type="lemma">hoare_asgn_b</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">dst</span> (<span class="id" type="var">Prp</span> &amp; <span class="id" type="var">HPT</span> &amp; <span class="id" type="var">HPF</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="VPHL.html#conditionT"><span class="id" type="definition">conditionT</span></a>, <a class="idref" href="VPHL.html#conditionF"><span class="id" type="definition">conditionF</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> 2 <a class="idref" href="VPHL.html#sub_over_condition"><span class="id" type="lemma">sub_over_condition</span></a>; <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="SfLib.html#beq_bid_false_iff"><span class="id" type="lemma">beq_bid_false_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">neq</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">neq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="SfLib.html#beq_bid_refl"><span class="id" type="lemma">beq_bid_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">hf1'</span>, <span class="id" type="var">hf2'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <span class="id" type="var">Prp</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="Distributions.html#pr_equivalence"><span class="id" type="lemma">pr_equivalence</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" type="definition">snd</span></a> <span class="id" type="var">t</span> <span class="id" type="var">y</span>); <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id" type="tactic">assert</span> (<span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation"><span style="font-family: arial;">&or;</span></span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Init.Logic.html#:type_scope:x_'<>'_x"><span class="id" type="notation"><span style="font-family: serif;">&ne;</span></span></a> 0) <span class="id" type="keyword">as</span> <span class="id" type="var">H</span> <span class="id" type="tactic">by</span> <span class="id" type="var">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Z</span> | <span class="id" type="var">NZ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">intros</span> <span class="id" type="var">dst</span> <span class="id" type="var">dst'</span> <span class="id" type="var">step</span> (<span class="id" type="var">Pry</span> &amp; ((<span class="id" type="var">HPEq</span> &amp; <span class="id" type="var">HPT</span>) &amp; <span class="id" type="var">HPF</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Z</span> <span class="id" type="keyword">in</span> <span class="id" type="var">Pry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="PrImp.html#if_false_equiv"><span class="id" type="lemma">if_false_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="PrImp.html#skip_equiv"><span class="id" type="lemma">skip_equiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">step</span>. <span class="id" type="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#hoare_if_gen"><span class="id" type="lemma">hoare_if_gen</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">c1</span>:=<a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">WHILE</span></a> <span class="id" type="var">y</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">DO</span></a> <span class="id" type="var">c</span> <a class="idref" href="PrImp.html#::'WHILE'_x_'DO'_x_'END'"><span class="id" type="notation">END</span></a>) (<span class="id" type="var">c2</span>:=<a class="idref" href="PrImp.html#Skip"><span class="id" type="constructor">Skip</span></a>) (<span class="id" type="var">p</span>:=<span class="id" type="var">p</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">repeat</span> <span class="id" type="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#free_then_unassigned"><span class="id" type="lemma">free_then_unassigned</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#hoare_consequence"><span class="id" type="lemma">hoare_consequence</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#hoare_while_det"><span class="id" type="lemma">hoare_while_det</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">P</span>:=(<a class="idref" href="VPHL.html#scale"><span class="id" type="definition">scale</span></a> <span class="id" type="var">P1</span> (1 <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#:R_scope:x_'/'_x"><span class="id" type="notation">/</span></a> <span class="id" type="var">p</span>))) (<span class="id" type="var">D</span>:=<span class="id" type="var">D</span>); <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">intros</span> <span class="id" type="var">dst</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> ((<span class="id" type="var">H1</span> &amp; <span class="id" type="var">H2</span>) &amp; <span class="id" type="var">H3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">left</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Rdefinitions.html#Rdiv"><span class="id" type="definition">Rdiv</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_comm"><span class="id" type="axiom">Rmult_comm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span style="font-family: arial;">&larr;</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.Raxioms.html#Rmult_assoc"><span class="id" type="axiom">Rmult_assoc</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4/stdlib/Coq.Reals.RIneq.html#Rinv_r_simpl_m"><span class="id" type="lemma">Rinv_r_simpl_m</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">H2</span>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">dst</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">eapply</span> <a class="idref" href="VPHL.html#hoare_consequence_pre"><span class="id" type="lemma">hoare_consequence_pre</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="VPHL.html#hoare_skip"><span class="id" type="lemma">hoare_skip</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">dst</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>